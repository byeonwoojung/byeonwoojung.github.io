{"componentChunkName":"component---src-templates-blog-template-js","path":"/25-12-25_1/","result":{"data":{"cur":{"id":"cd4dc7a1-3e81-5f0a-aec7-f809be6b0269","html":"<p>ì°¸ê³  : í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ (<a href=\"https://fastcampus.co.kr/data_online_teddy\">https://fastcampus.co.kr/data_online_teddy</a>)</p>\n<p>ì†ŒìŠ¤ì½”ë“œ: <a href=\"https://github.com/teddylee777/langchain-kr\">https://github.com/teddylee777/langchain-kr</a></p>\n<p>ìœ„í‚¤ë…ìŠ¤: <a href=\"https://wikidocs.net/book/14314\">https://wikidocs.net/book/14314</a></p>\n<p>Â </p>\n<p>ì˜¤ëŠ˜ì€ ë§¥ ì‚¬ìš©ì(ì €ìš”,,,)ì˜ í—ˆê¹…í˜ì´ìŠ¤ ëª¨ë¸ì„ ë¡œì»¬ë¡œ ê°€ì ¸ì™€<br>mpsë¥¼ ì´ìš©í•´ GPU ê°€ì†í™”í•˜ëŠ” ë°©ë²•ì„ ë¨¼ì € ë³´ê³  ê°€ê² ìŠµë‹ˆë‹¤~</p>\n<p>ë ˆì¸ ê¸°ë¦¬ì‡~!</p>\n<p>Â </p>\n<h2 id=\"macmps-í™˜ê²½ì—ì„œ-huggingfacepipeline-ì‚¬ìš©-ì‹œ-ì£¼ì˜ì‚¬í•­\" style=\"position:relative;\"><a href=\"#macmps-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C-huggingfacepipeline-%EC%82%AC%EC%9A%A9-%EC%8B%9C-%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%AD\" aria-label=\"macmps í™˜ê²½ì—ì„œ huggingfacepipeline ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mac(MPS) í™˜ê²½ì—ì„œ HuggingFacePipeline ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­</h2>\n<hr>\n<h3 id=\"code-classlanguage-textfrom_model_idcode-vs-code-classlanguage-textpipelinecode-ì§ì ‘-ì£¼ì…\" style=\"position:relative;\"><a href=\"#code-classlanguage-textfrom_model_idcode-vs-code-classlanguage-textpipelinecode-%EC%A7%81%EC%A0%91-%EC%A3%BC%EC%9E%85\" aria-label=\"code classlanguage textfrom_model_idcode vs code classlanguage textpipelinecode ì§ì ‘ ì£¼ì… permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">from_model_id</code> vs <code class=\"language-text\">pipeline</code> ì§ì ‘ ì£¼ì…</h3>\n<p>LangChainì„ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ LLMì„ êµ¬ë™í•  ë•Œ, íŠ¹íˆ Apple Silicon(M1/M2/M3) í™˜ê²½ì—ì„œ GPU ê°€ì†(MPS)ì„ ì„¤ì •í•˜ëŠ” ê³¼ì •ì—ì„œ <code class=\"language-text\">ValueError</code>ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.</p>\n<p><strong>ì´ëŠ” LangChainì´ ë‚´ë¶€ì ìœ¼ë¡œ Hugging Face ëª¨ë¸ì„ ë¡œë“œí•˜ëŠ” ë°©ì‹(<code class=\"language-text\">from_model_id</code>)ê³¼ ì‹¤ì œ <code class=\"language-text\">transformers</code> ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ <code class=\"language-text\">pipeline</code>ì´ ì¥ì¹˜(Device)ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì˜ ì°¨ì´ ë•Œë¬¸ì…ë‹ˆë‹¤.</strong></p>\n<p>Â </p>\n<ol>\n<li>\n<p><code class=\"language-text\">transformers.pipeline</code></p>\n<ul>\n<li>\n<p><strong>ì†Œì† ë¼ì´ë¸ŒëŸ¬ë¦¬:</strong> <code class=\"language-text\">transformers</code> (Hugging Face)</p>\n</li>\n<li>\n<p><strong>ì •ì²´:</strong> ëª¨ë¸ ì¶”ë¡ (Inference)ì„ ìœ„í•œ <strong>End-to-End ì‹¤í–‰ ì—”ì§„</strong>ì…ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p><strong>ì—­í• :</strong> ëª¨ë¸ ë‹¤ìš´ë¡œë“œ, í† í¬ë‚˜ì´ì € ë¡œë“œ, ì…ë ¥ í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬(Pre-processing), ëª¨ë¸ ì¶”ë¡ (Model Inference), ê²°ê³¼ í›„ì²˜ë¦¬(Post-processing)ì˜ ì „ ê³¼ì •ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p><strong>Device ì²˜ë¦¬ íŠ¹ì§•:</strong></p>\n<ul>\n<li>â­ï¸ <strong><code class=\"language-text\">device</code> ì¸ìë¡œ ë¬¸ìì—´(<code class=\"language-text\">\"cpu\"</code>, <code class=\"language-text\">\"cuda\"</code>, <code class=\"language-text\">\"mps\"</code>)ê³¼ ì •ìˆ˜(GPU ID)ë¥¼ ëª¨ë‘ ì§€ì›í•©ë‹ˆë‹¤.</strong> â­ï¸</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">HuggingFacePipeline.from_model_id</code></p>\n<ul>\n<li>\n<p><strong>ì†Œì† ë¼ì´ë¸ŒëŸ¬ë¦¬:</strong> <code class=\"language-text\">langchain_huggingface</code></p>\n</li>\n<li>\n<p><strong>ì •ì²´:</strong> LangChainì—ì„œ <code class=\"language-text\">HuggingFacePipeline</code> ê°ì²´ë¥¼ ì‰½ê²Œ ìƒì„±í•˜ê¸° ìœ„í•´ ì œê³µí•˜ëŠ” **íŒ©í† ë¦¬ ë©”ì„œë“œ(Factory Method)ì´ì ë˜í¼(Wrapper)**ì…ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p><strong>ì—­í• :</strong> ë‚´ë¶€ì ìœ¼ë¡œ <code class=\"language-text\">transformers.pipeline</code>ì„ í˜¸ì¶œí•˜ì—¬ íŒŒì´í”„ë¼ì¸ì„ ìƒì„±í•˜ê³ , ì´ë¥¼ LangChain ê°ì²´ë¡œ ê°ìŒ‰ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p><strong>Device ì²˜ë¦¬ íŠ¹ì§•:</strong></p>\n<ul>\n<li>ì‚¬ìš©ìì˜ í¸ì˜ë¥¼ ìœ„í•´ <code class=\"language-text\">device</code> íŒŒë¼ë¯¸í„°ë¥¼ ì£¼ë¡œ ì •ìˆ˜í˜•(Integer)ìœ¼ë¡œ ì…ë ¥ë°›ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. (ì˜ˆ: <code class=\"language-text\">-1</code>ì€ CPU, â­ï¸ <strong><code class=\"language-text\">0</code>ì€ ì²« ë²ˆì§¸ CUDA GPU</strong> â­ï¸)</li>\n<li>ì´ ê³¼ì •ì—ì„œ **ìœ íš¨ì„± ê²€ì‚¬ ë¡œì§(Validation Logic)**ì´ í¬í•¨ë˜ëŠ”ë°, ì´ ë¡œì§ì´ NVIDIA GPU(CUDA)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ë˜ì–´ ìˆì–´ Mac(MPS) í™˜ê²½ê³¼ í˜¸í™˜ì„± ì¶©ëŒì„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<p>Â </p>\n<p>ê²°êµ­,</p>\n<p><strong>ë§¥ë¶ ì‚¬ìš©ìëŠ” mps ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ”<br><code class=\"language-text\">HuggingFacePipeline.from_model_id</code>ê°€ ì•„ë‹Œ, <code class=\"language-text\">transformers.pipeline</code>ì„ ì´ìš©í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># âœ… mpsëŠ” í—ˆê¹…í˜ì´ìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ transformersì˜ pipelineì„ ì‚¬ìš©í•˜ì—¬ì•¼ í•œë‹¤.</span>\n\n<span class=\"token keyword\">import</span> torch\n<span class=\"token keyword\">from</span> transformers <span class=\"token keyword\">import</span> pipeline\n<span class=\"token keyword\">from</span> langchain_huggingface <span class=\"token keyword\">import</span> HuggingFacePipeline\n\n<span class=\"token comment\"># 1. Transformersì˜ pipelineì„ ì§ì ‘ ìƒì„±í•©ë‹ˆë‹¤.</span>\n<span class=\"token comment\"># ì—¬ê¸°ì„œ device=\"mps\"ë¥¼ ë¬¸ìì—´ë¡œ ëª…ì‹œí•˜ë©´ ì—ëŸ¬ ì—†ì´ ê°•ì œë¡œ MPSë¥¼ ì¡ìŠµë‹ˆë‹¤.</span>\npipe <span class=\"token operator\">=</span> pipeline<span class=\"token punctuation\">(</span>\n    task<span class=\"token operator\">=</span><span class=\"token string\">\"text-generation\"</span><span class=\"token punctuation\">,</span>\n    model<span class=\"token operator\">=</span><span class=\"token string\">\"microsoft/Phi-3-mini-4k-instruct\"</span><span class=\"token punctuation\">,</span>\n    device<span class=\"token operator\">=</span><span class=\"token string\">\"mps\"</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\"># &lt;--- í•µì‹¬: ì—¬ê¸°ì„œ \"mps\"ë¥¼ ì§ì ‘ ì§€ì •</span>\n    model_kwargs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"torch_dtype\"</span><span class=\"token punctuation\">:</span> torch<span class=\"token punctuation\">.</span>float16<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># Macì—ì„œ ë©”ëª¨ë¦¬ ì ˆì•½ ë° ì†ë„ í–¥ìƒ</span>\n    max_new_tokens<span class=\"token operator\">=</span><span class=\"token number\">256</span><span class=\"token punctuation\">,</span>\n    top_k<span class=\"token operator\">=</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n    temperature<span class=\"token operator\">=</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span>\n    do_sample<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># ê²½ê³  ë©”ì‹œì§€ í•´ê²°</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 2. ìƒì„±ëœ pipeë¥¼ LangChain ê°ì²´ì— ì£¼ì…í•©ë‹ˆë‹¤.</span>\nllm <span class=\"token operator\">=</span> HuggingFacePipeline<span class=\"token punctuation\">(</span>pipeline<span class=\"token operator\">=</span>pipe<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 3. ì‹¤í–‰</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>llm<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token string\">\"Hugging Face is\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ë§¥ë¶ ì‚¬ìš©ì(mps ì´ìš©)ëŠ” ìœ„ ì½”ë“œë¥¼ ì´ìš©í•´ì•¼ í•˜ë©°,</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># CUDA ìš©</span>\n<span class=\"token keyword\">from</span> langchain_huggingface <span class=\"token keyword\">import</span> HuggingFacePipeline\n\nllm <span class=\"token operator\">=</span> HuggingFacePipeline<span class=\"token punctuation\">.</span>from_model_id<span class=\"token punctuation\">(</span>\n    model_id<span class=\"token operator\">=</span><span class=\"token string\">\"microsoft/Phi-3-mini-4k-instruct\"</span><span class=\"token punctuation\">,</span>\n    task<span class=\"token operator\">=</span><span class=\"token string\">\"text-generation\"</span><span class=\"token punctuation\">,</span>\n    pipeline_kwargs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"max_new_tokens\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">256</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"top_k\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"temperature\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"do_sample\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    device<span class=\"token operator\">=</span><span class=\"token number\">0</span>   <span class=\"token comment\"># from_model_idì€ cudaë¥¼ 0ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ì„œ mpsëŠ” ì‚¬ìš© ë¶ˆê°€ëŠ¥</span>\n<span class=\"token punctuation\">)</span>\nllm<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token string\">\"Hugging Face is\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ìœ„ ì½”ë“œëŠ” ë§¥ë¶ ì‚¬ìš©ì(mps ì´ìš©)ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>\n<p>OK.</p>\n<p>Â </p>\n<p>Â </p>\n<h2 id=\"ollama\" style=\"position:relative;\"><a href=\"#ollama\" aria-label=\"ollama permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ollama</h2>\n<hr>\n<p>OllamaëŠ” ë³µì¡í•œ ì„¤ì • ì—†ì´ CLI(ëª…ë ¹ì¤„) í•œ ì¤„ë¡œ ëª¨ë¸ì„ ë‹¤ìš´ë¡œë“œí•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. Hugging Face <code class=\"language-text\">transformers</code> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§ì ‘ ëª¨ë¸ì„ ë¡œë“œí•´ì˜¬ ìˆ˜ ìˆì§€ë§Œ Ollamaë¥¼ ì´ìš©í•˜ë©´ í¸ë¦¬í•˜ê²Œ ëª¨ë¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ë¬¼ë¡  AWS, GCPì—ì„œ EC2ë¥¼ ë¹Œë ¤ì™€ì„œ ê·¸ ì•ˆì—ì„œ Ollamaë¥¼ ì„¤ì¹˜í•´ì„œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n<p>Â </p>\n<h3 id=\"ollamaë¥¼-ì‚¬ìš©í•˜ëŠ”-ë°©ë²•\" style=\"position:relative;\"><a href=\"#ollama%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"ollamaë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²• permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ollamaë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•</h3>\n<p><strong>gguf íŒŒì¼(í—ˆê¹…í˜ì´ìŠ¤ì—ì„œ ggufë¥¼ ì œê³µí•˜ëŠ” LLM)ì„ models í´ë”ì— ë„£ì–´ì¤ë‹ˆë‹¤</strong>.<br></p>\n<p><strong>models í´ë”ì— Modelfile íŒŒì¼ì„ ì‘ì„±í•´ì£¼ëŠ”ë°</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">FROM (í—ˆê¹…í˜ì´ìŠ¤ì—ì„œ ê°€ì ¸ì˜¨ ëª¨ë¸ëª…).gguf\n\nTEMPLATE \"\"\"(ëª¨ë¸ì´ í•™ìŠµí•œ í…œí”Œë¦¿ ë‚´ìš©)\n\"\"\"\n\nSYSTEM \"\"\"(ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸)\"\"\"\n\nPARAMETER stop &lt;s>\nPARAMETER stop &lt;/s></code></pre></div>\n<p>ì´ëŸ° ì‹ìœ¼ë¡œ ì‘ì„±í•´ì¤ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ í—ˆê¹…í˜ì´ìŠ¤ì—ì„œ ê°€ì ¸ì˜¨ ëª¨ë¸ì„ ì½ê³  ëª¨ë¸ì´ í•™ìŠµí–ˆë˜ í…œí”Œë¦¿ê³¼ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ íŠ¹ì • ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ ì•Œì•„ì„œ ì½ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>(&#x3C;s>,Â &#x3C;/s>ê³¼ ê°™ì€ ê²ƒë“¤ì„ ìŠ¤í˜ì…œ í† í°ì´ë¼ í•˜ë©° ëª¨ë¸ì´ ì–´ë””ê¹Œì§€ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë“¤ì„ ìˆ˜ ìˆëŠ” í‚¤ì›Œë“œì…ë‹ˆë‹¤. <code class=\"language-text\">PARAMETER stop &lt;/s></code>ì„ ì‘ì„±í•˜ì§€ ì•Šìœ¼ë©´ í˜¼ì£ë§ì„ ê³„ì†í•˜ê±°ë‚˜ íš¡ì„¤ìˆ˜ì„¤í•˜ëŠ” í˜„ìƒì´ ì¼ì–´ë‚  ë•Œê°€ ìˆìŠµë‹ˆë‹¤.)</p>\n<p>Â </p>\n<h3 id=\"ollama-ê´€ë ¨-í„°ë¯¸ë„-ì‚¬ìš©ë²•-ê°€ìƒí™˜ê²½ê³¼-ë¬´ê´€\" style=\"position:relative;\"><a href=\"#ollama-%EA%B4%80%EB%A0%A8-%ED%84%B0%EB%AF%B8%EB%84%90-%EC%82%AC%EC%9A%A9%EB%B2%95-%EA%B0%80%EC%83%81%ED%99%98%EA%B2%BD%EA%B3%BC-%EB%AC%B4%EA%B4%80\" aria-label=\"ollama ê´€ë ¨ í„°ë¯¸ë„ ì‚¬ìš©ë²• ê°€ìƒí™˜ê²½ê³¼ ë¬´ê´€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ollama ê´€ë ¨ í„°ë¯¸ë„ ì‚¬ìš©ë²• (ê°€ìƒí™˜ê²½ê³¼ ë¬´ê´€)</h3>\n<ol>\n<li><code class=\"language-text\">ollama</code> : Ollamaê°€ ì‘ë™í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ</li>\n<li><code class=\"language-text\">ollama list</code>(ë˜ëŠ” <code class=\"language-text\">ollama ls</code>): ë‚´ ë¡œì»¬ Ollama ì‹œìŠ¤í…œ ì „ìš© í´ë”ì— ì €ì¥ëœ ëª¨ë¸ ëª©ë¡ì„ ë³´ì—¬ì¤Œ</li>\n<li><code class=\"language-text\">ollama ps</code>: í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸(ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°„) ëª¨ë¸ ëª©ë¡ì„ ë³´ì—¬ì¤Œ</li>\n<li><code class=\"language-text\">ollama rm [ëª¨ë¸ëª…]</code>: ëª¨ë¸ì„ ì‚­ì œí•˜ëŠ” ëª…ë ¹ì–´ì„</li>\n<li><code class=\"language-text\">ollama pull [ëª¨ë¸ëª…:ëª¨ë¸í¬ê¸°b]</code>: Ollama ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ìˆëŠ” ëª¨ë¸ì„ ë‚´ ë¡œì»¬ <code class=\"language-text\">ollama list</code>ì— ë“±ë¡</li>\n<li><code class=\"language-text\">ollama create [ë‚´ê°€ë¶€ë¥´ê³ ì‹¶ì€ëª¨ë¸ëª…] -f Modelfile</code><br>: ë‚´ ë¡œì»¬ì— ìˆëŠ” ëª¨ë¸ì„ ë‚´ ë¡œì»¬  <code class=\"language-text\">ollama list</code>ì— ë“±ë¡<br>(<code class=\"language-text\">Modelfile</code> íŒŒì¼ì— ìˆëŠ” ëª¨ë¸ì„ ì½ì–´ [ë‚´ê°€ë¶€ë¥´ê³  ì‹¶ì€ ëª¨ë¸ëª…]ìœ¼ë¡œ ë“±ë¡í•¨)</li>\n<li><code class=\"language-text\">ollama run [ëª¨ë¸ëª…:ëª¨ë¸í¬ê¸°b]</code>: ë‚´ ë¡œì»¬  <code class=\"language-text\">ollama list</code>ì— ìˆëŠ” ëª¨ë¸ì„ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¼</li>\n</ol>\n<p>Â </p>\n<h3 id=\"langchainì—ì„œ-ollama-ì‚¬ìš©ë²•\" style=\"position:relative;\"><a href=\"#langchain%EC%97%90%EC%84%9C-ollama-%EC%82%AC%EC%9A%A9%EB%B2%95\" aria-label=\"langchainì—ì„œ ollama ì‚¬ìš©ë²• permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>langchainì—ì„œ ollama ì‚¬ìš©ë²•</h3>\n<p><code class=\"language-text\">langchain_ollama</code>ì˜ <code class=\"language-text\">ChatOllama</code> ëª¨ë“ˆì„ ë¡œì»¬ Ollama ì‹œìŠ¤í…œ ì „ìš© í´ë”ì— ì €ì¥ëœ ëª¨ë¸ëª…ì„ ê°€ì ¸ì™€ ì´ìš©í•˜ë©´ ë©ë‹ˆë‹¤.</p>\n<p>ë¨¼ì €, í„°ë¯¸ë„ì—ì„œ <code class=\"language-text\">ollama ls</code>ë¡œ ëª¨ë¸ëª…ì„ íŒŒì•…í•œ í›„</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_ollama <span class=\"token keyword\">import</span> ChatOllama\n\nllm <span class=\"token operator\">=</span> ChatOllama<span class=\"token punctuation\">(</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"ëª¨ë¸ëª…\"</span><span class=\"token punctuation\">,</span> temperature<span class=\"token operator\">=</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">format</span><span class=\"token operator\">=</span><span class=\"token string\">'json'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ì´ë ‡ê²Œ <strong><code class=\"language-text\">model</code> íŒŒë¼ë¯¸í„°ì— í•´ë‹¹ ëª¨ë¸ëª…ì„ ë„£ì–´ ìƒì„±</strong>í•˜ë©´ í•´ë‹¹ ëª¨ë¸ì„ ì†ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (Chain ì—°ê²°ë„ ìŒ‰ê°€ëŠ¥.)</p>\n<p>Â </p>\n<p>ê·¸ë¦¬ê³ ,</p>\n<p><strong><code class=\"language-text\">temperature</code>(ë‹µë³€ì˜ ì°½ì˜ì„± ì •ë„)ì™€ <code class=\"language-text\">format</code>(ì¶œë ¥ í˜•ì‹), <code class=\"language-text\">num_predict</code>(ìµœëŒ€ ì¶œë ¥ í† í° ìˆ˜),  <code class=\"language-text\">top_k</code>(ë‹¨ì–´ ì„ íƒì˜ ë‹¤ì–‘ì„± ì •ë„),  <code class=\"language-text\">top_p</code>(ëˆ„ì  í™•ë¥ ì´ Pê°€ ë  ë•Œê¹Œì§€ì˜ ë‹¨ì–´ë“¤ë§Œ í›„ë³´êµ° ë„£ìŒ),  <code class=\"language-text\">repeat_penalty</code>(ë°˜ë³µ ë°©ì§€),  <code class=\"language-text\">seed</code>(ê²°ê³¼ ì¬í˜„ì„± í™•ë³´),  <code class=\"language-text\">stop</code>(ëª¨ë¸ì´ ìƒì„±ì„ ë©ˆì¶°ì•¼ í•˜ëŠ” ë¬¸ìì—´ ì§€ì •), <code class=\"language-text\">keep_alive</code>(ëª¨ë¸ ë©”ëª¨ë¦¬ ìœ ì§€ ì‹œê°„) ë“±ì„ ì„¤ì •</strong>í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<p>Â </p>\n<p>ë§Œì•½,</p>\n<p>GPUë¥¼ ì˜ í™œìš©í•˜ê³  ìˆëŠ”ì§€ ë³´ê³  ì‹¶ë‹¤ë©´<br>ì½”ë“œê°€ ìŠ¤íŠ¸ë¦¬ë° ì¤‘ì¼ ë•Œ í„°ë¯¸ë„ì—ì„œ <code class=\"language-text\">ollama ps</code>ë¥¼ ì…ë ¥í•´ì„œ â€˜100% GPUâ€™ì¸ì§€ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n<p>ì°¸ê³ ë¡œ, OllamaëŠ” ìë™ì ìœ¼ë¡œ í™˜ê²½ì„ ê°ì§€í•´ì„œ GPU ê°€ì†ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>\n<p>Â </p>\n<p>Â </p>\n<p>ì˜¤ëŠ˜ì€ ì—¬ê¸°ê¹Œì§€ ì‘ì„±í•˜ëŠ”ë°,<br>Ollama ì™¸ì—ë„ GPT4ALL ëª¨ë¸ì„ ì´ìš©í•˜ì—¬ LLM ëª¨ë¸ì„ ë¡œë“œí•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.(í”„ë¡œê·¸ë¨ê³¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë‘ ì¡´ì¬í•¨) ì·¨í–¥ê» ì¨ë³´ë©´ ë  ë“¯ í•©ë‹ˆë‹¤.</p>\n<p>ë„ì•.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#macmps-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C-huggingfacepipeline-%EC%82%AC%EC%9A%A9-%EC%8B%9C-%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%AD\">Mac(MPS) í™˜ê²½ì—ì„œ HuggingFacePipeline ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­</a></p>\n<ul>\n<li><a href=\"#from_model_id-vs-pipeline-%EC%A7%81%EC%A0%91-%EC%A3%BC%EC%9E%85\"><code class=\"language-text\">from_model_id</code> vs <code class=\"language-text\">pipeline</code> ì§ì ‘ ì£¼ì…</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#ollama\">Ollama</a></p>\n<ul>\n<li><a href=\"#ollama%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\">Ollamaë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•</a></li>\n<li><a href=\"#ollama-%EA%B4%80%EB%A0%A8-%ED%84%B0%EB%AF%B8%EB%84%90-%EC%82%AC%EC%9A%A9%EB%B2%95-%EA%B0%80%EC%83%81%ED%99%98%EA%B2%BD%EA%B3%BC-%EB%AC%B4%EA%B4%80\">Ollama ê´€ë ¨ í„°ë¯¸ë„ ì‚¬ìš©ë²• (ê°€ìƒí™˜ê²½ê³¼ ë¬´ê´€)</a></li>\n<li><a href=\"#langchain%EC%97%90%EC%84%9C-ollama-%EC%82%AC%EC%9A%A9%EB%B2%95\">langchainì—ì„œ ollama ì‚¬ìš©ë²•</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"ì°¸ê³  : í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ (https://fastcampus.co.kr/data_online_teddy) ì†ŒìŠ¤ì½”ë“œ: https://github.com/teddylee777/langchain-kr ìœ„í‚¤ë…ìŠ¤: https://wikidocs.net/book/14314 Â  ì˜¤ëŠ˜ì€ ë§¥ ì‚¬ìš©ì(ì €ìš”,,,)ì˜ í—ˆê¹…í˜ì´ìŠ¤ ëª¨ë¸ì„ ë¡œì»¬ë¡œ ê°€ì ¸ì™€mpsë¥¼ ì´ìš©í•´ GPU ê°€ì†í™”í•˜ëŠ” ë°©ë²•ì„ ë¨¼ì € ë³´ê³  ê°€ê² ìŠµë‹ˆë‹¤~ ë ˆì¸ ê¸°ë¦¬ì‡~! Â  Mac(MPS) í™˜ê²½ì—ì„œ HuggingFacePipeline ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­  vs  ì§ì ‘ ì£¼ì… LangChainì„ ì‚¬ìš©í•˜ì—¬ ë¡œì»¬ LLMì„ êµ¬ë™í•  ë•Œ, íŠ¹íˆ Apple Silicon(M1/M2/M3) í™˜ê²½ì—ì„œ GPU ê°€ì†(MPS)ì„ ì„¤ì •í•˜ëŠ” ê³¼ì •ì—ì„œ ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì´ëŠ” LangChainì´ ë‚´ë¶€ì ìœ¼ë¡œ Hugging Face ëª¨ë¸ì„ ë¡œë“œí•˜ëŠ” ë°©ì‹()ê³¼ ì‹¤ì œ  ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì´ ì¥ì¹˜(Device)ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì˜ ì°¨ì´ ë•Œë¬¸ì…ë‹ˆë‹¤. Â   ì†Œì† ë¼ì´ë¸ŒëŸ¬ë¦¬: â€¦","frontmatter":{"date":"December 25, 2025","title":"[LLM] í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ ë„ì ë„ì -8","categories":"LLM","author":"ë³€ìš°ì¤‘","emoji":"â˜€ï¸"},"fields":{"slug":"/25-12-25_1/"}},"next":{"id":"cc4dedd9-03dd-5854-bb4d-e9e42ae1ce11","html":"<p>ì°¸ê³  : í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ (<a href=\"https://fastcampus.co.kr/data_online_teddy\">https://fastcampus.co.kr/data_online_teddy</a>)</p>\n<p>ì†ŒìŠ¤ì½”ë“œ: <a href=\"https://github.com/teddylee777/langchain-kr\">https://github.com/teddylee777/langchain-kr</a></p>\n<p>ìœ„í‚¤ë…ìŠ¤: <a href=\"https://wikidocs.net/book/14314\">https://wikidocs.net/book/14314</a></p>\n<p>Â </p>\n<p>ì˜¤ëŠ˜ì€ ìºì‹œ ë°©ë²•ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ê³ ì í•©ë‹ˆë‹¤.</p>\n<p>ë ˆì¸ ê¸°ë¥~!</p>\n<p>Â </p>\n<p>Â </p>\n<h2 id=\"cache\" style=\"position:relative;\"><a href=\"#cache\" aria-label=\"cache permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cache</h2>\n<hr>\n<h3 id=\"1-inmemory-cache-ì¸ë©”ëª¨ë¦¬-ìºì‹œ\" style=\"position:relative;\"><a href=\"#1-inmemory-cache-%EC%9D%B8%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%BA%90%EC%8B%9C\" aria-label=\"1 inmemory cache ì¸ë©”ëª¨ë¦¬ ìºì‹œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. InMemory Cache (ì¸ë©”ëª¨ë¦¬ ìºì‹œ)</h3>\n<p>LLM í˜¸ì¶œì—ì„œ ì¸ë©”ëª¨ë¦¬ ìºì‹œë¥¼ ì‚¬ìš©í•œë‹¤ë©´,<br>ë™ì¼í•œ ì§ˆë¬¸ì´ ë“¤ì–´ì™”ì„ ë•Œ LLM(OpenAI ë“±) ì„œë²„ë¡œ ìš”ì²­ì„ ì „ë‹¬í•˜ì§€ ì•Šê³ , <strong>ë©”ëª¨ë¦¬ì— ë¯¸ë¦¬ ì €ì¥í•´ë‘” ë‹µë³€ì„ ì¦‰ì‹œ êº¼ë‚´ì–´ ì‘ë‹µí•©ë‹ˆë‹¤.</strong> (ë…¸íŠ¸ë¶ ì»¤ë„ ì¬ì‹œì‘í•˜ë©´ ìºì‹œê°€ ì‚­ì œë©ë‹ˆë‹¤.)</p>\n<p>ê·¸ë ‡ê¸°ì—, <strong>LLM í˜¸ì¶œ ë¹„ìš©ì€ ë“¤ì§€ ì•ŠìŠµë‹ˆë‹¤</strong>.</p>\n<p>í•˜ì§€ë§Œ, <strong>ì§ˆë¬¸ì´ ì•½ê°„ ë°”ë€Œë©´(ë„ì–´ì“°ê¸° í•˜ë‚˜ë¼ë„) ë‹¤ì‹œ í˜¸ì¶œí•˜ê²Œ ë©ë‹ˆë‹¤.</strong> ê·¸ ì´ìœ ëŠ” <code class=\"language-text\">InMemoryCache</code>ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ <strong>Dictionary(Hash Map) êµ¬ì¡°ë¥¼ ì‚¬ìš©</strong>í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain<span class=\"token punctuation\">.</span><span class=\"token builtin\">globals</span> <span class=\"token keyword\">import</span> set_llm_cache\n<span class=\"token keyword\">from</span> langchain<span class=\"token punctuation\">.</span>cache <span class=\"token keyword\">import</span> InMemoryCache\n\nset_llm_cache<span class=\"token punctuation\">(</span>InMemoryCache<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ì¸ë©”ëª¨ë¦¬ ìºì‹œ ì„¤ì •</span></code></pre></div>\n<p>ìœ„ ì½”ë“œë¥¼ ì‘ì„±í•œ í›„ì— LLM í˜¸ì¶œí•˜ê²Œ ë˜ë©´ ì§ˆë¬¸ê³¼ ë‹µë³€ì„ ë©”ëª¨ë¦¬ì— ì €ì¥í•´ë‘ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>Â </p>\n<h3 id=\"2-semantic-cache-code-classlanguage-textredissemanticcachecode-ë“±\" style=\"position:relative;\"><a href=\"#2-semantic-cache-code-classlanguage-textredissemanticcachecode-%EB%93%B1\" aria-label=\"2 semantic cache code classlanguage textredissemanticcachecode ë“± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Semantic Cache (<code class=\"language-text\">RedisSemanticCache</code> ë“±)</h3>\n<p><code class=\"language-text\">InMemoryCache</code>ëŠ” ì§ˆë¬¸ì´ ì•½ê°„ ë°”ë€” ë•Œ LLMì„ ë‹¤ì‹œ í˜¸ì¶œí•´ì•¼ í•˜ëŠ” ë‹¨ì ì´ ìˆì—ˆìŠµë‹ˆë‹¤.</p>\n<p>ë°˜ë©´ì—, <strong><code class=\"language-text\">Semantic Cache</code>ëŠ” ì§ˆë¬¸ì´ ë°”ë€Œì–´ë„ ìœ ì‚¬í•œ ì§ˆë¬¸ì„ ì°¾ì•„ ì €ì¥ëœ ìºì‹œë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” íŠ¹ì§•ì„ ê°€ì§‘ë‹ˆë‹¤.</strong></p>\n<p>ë‹¤ë§Œ, <strong>ìœ ì‚¬ë„ ê³„ì‚° ì‹œ ì„ë² ë”© ëª¨ë¸ì„ ì´ìš©í•´ì•¼ í•˜ë¯€ë¡œ ë¹„ìš©ì´ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<table>\n<thead>\n<tr>\n<th><strong>êµ¬ë¶„</strong></th>\n<th><strong>ì¼ë°˜ ì¸ë©”ëª¨ë¦¬ ìºì‹œ (InMemoryCache)</strong></th>\n<th><strong>ì‹œë§¨í‹± ìºì‹œ (RedisSemanticCache ë“±)</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>ë¹„êµ ë°©ì‹</strong></td>\n<td>ë¬¸ìì—´ ì™„ì „ ì¼ì¹˜ (Exact Match)</td>\n<td><strong>ë²¡í„° ìœ ì‚¬ë„ ë¹„êµ (Similarity Match)</strong></td>\n</tr>\n<tr>\n<td><strong>ìœ ì—°ì„±</strong></td>\n<td>ë„ì–´ì“°ê¸°, ì¡°ì‚¬ í•˜ë‚˜ë§Œ í‹€ë ¤ë„ ì‹¤íŒ¨</td>\n<td>â€œë‚ ì”¨ ì–´ë•Œ?â€ì™€ â€œë‚ ì”¨ ì•Œë ¤ì¤˜â€ë¥¼ ê°™ê²Œ ì¸ì‹ ê°€ëŠ¥</td>\n</tr>\n<tr>\n<td><strong>ë¹„ìš©</strong></td>\n<td>ì—†ìŒ</td>\n<td>ìœ ì‚¬ë„ ê³„ì‚°ì„ ìœ„í•œ ì„ë² ë”© ëª¨ë¸ í˜¸ì¶œ ë¹„ìš© ë°œìƒ</td>\n</tr>\n</tbody>\n</table>\n<p>ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ì‘ì„± í›„, LLM í˜¸ì¶œí•˜ê²Œ ë˜ë©´ ìºì‹œë¥¼ ì €ì¥í•˜ê³  ì´í›„ì—ëŠ” ì €ì¥ëœ ìºì‹œë¥¼ í†µí•´ ë‹µë³€ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain<span class=\"token punctuation\">.</span><span class=\"token builtin\">globals</span> <span class=\"token keyword\">import</span> set_llm_cache\n<span class=\"token keyword\">from</span> langchain_community<span class=\"token punctuation\">.</span>cache <span class=\"token keyword\">import</span> RedisSemanticCache\n<span class=\"token keyword\">from</span> langchain_openai <span class=\"token keyword\">import</span> OpenAIEmbeddings\n\n<span class=\"token comment\"># 1. ì‹œë§¨í‹± ìºì‹œëŠ” 'ìœ ì‚¬ë„'ë¥¼ ì¸¡ì •í•´ì•¼ í•˜ë¯€ë¡œ ì„ë² ë”© ëª¨ë¸ì´ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.</span>\nembeddings <span class=\"token operator\">=</span> OpenAIEmbeddings<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 2. ì‹œë§¨í‹± ìºì‹œ ì„¤ì • (Redis ì‚¬ìš© ì˜ˆì‹œ)</span>\nset_llm_cache<span class=\"token punctuation\">(</span>RedisSemanticCache<span class=\"token punctuation\">(</span>\n    redis_url<span class=\"token operator\">=</span><span class=\"token string\">\"redis://localhost:6379\"</span><span class=\"token punctuation\">,</span>\n    embedding<span class=\"token operator\">=</span>embeddings<span class=\"token punctuation\">,</span>\n    score_threshold<span class=\"token operator\">=</span><span class=\"token number\">0.1</span>  <span class=\"token comment\"># ì´ ì ìˆ˜ê°€ ë‚®ì„ìˆ˜ë¡ ë” 'ë¹„ìŠ·í•´ì•¼' ìºì‹œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ì—¬ê¸°ì„œëŠ” <strong>Localhostì— ì„¤ì¹˜ëœ Redis ë°ì´í„°ë² ì´ìŠ¤</strong>ì˜ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>Â </p>\n<h3 id=\"3-sqlite-cache\" style=\"position:relative;\"><a href=\"#3-sqlite-cache\" aria-label=\"3 sqlite cache permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. SQLite Cache</h3>\n<p>SQLite CacheëŠ”  ë³„ë„ì˜ ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ ì„¤ì¹˜ ì—†ì´, <strong>ë‚´ ì»´í“¨í„°ì˜ í•˜ë“œë””ìŠ¤í¬ì— íŒŒì¼(<code class=\"language-text\">.db</code>) í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì €ì¥</strong>í•˜ëŠ” ë¹„íœ˜ë°œì„± ìºì‹± ë°©ì‹ì…ë‹ˆë‹¤. (ë‹¹ì—°íˆ ë¹„íœ˜ë°œì„±ì…ë‹ˆë‹¤.)</p>\n<p>LangChainì—ì„œ <code class=\"language-text\">InMemoryCache</code>ì˜ íœ˜ë°œì„± ë¬¸ì œë¥¼ í•´ê²°í•˜ë©´ì„œë„, <code class=\"language-text\">Redis</code>ì²˜ëŸ¼ ë³µì¡í•œ ì„œë²„ ì„¤ì •ì´ ë¶€ë‹´ìŠ¤ëŸ¬ìš¸ ë•Œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” <strong>ê°€ì¥ ê°„í¸í•œ ì˜êµ¬ ì €ì¥ìš© ìºì‹œ</strong>ì…ë‹ˆë‹¤.</p>\n<p><code class=\"language-text\">InMemoryCache</code>ì™€ ë™ì¼í•˜ê²Œ ì§ˆë¬¸ì´ <strong>ì™„ì „íˆ ë™ì¼</strong>í•´ì•¼ ìºì‹œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_community<span class=\"token punctuation\">.</span>cache <span class=\"token keyword\">import</span> SQLiteCache\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span><span class=\"token builtin\">globals</span> <span class=\"token keyword\">import</span> set_llm_cache\n<span class=\"token keyword\">import</span> os\n\n<span class=\"token comment\"># ìºì‹œ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</span>\n<span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>exists<span class=\"token punctuation\">(</span><span class=\"token string\">\"cache\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    os<span class=\"token punctuation\">.</span>makedirs<span class=\"token punctuation\">(</span><span class=\"token string\">\"cache\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># SQLiteCacheë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</span>\nset_llm_cache<span class=\"token punctuation\">(</span>SQLiteCache<span class=\"token punctuation\">(</span>database_path<span class=\"token operator\">=</span><span class=\"token string\">\"cache/llm_cache.db\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ìœ„ì˜ ì½”ë“œë¥¼ ì‘ì„± í›„,  LLM í˜¸ì¶œí•˜ê²Œ ë˜ë©´ ë¡œì»¬ì— db í˜•íƒœë¡œ ìºì‹œë¥¼ ì €ì¥í•˜ê³ , ì´í›„ ì €ì¥ëœ ìºì‹œë¥¼ í†µí•´ ë‹µë³€ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>Â </p>\n<p>Â </p>\n<p>ì—¬ê¸°ì„œ ë„ì•.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#cache\">Cache</a></p>\n<ul>\n<li><a href=\"#1-inmemory-cache-%EC%9D%B8%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%BA%90%EC%8B%9C\">1. InMemory Cache (ì¸ë©”ëª¨ë¦¬ ìºì‹œ)</a></li>\n<li><a href=\"#2-semantic-cache-redissemanticcache-%EB%93%B1\">2. Semantic Cache (<code class=\"language-text\">RedisSemanticCache</code> ë“±)</a></li>\n<li><a href=\"#3-sqlite-cache\">3. SQLite Cache</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"December 24, 2025","title":"[LLM] í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ ë„ì ë„ì -7","categories":"LLM","author":"ë³€ìš°ì¤‘","emoji":"â˜€ï¸"},"fields":{"slug":"/25-12-24_1/"}},"prev":{"id":"e502e6d7-98be-5c28-a38e-553cae829030","html":"<p>ì°¸ê³  : í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ (<a href=\"https://fastcampus.co.kr/data_online_teddy\">https://fastcampus.co.kr/data_online_teddy</a>)</p>\n<p>ì†ŒìŠ¤ì½”ë“œ: <a href=\"https://github.com/teddylee777/langchain-kr\">https://github.com/teddylee777/langchain-kr</a></p>\n<p>ìœ„í‚¤ë…ìŠ¤: <a href=\"https://wikidocs.net/book/14314\">https://wikidocs.net/book/14314</a></p>\n<p>Â </p>\n<p>ì˜¤ëŠ˜ì€ ëŒ€í™” ë©”ëª¨ë¦¬ë¥¼ ì €ì¥í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ë„ì ë„ì  í•˜ê³ ì í•˜ëŠ”ë°<br>ëª‡ ê°€ì§€ë§Œ ë‹¤ë£¨ê³ ì í•©ë‹ˆë‹¤.</p>\n<p>Â </p>\n<p>ê·¸ ì „ì—,</p>\n<p>chainì—ì„œ retrieverì— ì»¤ìŠ¤í…€ í•¨ìˆ˜ ì—°ê²°ë„ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì ì–´ë‘ê³  ê°€ê² ìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<h3 id=\"ê¹¨ì•Œ-tip\" style=\"position:relative;\"><a href=\"#%EA%B9%A8%EC%95%8C-tip\" aria-label=\"ê¹¨ì•Œ tip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’¡ê¹¨ì•Œ Tip</h3>\n<p><strong>chainì—ì„œ retrieverì— ì»¤ìŠ¤í…€ í•¨ìˆ˜ ì—°ê²°</strong>ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n<p>ì´ë•Œ í•¨ìˆ˜ì— ì „ë‹¬í•˜ëŠ” ì¸ìëŠ” 1ê°œì—¬ì•¼ í•˜ëŠ”ë°,<br>ì¸ìê°€ ì—¬ëŸ¬ ê°œì¼ ë•ŒëŠ” wrapper í•¨ìˆ˜ë¥¼ í†µí•´ ì „ë‹¬ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">format_doc</span><span class=\"token punctuation\">(</span>document_list<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    \nchain <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token comment\"># context: retriever -> format_doc</span>\n    <span class=\"token comment\"># question: RunnablePassthrough() (user_input)</span>\n    <span class=\"token punctuation\">{</span><span class=\"token string\">\"context\"</span><span class=\"token punctuation\">:</span> retriever <span class=\"token operator\">|</span> format_doc<span class=\"token punctuation\">,</span> <span class=\"token string\">\"question\"</span><span class=\"token punctuation\">:</span> RunnablePassthrough<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">|</span> prompt\n    <span class=\"token operator\">|</span> llm\n    <span class=\"token operator\">|</span> StrOutputParser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ì´ëŸ° ì‹ìœ¼ë¡œ <code class=\"language-text\">retriever</code> ê²°ê³¼ë¥¼ ì»¤ìŠ¤í…€ í•¨ìˆ˜ <code class=\"language-text\">format_doc</code>ì— ì—°ê²°í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì´ë•Œ ì „ë‹¬í•˜ëŠ” ì¸ìëŠ”  <code class=\"language-text\">document_list</code> 1ê°œë§Œ ìˆê¸° ë•Œë¬¸ì— ì—°ê²°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n</blockquote>\n<p>Â </p>\n<p>ê·¸ëŸ¼, ë³¸ê²©ì ìœ¼ë¡œ ë ˆì¸ ê¸°ë¦¿~!</p>\n<p>Â </p>\n<p>Â </p>\n<h2 id=\"conversationkgmemory-ì§€ì‹-ê·¸ë˜í”„-í˜•íƒœ-ê¸°ì–µ\" style=\"position:relative;\"><a href=\"#conversationkgmemory-%EC%A7%80%EC%8B%9D-%EA%B7%B8%EB%9E%98%ED%94%84-%ED%98%95%ED%83%9C-%EA%B8%B0%EC%96%B5\" aria-label=\"conversationkgmemory ì§€ì‹ ê·¸ë˜í”„ í˜•íƒœ ê¸°ì–µ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ConversationKGMemory: ì§€ì‹ ê·¸ë˜í”„ í˜•íƒœ ê¸°ì–µ</h2>\n<hr>\n<p>ìš°ì„  LLMì—ì„œ â€˜ìµœì‹  kê°œì˜ ëŒ€í™”ë¥¼ ê¸°ì–µ, ìµœëŒ€ í† í° ìˆ˜ì— ë”°ë¥¸ ìµœì‹  ëŒ€í™”ë¥¼ ê¸°ì–µ, íŠ¹ì • ì—”í‹°í‹°ë¥¼ ì¶”ì¶œí•˜ì—¬ ëŒ€í™”ë¥¼ ê¸°ì–µ, ì§€ì‹ ê·¸ë˜í”„ í˜•íƒœë¡œ ëŒ€í™”ë¥¼ ê¸°ì–µ, ìš”ì•½í•´ì„œ ëŒ€í™”ë¥¼ ê¸°ì–µ ë“± ëŒ€í™”ë¥¼ ê¸°ì–µí•˜ëŠ” ë°©ë²•â€™ì´ ë§¤ìš° ë‹¤ì–‘í•˜ê²Œ ì¡´ì¬í•©ë‹ˆë‹¤.</p>\n<p>ê·¸ ì¤‘ì— <strong>ì§€ì‹ ê·¸ë˜í”„ í˜•íƒœë¡œ ëŒ€í™”ë¥¼ ê¸°ì–µí•˜ëŠ” ë°©ë²•</strong>ì„ ë³´ê³ ì í•©ë‹ˆë‹¤.</p>\n<p>í˜„ì¬ langchain 1.x ë²„ì „ì´ë©°,<br>ê³§ ì‚¬ë¼ì§ˆ ìˆ˜ ìˆëŠ” ë°©ë²•ì¼ ìˆ˜ ìˆìœ¼ë‹ˆ ì•Œì•„ ë‘ì‹­ì‡¼.</p>\n<p>Â </p>\n<p>âœ… <strong>ë¨¼ì € ì•Œì•„ë‘ì–´ì•¼ í•  ê²ƒ</strong></p>\n<ul>\n<li><strong><code class=\"language-text\">ConversationChain</code> ê°ì²´ëŠ” ëŒ€í™” ì²´ì¸ ê°ì²´ì´ê³ ,</strong></li>\n<li><strong><code class=\"language-text\">ConversationKGMemory</code> ê°ì²´ëŠ” ë©”ëª¨ë¦¬ ë°©ì‹ ê°ì²´ì„</strong></li>\n</ul>\n<p>Â </p>\n<h3 id=\"conversationchain-ê°ì²´-ìƒì„±\" style=\"position:relative;\"><a href=\"#conversationchain-%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1\" aria-label=\"conversationchain ê°ì²´ ìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ConversationChain ê°ì²´ ìƒì„±</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_openai <span class=\"token keyword\">import</span> ChatOpenAI\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>prompts <span class=\"token keyword\">import</span> PromptTemplate\n<span class=\"token keyword\">from</span> langchain_classic<span class=\"token punctuation\">.</span>chains <span class=\"token keyword\">import</span> ConversationChain\n<span class=\"token keyword\">from</span> langchain_classic<span class=\"token punctuation\">.</span>memory <span class=\"token keyword\">import</span> ConversationKGMemory\n\nllm <span class=\"token operator\">=</span> ChatOpenAI<span class=\"token punctuation\">(</span>temperature<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\ntemplate <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">\"\"\"The following is a friendly conversation between a human and an AI. \nThe AI is talkative and provides lots of specific details from its context. \nIf the AI does not know the answer to a question, it truthfully says it does not know. \nThe AI ONLY uses information contained in the \"Relevant Information\" section and does not hallucinate.\n\nRelevant Information:\n\n{history}\n\nConversation:\nHuman: {input}\nAI:\"\"\"</span>\nprompt <span class=\"token operator\">=</span> PromptTemplate<span class=\"token punctuation\">(</span>\n    input_variables<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"history\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"input\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> template<span class=\"token operator\">=</span>template<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ConversationChain ê°ì²´ ìƒì„±</span>\n<span class=\"token comment\"># ë©”ëª¨ë¦¬ì— ConversationKGMemory(ChatOpenAIë¥¼ ì´ìš©í•˜ì—¬ ìƒì„±)ë¡œ ì„¤ì •</span>\n<span class=\"token comment\"># ConversationChain ê°ì²´ì˜ llmìœ¼ë¡œ ChatOpenAI ì„¤ì •</span>\nconversation_with_kg <span class=\"token operator\">=</span> ConversationChain<span class=\"token punctuation\">(</span>\n    llm<span class=\"token operator\">=</span>llm<span class=\"token punctuation\">,</span> prompt<span class=\"token operator\">=</span>prompt<span class=\"token punctuation\">,</span> memory<span class=\"token operator\">=</span>ConversationKGMemory<span class=\"token punctuation\">(</span>llm<span class=\"token operator\">=</span>llm<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>\n<p>ìš°ì„ , <code class=\"language-text\">ConversationChain</code>ê³¼ <code class=\"language-text\">ConversationKGMemory</code> í´ë˜ìŠ¤ëŠ” <code class=\"language-text\">langchain_classic</code>ì— ì¡´ì¬í•©ë‹ˆë‹¤. í˜„ì¬ langchain ë²„ì „ìœ¼ë¡œëŠ” <code class=\"language-text\">langchain_classic</code>ì—ì„œ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p><code class=\"language-text\">ConversationChain</code> ê°ì²´ ìƒì„± ì‹œ, LLMê³¼ Promptë¥¼ ì„¤ì •í•˜ë©°, memory ë°©ì‹ì„ <code class=\"language-text\">ConversationKGMemory</code>ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.<br>(ì´ë•Œ ì§€ì‹ ê·¸ë˜í”„ ìƒì„±í•˜ëŠ” <code class=\"language-text\">ConversationKGMemory</code> ê°ì²´ë„ LLMì„ ì„¤ì •í•´ì¤ë‹ˆë‹¤.)</p>\n</li>\n<li>\n<p>â­ï¸ <strong>ì¦‰, <code class=\"language-text\">ConversationChain</code> ê°ì²´ì—ì„œ ë©”ëª¨ë¦¬ ë°©ì‹ì„ ì„¤ì •í•´ì£¼ëŠ” ê²ƒì…ë‹ˆë‹¤.</strong> â­ï¸<br>ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ë°©ì‹ë„ ìœ ì‚¬í•œ ë°©ë²•ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.</p>\n</li>\n</ul>\n<p>Â </p>\n<h3 id=\"ëŒ€í™”í•˜ê¸°\" style=\"position:relative;\"><a href=\"#%EB%8C%80%ED%99%94%ED%95%98%EA%B8%B0\" aria-label=\"ëŒ€í™”í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ëŒ€í™”í•˜ê¸°</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ì²«ë²ˆì§¸ ëŒ€í™” ì‹œì‘  -> ë©”ëª¨ë¦¬ì— ì§€ì‹ ê·¸ë˜í”„ ìƒì„±ë¨</span>\nconversation_with_kg<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>\n    <span class=\"token builtin\">input</span><span class=\"token operator\">=</span><span class=\"token string\">\"My name is Teddy. Shirley is a coworker of mine, and she's a new designer at our company.\"</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\n\"Hello Teddy! It's nice to meet you. Shirley must be excited to be starting a new job as a designer at your company. I hope she's settling in well and getting to know everyone. If you need any tips on how to make her feel welcome or help her adjust to the new role, feel free to ask me!\"\n\"\"\"</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">predict()</code> : ëŒ€í™”ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.\n<ul>\n<li><code class=\"language-text\">input</code>ì— ë”°ë¥¸ ì¶œë ¥ì´ ìƒì„±ë©ë‹ˆë‹¤.</li>\n<li>ì´ë•Œ, <code class=\"language-text\">input</code>ê³¼ ìƒì„±í•œ  <code class=\"language-text\">ì¶œë ¥(output)</code> ëŒ€í™” ìŒì„ ì €ì¥í•˜ê³ , ì§€ì‹ ê·¸ë˜í”„ë¥¼ ìƒì„±í•˜ê²Œ ë©ë‹ˆë‹¤.</li>\n</ul>\n</li>\n</ul>\n<p>Â </p>\n<h3 id=\"ì´ì „-ëŒ€í™”-ë‚´ìš©-ë³´ê¸°\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EC%A0%84-%EB%8C%80%ED%99%94-%EB%82%B4%EC%9A%A9-%EB%B3%B4%EA%B8%B0\" aria-label=\"ì´ì „ ëŒ€í™” ë‚´ìš© ë³´ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì´ì „ ëŒ€í™” ë‚´ìš© ë³´ê¸°</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ì´ì „ ëŒ€í™” ë‚´ìš© ë³´ê¸°</span>\nconversation_with_kg<span class=\"token punctuation\">.</span>memory<span class=\"token punctuation\">.</span>chat_memory<span class=\"token punctuation\">.</span>messages\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\n[HumanMessage(content=\"My name is Teddy. Shirley is a coworker of mine, and she's a new designer at our company.\", additional_kwargs={}, response_metadata={}),\n AIMessage(content=\"Hello Teddy! It's nice to meet you. Shirley must be excited to be starting a new job as a designer at your company. I hope she's settling in well and getting to know everyone. If you need any tips on how to make her feel welcome or help her adjust to the new role, feel free to ask me!\", additional_kwargs={}, response_metadata={})]\n\"\"\"</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">conversation_with_kg.memory.chat_memory.messages</code><br>: ì´ì „ ëŒ€í™”ë¥¼ ë‹´ì•„ë‘ê³  ìˆìŠµë‹ˆë‹¤.\n<ul>\n<li><code class=\"language-text\">HumanMessage</code>, <code class=\"language-text\">AIMessage</code> ê³¼ ê°™ì´ ë©”ì‹œì§€ ê°ì²´ë¡œ ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n</li>\n</ul>\n<p>Â </p>\n<h3 id=\"ì§€ì‹-ê·¸ë˜í”„ì˜-ì •ë³´-í™•ì¸í•˜ê¸°\" style=\"position:relative;\"><a href=\"#%EC%A7%80%EC%8B%9D-%EA%B7%B8%EB%9E%98%ED%94%84%EC%9D%98-%EC%A0%95%EB%B3%B4-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\" aria-label=\"ì§€ì‹ ê·¸ë˜í”„ì˜ ì •ë³´ í™•ì¸í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì§€ì‹ ê·¸ë˜í”„ì˜ ì •ë³´ í™•ì¸í•˜ê¸°</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ì§€ì‹ ê·¸ë˜í”„ ì•ˆì— ì–´ë–¤ ì •ë³´ê°€ ì €ì¥ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>conversation_with_kg<span class=\"token punctuation\">.</span>memory<span class=\"token punctuation\">.</span>kg<span class=\"token punctuation\">.</span>get_triples<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\n[('Teddy', 'name', 'is'), ('Shirley', 'coworker', 'is a'), ('Shirley', 'new designer', 'is a'), ('Shirley', 'company', 'is at')]\n\"\"\"</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">conversation_with_kg.memory.kg.get_triples()</code><br>:<code class=\"language-text\">Triple</code>ì„ ì¶œë ¥í•˜ì—¬ ì§€ì‹ ê·¸ë˜í”„ ì•ˆì— ì–´ë–¤ ì •ë³´ê°€ ì €ì¥ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n<li><code class=\"language-text\">Triple</code> ìš”ì†Œ: ë…¸ë“œ(ì •ë³´ ëŒ€ìƒ), ì—£ì§€(ê´€ê³„), ë°©í–¥ ì¡´ì¬</li>\n<li><code class=\"language-text\">Triple</code> êµ¬ì¡°: <strong>ì£¼ì–´(ê´€ê³„ ì‹œì‘ì )-ë™ì‚¬(ê´€ê³„, í™”ì‚´í‘œ)-ëª©ì ì–´(ê´€ê³„ ë„ì°©ì ) í˜•íƒœ</strong></li>\n</ul>\n<p>Â </p>\n<p>ì•„ë˜ì™€ ê°™ì´ <strong>ê·¸ë˜í”„ ê°ì²´ë¥¼ ì ‘ê·¼í•˜ì—¬ ëª¨ë“  ë…¸ë“œ, ì—£ì§€ë¥¼ í™•ì¸í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</strong><br>(<code class=\"language-text\">memory.kg._graph()</code>ì˜ <code class=\"language-text\">nodes()</code>, <code class=\"language-text\">edges(data=True)</code> ì´ìš©)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ë‚´ë¶€ì˜ ì‹¤ì œ networkx ê·¸ë˜í”„ ê°ì²´ ì ‘ê·¼</span>\ninfo_graph <span class=\"token operator\">=</span> conversation_with_kg<span class=\"token punctuation\">.</span>memory<span class=\"token punctuation\">.</span>kg<span class=\"token punctuation\">.</span>_graph \n\n<span class=\"token comment\"># ëª¨ë“  ë…¸ë“œ(ê°œì²´) ë³´ê¸°</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Nodes:\"</span><span class=\"token punctuation\">,</span> info_graph<span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ëª¨ë“  ì—£ì§€(ê´€ê³„) ë³´ê¸°</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Edges:\"</span><span class=\"token punctuation\">,</span> info_graph<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">(</span>data<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\nNodes: ['Teddy', 'name', 'Shirley', 'coworker', 'new designer', 'company']\nEdges: [('Teddy', 'name', {'relation': 'is'}), ('Shirley', 'coworker', {'relation': 'is a'}), ('Shirley', 'new designer', {'relation': 'is a'}), ('Shirley', 'company', {'relation': 'is at'})]\n\"\"\"</span></code></pre></div>\n<p>Â </p>\n<p>ì•„ë˜ì™€ ê°™ì´ ê·¸ë˜í”„ë¥¼ ì§ì ‘ ë‚˜íƒ€ë‚´ì–´ë³´ë©´</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> networkx <span class=\"token keyword\">as</span> nx\n<span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt\n\n<span class=\"token comment\"># ë‚´ë¶€ ê·¸ë˜í”„ ê°ì²´ ê°€ì ¸ì˜¤ê¸°</span>\ngraph <span class=\"token operator\">=</span> conversation_with_kg<span class=\"token punctuation\">.</span>memory<span class=\"token punctuation\">.</span>kg<span class=\"token punctuation\">.</span>_graph\n\n<span class=\"token comment\"># ê·¸ë˜í”„ ê·¸ë¦¬ê¸° ì„¤ì •</span>\nplt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\npos <span class=\"token operator\">=</span> nx<span class=\"token punctuation\">.</span>spring_layout<span class=\"token punctuation\">(</span>graph<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ë…¸ë“œ ìœ„ì¹˜ ê²°ì • ì•Œê³ ë¦¬ì¦˜</span>\n\n<span class=\"token comment\"># ë…¸ë“œì™€ ì—£ì§€ ê·¸ë¦¬ê¸°</span>\nnx<span class=\"token punctuation\">.</span>draw<span class=\"token punctuation\">(</span>graph<span class=\"token punctuation\">,</span> pos<span class=\"token punctuation\">,</span> with_labels<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> node_color<span class=\"token operator\">=</span><span class=\"token string\">'lightblue'</span><span class=\"token punctuation\">,</span> \n        node_size<span class=\"token operator\">=</span><span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> font_size<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> font_weight<span class=\"token operator\">=</span><span class=\"token string\">'bold'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ì—£ì§€ ë¼ë²¨(ê´€ê³„ ëª…ì¹­) ê·¸ë¦¬ê¸°</span>\nedge_labels <span class=\"token operator\">=</span> nx<span class=\"token punctuation\">.</span>get_edge_attributes<span class=\"token punctuation\">(</span>graph<span class=\"token punctuation\">,</span> <span class=\"token string\">'relation'</span><span class=\"token punctuation\">)</span>\nnx<span class=\"token punctuation\">.</span>draw_networkx_edge_labels<span class=\"token punctuation\">(</span>graph<span class=\"token punctuation\">,</span> pos<span class=\"token punctuation\">,</span> edge_labels<span class=\"token operator\">=</span>edge_labels<span class=\"token punctuation\">)</span>\n\nplt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 75.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA9hAAAPYQGoP6dpAAABOUlEQVQ4y41U30vDMBDO//+P+OSDsCdhAwUVFfHXXJlYrHQPK7I51zZNG5tPEpu2i9dsgRB6d/n63d13YdizlFI754qXWOWitVm7Xcx19AP6Nms9vnnG6GHuAVQKdbP7QdQPeJ5jvc2QV9LPsM+o2x1YXdfIsgxSyn/s3WUAr8MFnuKErJ0GS9O0BXPZkwzHs3eczUKUBQfnhQFpbhhm9tsHRKasL3LOUZUCkyDC+evHH8CBYAZQNQ1xg27DGNNFcjAzUjY2WNerlhWpQ18d9cmoSzptDWo7PcSM0iyj2OlGDLFzWWlNGl02Nma7aQNKIUiJDAGe3M8xDqK2qazv/MoLfG625MQMAW6ExOk0xMVb3KVsx+ro8hGjuxeoH+mdhlZmjT9I1riKlrs1tC/Jd1HulcjQrOvS/QLP+p3ru+kpDgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"kg ex\" title=\"kg ex\" src=\"/static/9abbf3b1e554e66171bd7afe2d28b53d/37523/kg_ex.png\" srcset=\"/static/9abbf3b1e554e66171bd7afe2d28b53d/e9ff0/kg_ex.png 180w,\n/static/9abbf3b1e554e66171bd7afe2d28b53d/f21e7/kg_ex.png 360w,\n/static/9abbf3b1e554e66171bd7afe2d28b53d/37523/kg_ex.png 720w,\n/static/9abbf3b1e554e66171bd7afe2d28b53d/97655/kg_ex.png 819w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>ìš”ë ‡ê²Œ ë‚˜ì˜µë‹ˆë‹¤.</p>\n<p>ì´ëŸ° ì‹ìœ¼ë¡œ ì‹œê°í™”í•¨ìœ¼ë¡œì¨ ì´ì „ ëŒ€í™”ì—ì„œ ì–´ë–»ê²Œ ì§€ì‹ ê·¸ë˜í”„ë¥¼ ìƒì„±í•´ë†“ê³  ìˆëŠ”ì§€ í™•ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n<p>Â </p>\n<h3 id=\"conversationkgmemory-ëŒ€í™”-ì €ì¥\" style=\"position:relative;\"><a href=\"#conversationkgmemory-%EB%8C%80%ED%99%94-%EC%A0%80%EC%9E%A5\" aria-label=\"conversationkgmemory ëŒ€í™” ì €ì¥ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ConversationKGMemory ëŒ€í™” ì €ì¥</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">ConversationKGMemory<span class=\"token punctuation\">.</span>save_context<span class=\"token punctuation\">(</span>\n    inputs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"human\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"íŒ¨í‚¤ì§€ ì˜ˆì•½ ì‹œ ì˜ˆì•½ê¸ˆì€ ì–¼ë§ˆì¸ê°€ìš”? ì·¨ì†Œ ì •ì±…ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    outputs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"ai\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"íŒ¨í‚¤ì§€ ì˜ˆì•½ ì‹œ 500ìœ ë¡œì˜ ì˜ˆì•½ê¸ˆì´ í•„ìš”í•©ë‹ˆë‹¤. ì·¨ì†Œ ì •ì±…ì€ ì˜ˆì•½ì¼ë¡œë¶€í„° 30ì¼ ì „ê¹Œì§€ëŠ” ì „ì•¡ í™˜ë¶ˆì´ ê°€ëŠ¥í•˜ë©°, ì´í›„ ì·¨ì†Œ ì‹œì—ëŠ” ì˜ˆì•½ê¸ˆì´ í™˜ë¶ˆë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì—¬í–‰ ì‹œì‘ì¼ë¡œë¶€í„° 14ì¼ ì „ ì·¨ì†Œ ì‹œ 50%ì˜ ë¹„ìš©ì´ ì²­êµ¬ë˜ë©°, ê·¸ ì´í›„ëŠ” ì „ì•¡ ë¹„ìš©ì´ ì²­êµ¬ë©ë‹ˆë‹¤.\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">ConversationKGMemory.save_context()</code><br>: <code class=\"language-text\">inputs</code>, <code class=\"language-text\">outputs</code> íŒŒë¼ë¯¸í„°ì— ëŒ€í™”ìŒì„ ì „ë‹¬í•˜ì—¬ ëŒ€í™”ë¥¼ ì €ì¥í•©ë‹ˆë‹¤</li>\n</ul>\n<p>Â </p>\n<p>Â </p>\n<h2 id=\"conversationsummarybuffermemory-ìµœê·¼-ëŒ€í™”--ì´ì „-ëŒ€í™”-ìš”ì•½\" style=\"position:relative;\"><a href=\"#conversationsummarybuffermemory-%EC%B5%9C%EA%B7%BC-%EB%8C%80%ED%99%94--%EC%9D%B4%EC%A0%84-%EB%8C%80%ED%99%94-%EC%9A%94%EC%95%BD\" aria-label=\"conversationsummarybuffermemory ìµœê·¼ ëŒ€í™”  ì´ì „ ëŒ€í™” ìš”ì•½ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ConversationSummaryBufferMemory: ìµœê·¼ ëŒ€í™” + ì´ì „ ëŒ€í™” ìš”ì•½</h2>\n<hr>\n<p><strong><code class=\"language-text\">ConversationSummaryBufferMemory</code>ëŠ” ìµœê·¼ ëŒ€í™”ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë©´ì„œ ì´ì „ ëŒ€í™”ëŠ” ìš”ì•½í•˜ì—¬ ë©”ëª¨ë¦¬ì— ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<p>ì–´ë–»ê²Œ ë³´ë©´ ê°€ì¥ ìœ ìš©í•œ ë°©ì‹ì´ì§€ ì•Šì„ê¹Œ ìƒê°í•©ë‹ˆë‹¤.</p>\n<p><code class=\"language-text\">ConversationSummaryMemory</code>ëŠ” ì´ì „ ëŒ€í™”ë¥¼ ëª¨ë‘ ìš”ì•½í•˜ì§€ë§Œ,<br><code class=\"language-text\">ConversationSummaryBufferMemory</code>ëŠ” <code class=\"language-text\">max_token_limit</code>ì„ ì„¤ì •í•¨ìœ¼ë¡œì¨ ìµœì‹  ëŒ€í™”ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_openai <span class=\"token keyword\">import</span> ChatOpenAI\n<span class=\"token keyword\">from</span> langchain_classic<span class=\"token punctuation\">.</span>memory <span class=\"token keyword\">import</span> ConversationSummaryBufferMemory\n\nllm <span class=\"token operator\">=</span> ChatOpenAI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nmemory <span class=\"token operator\">=</span> ConversationSummaryBufferMemory<span class=\"token punctuation\">(</span>\n    llm<span class=\"token operator\">=</span>llm<span class=\"token punctuation\">,</span>\n    max_token_limit<span class=\"token operator\">=</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\"># 200 í† í°ê¹Œì§€ëŠ” ìµœê·¼ ëŒ€í™” ìœ ì§€í•˜ê³ , ë‚˜ë¨¸ì§€ëŠ” ìš”ì•½</span>\n    return_messages<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ì´ë ‡ê²Œ ìµœëŒ€ n í† í°ê¹Œì§€ ìµœì‹  ëŒ€í™”ë“¤ì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë©°<br>ê·¸ ë„˜ì–´ê°€ëŠ” ì´ì „ ëŒ€í™”ëŠ” ëª¨ë‘ ìš”ì•½í•œ ìƒíƒœë¡œ ë©”ëª¨ë¦¬ë¥¼ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">memory<span class=\"token punctuation\">.</span>save_context<span class=\"token punctuation\">(</span>\n    inputs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"human\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ì—¬í–‰ ì¤‘ì— ë°©ë¬¸í•  ì£¼ìš” ê´€ê´‘ì§€ëŠ” ì–´ë””ì¸ê°€ìš”?\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    outputs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"ai\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ì´ ì—¬í–‰ì—ì„œëŠ” íŒŒë¦¬ì˜ ì—í íƒ‘, ë¡œë§ˆì˜ ì½œë¡œì„¸ì›€, ë² ë¥¼ë¦°ì˜ ë¸Œë€ë´ë¶€ë¥´í¬ ë¬¸, ì·¨ë¦¬íˆì˜ ë¼ì´ë„¤í´ ë“± ìœ ëŸ½ì˜ ìœ ëª…í•œ ê´€ê´‘ì§€ë“¤ì„ ë°©ë¬¸í•©ë‹ˆë‹¤. ê° ë„ì‹œì˜ ëŒ€í‘œì ì¸ ëª…ì†Œë“¤ì„ í¬ê´„ì ìœ¼ë¡œ ê²½í—˜í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ì´ë ‡ê²Œ <strong><code class=\"language-text\">save_context()</code> ë©”ì„œë“œë¥¼ í†µí•´ ëŒ€í™”ë¥¼ ì €ì¥í•´ë„ ë˜ê³ </strong><br><strong><code class=\"language-text\">predict()</code> ë©”ì„œë“œë¥¼ í†µí•´ ëŒ€í™”ë¥¼ ì§ì ‘ í•˜ë©° ë©”ëª¨ë¦¬ì— ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<p><strong>ê·¸ë ‡ê²Œ ëª‡ ê°œì˜ ëŒ€í™”ë¥¼ ì €ì¥í•œ í›„ì—,<br> <code class=\"language-text\">load_memory_variables({})[\"history\"]</code>ë¥¼ í†µí•´ ë©”ëª¨ë¦¬ë¥¼ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ëŒ€í™”ë‚´ìš© í™•ì¸</span>\n<span class=\"token comment\"># 200í† í°ì´ ë„˜ì–´ ì˜ˆì „ ëŒ€í™”ëŠ” ìš”ì•½ë˜ì–´ ìˆê³ , ìµœê·¼ëŒ€í™”ëŠ” ì›ë³¸ ê·¸ëŒ€ë¡œ ê°€ì§€ê³  ìˆìŒ</span>\nmemory<span class=\"token punctuation\">.</span>load_memory_variables<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"history\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token triple-quoted-string string\">\"\"\"\nì¶œë ¥:\n[SystemMessage(content=\"The human asks the AI about the price of a European travel package. The AI responds with the details of the package and optional costs, including traveler's insurance. The human then asks if they can upgrade to business class seats and the cost associated with it. The AI confirms that upgrading to business class is possible for an additional cost of around 1,200 euros round trip, offering benefits such as wider seats, premium in-flight meals, and additional luggage allowance.\", additional_kwargs={}, response_metadata={}),\n HumanMessage(content='íŒ¨í‚¤ì§€ì— í¬í•¨ëœ í˜¸í…”ì˜ ë“±ê¸‰ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?', additional_kwargs={}, response_metadata={}),\n AIMessage(content='ì´ íŒ¨í‚¤ì§€ì—ëŠ” 4ì„±ê¸‰ í˜¸í…” ìˆ™ë°•ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê° í˜¸í…”ì€ í¸ì•ˆí•¨ê³¼ í¸ì˜ì„±ì„ ì œê³µí•˜ë©°, ì¤‘ì‹¬ì§€ì— ìœ„ì¹˜í•´ ê´€ê´‘ì§€ì™€ì˜ ì ‘ê·¼ì„±ì´ ì¢‹ìŠµë‹ˆë‹¤. ëª¨ë“  í˜¸í…”ì€ ìš°ìˆ˜í•œ ì„œë¹„ìŠ¤ì™€ í¸ì˜ ì‹œì„¤ì„ ê°–ì¶”ê³  ìˆìŠµë‹ˆë‹¤.', additional_kwargs={}, response_metadata={})]\n\"\"\"</span></code></pre></div>\n<p>ì´ì™€ ê°™ì´<br><strong>ì´ì „ ëŒ€í™”ë“¤ì€ ìš”ì•½ëœ ìƒíƒœì—ì„œ <code class=\"language-text\">SystemMessage</code>ì˜  <code class=\"language-text\">content</code>ì— ë‹´ê²¨ ìˆê³ ,<br>ìµœì‹  ëŒ€í™”ë“¤ì€ <code class=\"language-text\">HumanMessage</code>ì™€ <code class=\"language-text\">AIMessage</code>ì˜ <code class=\"language-text\">content</code>ì— ë‹´ê²¨ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<p>Â </p>\n<p>Â </p>\n<p>ì´ì™¸ì—ë„ ë§ì€ ë©”ëª¨ë¦¬ ì €ì¥í•˜ëŠ” ë°©ì‹ì€ ë§ì€ë°<br>ê¸°íšŒê°€ ë  ë•Œ ì¶”ê°€ë¡œ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<p>ë„ì•.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#conversationkgmemory-%EC%A7%80%EC%8B%9D-%EA%B7%B8%EB%9E%98%ED%94%84-%ED%98%95%ED%83%9C-%EA%B8%B0%EC%96%B5\">ConversationKGMemory: ì§€ì‹ ê·¸ë˜í”„ í˜•íƒœ ê¸°ì–µ</a></p>\n<ul>\n<li><a href=\"#conversationchain-%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1\">ConversationChain ê°ì²´ ìƒì„±</a></li>\n<li><a href=\"#%EB%8C%80%ED%99%94%ED%95%98%EA%B8%B0\">ëŒ€í™”í•˜ê¸°</a></li>\n<li><a href=\"#%EC%9D%B4%EC%A0%84-%EB%8C%80%ED%99%94-%EB%82%B4%EC%9A%A9-%EB%B3%B4%EA%B8%B0\">ì´ì „ ëŒ€í™” ë‚´ìš© ë³´ê¸°</a></li>\n<li><a href=\"#%EC%A7%80%EC%8B%9D-%EA%B7%B8%EB%9E%98%ED%94%84%EC%9D%98-%EC%A0%95%EB%B3%B4-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\">ì§€ì‹ ê·¸ë˜í”„ì˜ ì •ë³´ í™•ì¸í•˜ê¸°</a></li>\n<li><a href=\"#conversationkgmemory-%EB%8C%80%ED%99%94-%EC%A0%80%EC%9E%A5\">ConversationKGMemory ëŒ€í™” ì €ì¥</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#conversationsummarybuffermemory-%EC%B5%9C%EA%B7%BC-%EB%8C%80%ED%99%94--%EC%9D%B4%EC%A0%84-%EB%8C%80%ED%99%94-%EC%9A%94%EC%95%BD\">ConversationSummaryBufferMemory: ìµœê·¼ ëŒ€í™” + ì´ì „ ëŒ€í™” ìš”ì•½</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"December 30, 2025","title":"[LLM] í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ ë„ì ë„ì -9","categories":"LLM RAG","author":"ë³€ìš°ì¤‘","emoji":"â˜€ï¸"},"fields":{"slug":"/25-12-30_1/"}},"site":{"siteMetadata":{"siteUrl":"https://www.zoomkoding.com","comments":{"utterances":{"repo":"https://github.com/byeonwoojung/byeonwoojung.github.io"}}}}},"pageContext":{"slug":"/25-12-25_1/","nextSlug":"/25-12-24_1/","prevSlug":"/25-12-30_1/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}