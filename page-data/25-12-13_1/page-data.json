{"componentChunkName":"component---src-templates-blog-template-js","path":"/25-12-13_1/","result":{"data":{"cur":{"id":"d023c61d-c7ed-5cce-a75f-62754442ed31","html":"<p>ì°¸ê³  : í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ (<a href=\"https://fastcampus.co.kr/data_online_teddy)\">https://fastcampus.co.kr/data_online_teddy)</a><br>ì†ŒìŠ¤ì½”ë“œ: <a href=\"https://github.com/teddylee777/langchain-kr\">https://github.com/teddylee777/langchain-kr</a><br>ìœ„í‚¤ë…ìŠ¤: <a href=\"https://wikidocs.net/book/14314\">https://wikidocs.net/book/14314</a></p>\n<p>Â </p>\n<p>ì˜¤ëŠ˜ë„ ì‘ì„±í•˜ëŠ”ë° Pydantic íŒŒì‹± ë”°ë¡œ ê³µë¶€í•œ ê²ƒ ì¢€ ë„ì ì´ê³  ê°€ê² ìŠµë‹ˆë‹¤.</p>\n<p>ë ˆì¸ ê¸°ë¦¿!</p>\n<p>Â </p>\n<h2 id=\"pydanticoutputparser\" style=\"position:relative;\"><a href=\"#pydanticoutputparser\" aria-label=\"pydanticoutputparser permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PydanticOutputParser</h2>\n<hr>\n<p>BaseModel/Field, partial_variables, ê²°ê³¼ í¬ë§· ì§€ì‹œì‚¬í•­, parser ë“±ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>ì˜ˆì‹œë¡œ ë°”ë¡œ ë´…ì‹œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># LangChain + PydanticOutputParser â€œì „ì²´ ì˜ˆì‹œ ì½”ë“œâ€</span>\n<span class=\"token comment\"># - BaseModel / Fieldë¡œ ì¶œë ¥ ìŠ¤í‚¤ë§ˆ ì •ì˜</span>\n<span class=\"token comment\"># - parser.get_format_instructions()ë¥¼ partial_variablesë¡œ í”„ë¡¬í”„íŠ¸ì— ì£¼ì…</span>\n<span class=\"token comment\"># - prompt | llm | parser ë¡œ \"êµ¬ì¡°í™”ëœ ê²°ê³¼\"ë¥¼ ê°•ì œ íŒŒì‹±</span>\n<span class=\"token comment\"># - RunnablePassthroughë¡œ ë‹¨ì¼ ì…ë ¥(str)ë„ ì²´ì¸ ë‚´ë¶€ì—ì„œ dictë¡œ ë§¤í•‘</span>\n\n<span class=\"token keyword\">from</span> typing <span class=\"token keyword\">import</span> Optional\n<span class=\"token keyword\">from</span> pydantic <span class=\"token keyword\">import</span> BaseModel<span class=\"token punctuation\">,</span> Field\n\n<span class=\"token keyword\">from</span> langchain_openai <span class=\"token keyword\">import</span> ChatOpenAI\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>prompts <span class=\"token keyword\">import</span> PromptTemplate\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>output_parsers <span class=\"token keyword\">import</span> PydanticOutputParser\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>runnables <span class=\"token keyword\">import</span> RunnablePassthrough\n\n\n<span class=\"token comment\"># 1) ì¶œë ¥ ìŠ¤í‚¤ë§ˆ ì •ì˜ (LLM ì¶œë ¥ì´ ë°˜ë“œì‹œ ì´ í˜•íƒœë¡œ íŒŒì‹±ë˜ì–´ì•¼ í•¨)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CountryInfo</span><span class=\"token punctuation\">(</span>BaseModel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    country<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> Field<span class=\"token punctuation\">(</span>description<span class=\"token operator\">=</span><span class=\"token string\">\"êµ­ê°€ ì´ë¦„\"</span><span class=\"token punctuation\">)</span>\n    capital<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> Field<span class=\"token punctuation\">(</span>description<span class=\"token operator\">=</span><span class=\"token string\">\"ìˆ˜ë„\"</span><span class=\"token punctuation\">)</span>\n    population_million<span class=\"token punctuation\">:</span> Optional<span class=\"token punctuation\">[</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Field<span class=\"token punctuation\">(</span>\n        default<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span>\n        description<span class=\"token operator\">=</span><span class=\"token string\">\"ì¸êµ¬(ë°±ë§Œ ë‹¨ìœ„). ëª¨ë¥´ë©´ null\"</span>\n    <span class=\"token punctuation\">)</span>\n\n\n<span class=\"token comment\"># 2) Pydantic íŒŒì„œ ìƒì„±</span>\nparser <span class=\"token operator\">=</span> PydanticOutputParser<span class=\"token punctuation\">(</span>pydantic_object<span class=\"token operator\">=</span>CountryInfo<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 3) í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ (format_instructionsëŠ” 'ì‚¬ìš©ì ì •ì˜ ë³€ìˆ˜ëª…'ì„)</span>\nprompt <span class=\"token operator\">=</span> PromptTemplate<span class=\"token punctuation\">(</span>\n    template<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"ë„ˆëŠ” ì •í™•íˆ ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œë§Œ ë‹µí•˜ëŠ” ë„ìš°ë¯¸ì•¼.\\n\"</span>\n        <span class=\"token string\">\"{format_instructions}\\n\"</span>\n        <span class=\"token string\">\"êµ­ê°€: {country}\\n\"</span>\n        <span class=\"token string\">\"ì£¼ì˜: ì¶”ê°€ ì„¤ëª… ê¸ˆì§€. JSONë§Œ ì¶œë ¥.\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    input_variables<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"country\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    partial_variables<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n        <span class=\"token comment\"># parserê°€ ìš”êµ¬í•˜ëŠ” ì¶œë ¥ í˜•ì‹ ì§€ì¹¨ì„ í”„ë¡¬í”„íŠ¸ì— 'ê³ ì • ë¬¸ìì—´'ë¡œ ì£¼ì…</span>\n        <span class=\"token string\">\"format_instructions\"</span><span class=\"token punctuation\">:</span> parser<span class=\"token punctuation\">.</span>get_format_instructions<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 4) LLM</span>\nllm <span class=\"token operator\">=</span> ChatOpenAI<span class=\"token punctuation\">(</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"gpt-4o-mini\"</span><span class=\"token punctuation\">,</span> temperature<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 5) ì²´ì¸ êµ¬ì„± (Prompt â†’ LLM â†’ Pydantic Parser)</span>\nchain <span class=\"token operator\">=</span> prompt <span class=\"token operator\">|</span> llm <span class=\"token operator\">|</span> parser\n\n<span class=\"token comment\"># (A) dictë¡œ ì‹¤í–‰</span>\nresult_a <span class=\"token operator\">=</span> chain<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"country\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ëŒ€í•œë¯¼êµ­\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A) dict ì…ë ¥ ê²°ê³¼:\"</span><span class=\"token punctuation\">,</span> result_a<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A) íƒ€ì…:\"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>result_a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># (B) ë‹¨ì¼ ê°’(str) ì…ë ¥ì„ ë°›ê³  ì‹¶ìœ¼ë©´ RunnablePassthroughë¡œ ë‚´ë¶€ì—ì„œ dictë¡œ ë§¤í•‘</span>\nchain_str_input <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span><span class=\"token string\">\"country\"</span><span class=\"token punctuation\">:</span> RunnablePassthrough<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">|</span> prompt\n    <span class=\"token operator\">|</span> llm\n    <span class=\"token operator\">|</span> parser\n<span class=\"token punctuation\">)</span>\n\nresult_b <span class=\"token operator\">=</span> chain_str_input<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token string\">\"ì¼ë³¸\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\nB) str ì…ë ¥ ê²°ê³¼:\"</span><span class=\"token punctuation\">,</span> result_b<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"B) íƒ€ì…:\"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>result_b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h3 id=\"1-code-classlanguage-textbasemodelcode--code-classlanguage-textfieldcodeëŠ”-ë¬´ì—‡ì¸ê°€\" style=\"position:relative;\"><a href=\"#1-code-classlanguage-textbasemodelcode--code-classlanguage-textfieldcode%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\" aria-label=\"1 code classlanguage textbasemodelcode  code classlanguage textfieldcodeëŠ” ë¬´ì—‡ì¸ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) <code class=\"language-text\">BaseModel</code> / <code class=\"language-text\">Field</code>ëŠ” ë¬´ì—‡ì¸ê°€?</h3>\n<ul>\n<li>\n<p><strong><code class=\"language-text\">BaseModel</code></strong>: ìƒì†ë°›ëŠ” ë¶€ëª¨ ëª¨ë¸ (ì—¬ê¸°ì„œëŠ” pydantic ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ BaseModel ëª¨ë“ˆì„ ìƒì† ë°›ëŠ” ê²ƒì„)</p>\n</li>\n<li>\n<p><strong><code class=\"language-text\">Field</code></strong>: ê° í•„ë“œì˜ ì˜ë¯¸/ì œì•½(ì„¤ëª…, ê¸°ë³¸ê°’ ë“±)ì„ ë¶™ì´ëŠ” <strong>ë©”íƒ€ë°ì´í„°</strong></p>\n<ul>\n<li>LLMì—ê²Œ â€œì´ í•„ë“œëŠ” ì´ëŸ° ì˜ë¯¸â€ë¼ê³  ì•Œë ¤ì¤˜ì„œ ì¶œë ¥ í’ˆì§ˆì„ ì˜¬ë ¤ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n</li>\n<li>\n<p>ë³´í†µ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> í´ë˜ìŠ¤ëª…<span class=\"token punctuation\">(</span>ìƒì†ë°›ì„ ëª¨ë¸<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    ë³€ìˆ˜ëª…<span class=\"token punctuation\">:</span> ë³€ìˆ˜íƒ€ì… <span class=\"token operator\">=</span> Field<span class=\"token punctuation\">(</span>description<span class=\"token operator\">=</span><span class=\"token string\">\"ë³€ìˆ˜ ê´€ë ¨ ì„¤ëª…\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n<p>Â </p>\n<h3 id=\"2-code-classlanguage-textpartial_variablescodeëŠ”-ë¬´ì—‡ì¸ê°€\" style=\"position:relative;\"><a href=\"#2-code-classlanguage-textpartial_variablescode%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\" aria-label=\"2 code classlanguage textpartial_variablescodeëŠ” ë¬´ì—‡ì¸ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) <code class=\"language-text\">partial_variables</code>ëŠ” ë¬´ì—‡ì¸ê°€?</h3>\n<ul>\n<li>ë¯¸ë¦¬ í”„ë¡¬í”„íŠ¸ì— ë¬¸ìì—´ì„ ì±„ì›Œì£¼ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.</li>\n<li>ì—¬ê¸°ì„œëŠ” í”„ë¡¬í”„íŠ¸ ë‚´ë¶€ ë³€ìˆ˜ì—ì„œ <code class=\"language-text\">format_instructions</code> ê°’ì„ ì±„ì›Œì£¼ê³  ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<p>Â </p>\n<h3 id=\"3-code-classlanguage-textformat_instructionscodeëŠ”-ì›ë˜-ìˆëŠ”-ë³€ìˆ˜ì¸ê°€\" style=\"position:relative;\"><a href=\"#3-code-classlanguage-textformat_instructionscode%EB%8A%94-%EC%9B%90%EB%9E%98-%EC%9E%88%EB%8A%94-%EB%B3%80%EC%88%98%EC%9D%B8%EA%B0%80\" aria-label=\"3 code classlanguage textformat_instructionscodeëŠ” ì›ë˜ ìˆëŠ” ë³€ìˆ˜ì¸ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3) <code class=\"language-text\">format_instructions</code>ëŠ” ì›ë˜ ìˆëŠ” ë³€ìˆ˜ì¸ê°€?</h3>\n<ul>\n<li><strong>ì•„ë‹™ë‹ˆë‹¤. ì˜ˆì•½ì–´ê°€ ì•„ë‹™ë‹ˆë‹¤.</strong> <code class=\"language-text\">{format_instructions}</code>ëŠ” ë‚´ê°€ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ì— ë§Œë“  ë³€ìˆ˜ëª…ì¼ ë¿ ì°©ê° NO.</li>\n<li><code class=\"language-text\">partial_variables={\"format_instructions\": ...}</code>ë¡œ ê·¸ ë³€ìˆ˜ ìë¦¬ì— ë“¤ì–´ê°ˆ ê°’ì„ ì±„ìš´ ê²ƒì´ë¼, ë³€ìˆ˜ëª…ì€ <code class=\"language-text\">schema_guide</code>, <code class=\"language-text\">output_rules</code> ë“±ìœ¼ë¡œ ë°”ê¿”ë„ ë©ë‹ˆë‹¤. (í”„ë¡¬í”„íŠ¸ì˜ <code class=\"language-text\">{...}</code>ì™€ë§Œ ì¼ì¹˜í•˜ë©´ OK)</li>\n</ul>\n<p>ì‹¤ì œë¡œ í”„ë¡¬í”„íŠ¸ëŠ” ì•„ë˜ì™€ ìœ ì‚¬í•˜ê²Œ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ë„ˆëŠ” ì •í™•íˆ ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œë§Œ ë‹µí•˜ëŠ” ë„ìš°ë¯¸ì•¼.\nThe output should be formatted as a JSON instance that conforms to the JSON schema below.\n\n{\n  \"title\": \"CountryInfo\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"country\": {\n      \"type\": \"string\",\n      \"description\": \"êµ­ê°€ ì´ë¦„\"\n    },\n    \"capital\": {\n      \"type\": \"string\",\n      \"description\": \"ìˆ˜ë„\"\n    },\n    \"population_million\": {\n      \"type\": \"integer\",\n      \"description\": \"ì¸êµ¬(ë°±ë§Œ ë‹¨ìœ„). ëª¨ë¥´ë©´ null\"\n    }\n  },\n  \"required\": [\"country\", \"capital\"]\n}\n\nêµ­ê°€: ëŒ€í•œë¯¼êµ­\nì£¼ì˜: ì¶”ê°€ ì„¤ëª… ê¸ˆì§€. JSONë§Œ ì¶œë ¥.</code></pre></div>\n<p><strong>ì´ë ‡ê²Œ ì¶œë ¥ í˜•ì‹ì„ ì •í•´ì¤€ í›„ì—, chain_str_inputì—ì„œ ë§ˆì§€ë§‰ parserê°€ í˜•ì‹ì— ë§ê²Œ íŒŒì‹±ì„ í•©ë‹ˆë‹¤.</strong></p>\n<p>Â </p>\n<h3 id=\"4-í”„ë¡¬í”„íŠ¸ì—-ì¶œë ¥-í¬ë§·ì„-ì •í•´ì¤€ë‹¤ê³ -í˜•ì‹ì„-ì •í™•íˆ-ë”°ë¥´ëŠ”ê°€\" style=\"position:relative;\"><a href=\"#4-%ED%94%84%EB%A1%AC%ED%94%84%ED%8A%B8%EC%97%90-%EC%B6%9C%EB%A0%A5-%ED%8F%AC%EB%A7%B7%EC%9D%84-%EC%A0%95%ED%95%B4%EC%A4%80%EB%8B%A4%EA%B3%A0-%ED%98%95%EC%8B%9D%EC%9D%84-%EC%A0%95%ED%99%95%ED%9E%88-%EB%94%B0%EB%A5%B4%EB%8A%94%EA%B0%80\" aria-label=\"4 í”„ë¡¬í”„íŠ¸ì— ì¶œë ¥ í¬ë§·ì„ ì •í•´ì¤€ë‹¤ê³  í˜•ì‹ì„ ì •í™•íˆ ë”°ë¥´ëŠ”ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. í”„ë¡¬í”„íŠ¸ì— ì¶œë ¥ í¬ë§·ì„ ì •í•´ì¤€ë‹¤ê³  í˜•ì‹ì„ ì •í™•íˆ ë”°ë¥´ëŠ”ê°€?</h3>\n<ul>\n<li><strong>ì•„ë‹™ë‹ˆë‹¤. í”„ë¡¬í”„íŠ¸ì— ì§€ì¹¨ ë¬¸ìì—´ì„ ë¯¸ë¦¬ ì±„ì›Œ ë„£ì–´ì£¼ëŠ” ê¸°ëŠ¥ì´ë¼, LLMì´ ì§€ì¹¨ì„ ë”°ë¥¼ í™•ë¥ ë§Œ ë†’ì—¬ì¤„ ë¿ì…ë‹ˆë‹¤.</strong></li>\n<li>â­ï¸ <strong>ì§„ì§œ ê°•ì œëŠ” parserê°€ í•©ë‹ˆë‹¤.</strong> â­ï¸: LLM ì¶œë ¥ì´ ìŠ¤í‚¤ë§ˆì™€ ë‹¤ë¥´ë©´ <code class=\"language-text\">PydanticOutputParser</code>ê°€ íŒŒì‹± ì‹¤íŒ¨ë¡œ <strong>ì—ëŸ¬ ë°œìƒ</strong>í•œë‹¤ê³  í•©ë‹ˆë‹¤.</li>\n<li><strong><code class=\"language-text\">OutputFixingParser</code>ë¥¼ ì´ìš©í•´ì„œ ë‹¤ì‹œ ê³ ì³ë‹¬ë¼ëŠ” ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆê³ , <code class=\"language-text\">RetryOutputParser</code>ì„ ì´ìš©í•´ì„œ ì²˜ìŒ ë³´ëƒˆë˜ í”„ë¡¬í”„íŠ¸ì™€ ì˜ëª»ëœ ë‹µë³€ì„ ëª¨ë‘ í•¨ê»˜ ì£¼ì–´ ì¬ì‹œë„ë¥¼ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</strong></li>\n<li><strong>ë˜ëŠ”, <code class=\"language-text\">with_fallbacks</code>ì„ ì´ìš©í•´ì„œ í”Œëœ B ì²´ì¸ì„ ì¤€ë¹„í•´ë‘˜ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</strong></li>\n</ul>\n<p>ì´í•´ ì™„.</p>\n<p>Â </p>\n<p>Â </p>\n<h2 id=\"prompttemplate-ë‹¨ì¼-ë¬¸ìì—´-í”„ë¡¬í”„íŠ¸-í…œí”Œë¦¿\" style=\"position:relative;\"><a href=\"#prompttemplate-%EB%8B%A8%EC%9D%BC-%EB%AC%B8%EC%9E%90%EC%97%B4-%ED%94%84%EB%A1%AC%ED%94%84%ED%8A%B8-%ED%85%9C%ED%94%8C%EB%A6%BF\" aria-label=\"prompttemplate ë‹¨ì¼ ë¬¸ìì—´ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PromptTemplate: ë‹¨ì¼ ë¬¸ìì—´ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿</h2>\n<hr>\n<h3 id=\"prompt-ìƒì„±\" style=\"position:relative;\"><a href=\"#prompt-%EC%83%9D%EC%84%B1\" aria-label=\"prompt ìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prompt ìƒì„±</h3>\n<p>PromptTemplateì„ ì´ìš©í•œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ìƒì„± ë°©ë²•ì€ 2ê°€ì§€.</p>\n<ol>\n<li>\n<p><code class=\"language-text\">PromptTemplate.from_template</code>ë¡œ ê°ì²´ ìƒì„±</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>prompts <span class=\"token keyword\">import</span> PromptTemplate\ntemplate <span class=\"token operator\">=</span> <span class=\"token string\">\"{country}ì˜ ìˆ˜ë„ëŠ”?\"</span>\nprompt <span class=\"token operator\">=</span> PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span>template<span class=\"token punctuation\">)</span>\nprompt\n<span class=\"token comment\"># ì¶œë ¥: PromptTemplate(input_variables=['country'], input_types={}, partial_variables={}, template='{country}ì˜ ìˆ˜ë„ëŠ”?')</span></code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">PromptTemplate</code> ê°ì²´ë¥¼ í”„ë¡¬í”„íŠ¸ì™€ í•¨ê»˜ ë™ì‹œ ìƒì„±</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">template <span class=\"token operator\">=</span> <span class=\"token string\">\"{country}ì˜ ìˆ˜ë„ëŠ”?\"</span>\n\nprompt <span class=\"token operator\">=</span> PromptTemplate<span class=\"token punctuation\">(</span>\n    template<span class=\"token operator\">=</span>template<span class=\"token punctuation\">,</span>           <span class=\"token comment\"># ê°ì²´ ìƒì„± ì‹œ, í…œí”Œë¦¿ ì§ì ‘ ì„¤ì •</span>\n    input_variables<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"country\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># input_variables ì§ì ‘ ì„¤ì •</span>\n<span class=\"token punctuation\">)</span>\nprompt\n<span class=\"token comment\"># ì¶œë ¥: PromptTemplate(input_variables=['country'], input_types={}, partial_variables={}, template='{country}ì˜ ìˆ˜ë„ëŠ”?')</span></code></pre></div>\n</li>\n</ol>\n<p>ì´ë ‡ê²Œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ìƒì„±í•  ìˆ˜ ìˆëŠ”ë°!<br><strong>ì…ë ¥ ë³€ìˆ˜ë¥¼ í˜¸ì¶œ ì „ì— ë¯¸ë¦¬ ì±„ìš°ëŠ” ë°©ë²•</strong>ì´ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì´ë•Œ 2ê°€ì§€ ë°©ë²•ì´ ìˆëŠ”ë°,</p>\n<ol>\n<li>\n<p><code class=\"language-text\">PromptTemplate</code> ê°ì²´ ìƒì„± ì‹œ, <code class=\"language-text\">partial_variables</code> ê°’ ì±„ìš°ê¸°</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># template ì •ì˜</span>\ntemplate <span class=\"token operator\">=</span> <span class=\"token string\">\"{country1}ê³¼ {country2}ì˜ ìˆ˜ë„ëŠ” ê°ê° ì–´ë””ì¸ê°€ìš”?\"</span>\n\n<span class=\"token comment\"># PromptTemplate ê°ì²´ë¥¼ í™œìš©í•˜ì—¬ prompt_template ìƒì„±</span>\nprompt <span class=\"token operator\">=</span> PromptTemplate<span class=\"token punctuation\">(</span>\n    template<span class=\"token operator\">=</span>template<span class=\"token punctuation\">,</span>\n    input_variables<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"country1\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    partial_variables<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"country2\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ë¯¸êµ­\"</span>  <span class=\"token comment\"># dictionary í˜•íƒœë¡œ partial_variablesë¥¼ ì „ë‹¬</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\nprompt\n<span class=\"token comment\"># ì¶œë ¥: PromptTemplate(input_variables=['country1'], input_types={}, partial_variables={'country2': 'ë¯¸êµ­'}, template='{country1}ê³¼ {country2}ì˜ ìˆ˜ë„ëŠ” ê°ê° ì–´ë””ì¸ê°€ìš”?')</span></code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">PromptTemplate</code> ê°ì²´ ìƒì„± í›„ì— <code class=\"language-text\">partial()</code> ë©”ì„œë“œë¡œ ê°’ ì±„ìš°ê¸°</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># template ì •ì˜</span>\ntemplate <span class=\"token operator\">=</span> <span class=\"token string\">\"{country1}ê³¼ {country2}ì˜ ìˆ˜ë„ëŠ” ê°ê° ì–´ë””ì¸ê°€ìš”?\"</span>\n\n<span class=\"token comment\"># PromptTemplate ê°ì²´ë¥¼ í™œìš©í•˜ì—¬ prompt_template ìƒì„±</span>\nprompt <span class=\"token operator\">=</span> PromptTemplate<span class=\"token punctuation\">(</span>\n    template<span class=\"token operator\">=</span>template<span class=\"token punctuation\">,</span>\n    input_variables<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"country1\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span>\nprompt_partial <span class=\"token operator\">=</span> prompt<span class=\"token punctuation\">.</span>partial<span class=\"token punctuation\">(</span>country2<span class=\"token operator\">=</span><span class=\"token string\">\"ìºë‚˜ë‹¤\"</span><span class=\"token punctuation\">)</span>\nprompt_partial\n<span class=\"token comment\"># ì¶œë ¥: PromptTemplate(input_variables=['country1'], input_types={}, partial_variables={'country2': 'ìºë‚˜ë‹¤'}, template='{country1}ê³¼ {country2}ì˜ ìˆ˜ë„ëŠ” ê°ê° ì–´ë””ì¸ê°€ìš”?')</span>\n</code></pre></div>\n</li>\n</ol>\n<p>ì´ë ‡ê²Œ <code class=\"language-text\">partial_variables</code>ì— ê°’ì´ ë“¤ì–´ê°„ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.<br><strong>ì´ë ‡ê²Œ ì„¤ì •ë˜ì—ˆì„ ë•ŒëŠ” <code class=\"language-text\">input_variables</code> ê°’ì— ëŒ€í•œ ì…ë ¥ ë³€ìˆ˜ë§Œ ë„£ì–´ë„ í˜¸ì¶œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</strong></p>\n<blockquote>\n<h3 id=\"ê¹¨ì•Œ-tip\" style=\"position:relative;\"><a href=\"#%EA%B9%A8%EC%95%8C-tip\" aria-label=\"ê¹¨ì•Œ tip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’¡ê¹¨ì•Œ Tip</h3>\n<p><strong><code class=\"language-text\">partial_variables</code>ì— ê°’ì´ ìˆì–´ë„ invoke() í˜¸ì¶œ ì‹œ, ì…ë ¥ ë³€ìˆ˜ ê°’ì„ ë°”ê¿”ì„œ í˜¸ì¶œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">chain<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token string\">\"ëŒ€í•œë¯¼êµ­\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>content <span class=\"token comment\"># ê°€ëŠ¥</span>\nchain<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"country1\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ëŒ€í•œë¯¼êµ­\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>content <span class=\"token comment\"># ê°€ëŠ¥</span>\n\n<span class=\"token comment\"># partial_variablesì—ì„œ country2=\"ìºë‚˜ë‹¤\"ë¥¼ ë¬´ì‹œí•˜ê³  country2=\"í˜¸ì£¼\"ë¡œ ì‹¤í–‰ë¨</span>\nchain<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"country1\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ëŒ€í•œë¯¼êµ­\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"country2\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"í˜¸ì£¼\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>content <span class=\"token comment\"># ê°€ëŠ¥</span></code></pre></div>\n<p><strong>ì¦‰, partial_variablesëŠ” ë””í´íŠ¸ ê°’ì´ë¼ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong> OK.</p>\n<p>ê·¸ë¦¬ê³ , <strong>partial_variablesì—ì„œ ê°’ì„ ì„¤ì •í•  ë•Œ í•¨ìˆ˜ë¥¼ ë„£ì–´ì¤„ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">get_today</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%B %d\"</span><span class=\"token punctuation\">)</span>\n\nprompt <span class=\"token operator\">=</span> PromptTemplate<span class=\"token punctuation\">(</span>\n    template<span class=\"token operator\">=</span><span class=\"token string\">\"ì˜¤ëŠ˜ ë‚ ì§œ {today}ì— {country} ë‚˜ë¼ì˜ ë‚ ì”¨ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.\"</span><span class=\"token punctuation\">,</span>\n    input_variables<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"country\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    partial_variables<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"today\"</span><span class=\"token punctuation\">:</span> get_today\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n</blockquote>\n<p>Â </p>\n<h3 id=\"prompt-ê´€ë¦¬\" style=\"position:relative;\"><a href=\"#prompt-%EA%B4%80%EB%A6%AC\" aria-label=\"prompt ê´€ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prompt ê´€ë¦¬</h3>\n<p>yaml íŒŒì¼ë¡œ í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ê°€ ê°€ëŠ¥í•˜ê³ , load_prompt ëª¨ë“ˆì„ ì´ìš©í•´ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>(yaml íŒŒì¼ ì‘ì„± ì‹œ íŒŒì´í”„ <code class=\"language-text\">|</code>ì„ ì´ìš©í•´ ì—¬ëŸ¬ ì¤„ ì…ë ¥ì´ ê°€ëŠ¥í•˜ê³ , ì•ì— 2ì¹¸ ë„ì›Œì„œ ì‘ì„±í•©ë‹ˆë‹¤.)</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">_type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"prompt\"</span>\n<span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n  {country}ì˜ ìˆ˜ë„ì— ëŒ€í•´ì„œ ì•Œë ¤ì£¼ì„¸ìš”.\n  ìˆ˜ë„ì˜ íŠ¹ì§•ì„ ë‹¤ìŒì˜ ì–‘ì‹ì— ë§ê²Œ ì •ë¦¬í•´ ì£¼ì„¸ìš”.\n  300ì ë‚´ì™¸ë¡œ ì‘ì„±í•´ ì£¼ì„¸ìš”.\n  í•œê¸€ë¡œ ì‘ì„±í•´ ì£¼ì„¸ìš”.\n  ----\n  [ì–‘ì‹]\n  1. ë©´ì \n  2. ì¸êµ¬\n  3. ì—­ì‚¬ì  ì¥ì†Œ\n  4. íŠ¹ì‚°í’ˆ</span>\n  \n  <span class=\"token comment\">#Answer:</span>\n<span class=\"token key atrule\">input_variables</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"country\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>ì´ëŸ° ì‹ìœ¼ë¡œ ì €ì¥ëœ yaml íŒŒì¼ì„ ì•„ë˜ì™€ ê°™ì´ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>prompts <span class=\"token keyword\">import</span> load_prompt\n\nprompt <span class=\"token operator\">=</span> load_prompt<span class=\"token punctuation\">(</span><span class=\"token string\">\"prompts/fruit_color.yaml\"</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span>\nprompt\n<span class=\"token comment\"># ì¶œë ¥: PromptTemplate(input_variables=['fruit'], input_types={}, partial_variables={}, template='{fruit}ì˜ ìƒ‰ê¹”ì´ ë­ì•¼?')</span></code></pre></div>\n<p>í”„ë¡¬í”„íŠ¸ëŠ” ì½”ë“œ ì™”ë‹¤ê°”ë‹¤ ë³´ì§€ ì•Šê³ , ì´ë ‡ê²Œ ê´€ë¦¬í•˜ë©´ í¸í•˜ê² ì§€ìš”~</p>\n<p>Â </p>\n<p>Â </p>\n<h2 id=\"chatprompttemplate-ëŒ€í™”ê¸°ë¡-ì£¼ì…\" style=\"position:relative;\"><a href=\"#chatprompttemplate-%EB%8C%80%ED%99%94%EA%B8%B0%EB%A1%9D-%EC%A3%BC%EC%9E%85\" aria-label=\"chatprompttemplate ëŒ€í™”ê¸°ë¡ ì£¼ì… permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ChatPromptTemplate: ëŒ€í™”ê¸°ë¡ ì£¼ì…</h2>\n<hr>\n<p>ChatPromptTemplateëŠ” ì—­í• ê³¼ ë©”ì‹œì§€ë¥¼ íŠœí”Œë¡œ ë¬¶ì–´ í”„ë¡¬í”„íŠ¸ì— ë„£ì„ ìˆ˜ ìˆëŠ” í…œí”Œë¦¿ì…ë‹ˆë‹¤.<br>ë³´í†µ ëŒ€í™” ëª©ë¡ì„ ë„£ì„ ë•Œ í™œìš©í•©ë‹ˆë‹¤.</p>\n<p>ë ˆì¸ ê¸°ë¦¿.</p>\n<p>íŠœí”Œ <code class=\"language-text\">(role, message)</code>ë¡œ í…œí”Œë¦¿ì„ êµ¬ì„±í•˜ë©°, from_template(â€œë©”ì‹œì§€â€)ë¥¼ ë„£ìœ¼ë©´ ê¸°ë³¸ìœ¼ë¡œ roleì´ Humanì…ë‹ˆë‹¤.</p>\n<h3 id=\"from_message-ë©”ì„œë“œë¡œ-í…œí”Œë¦¿-êµ¬ì„±\" style=\"position:relative;\"><a href=\"#from_message-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%ED%85%9C%ED%94%8C%EB%A6%BF-%EA%B5%AC%EC%84%B1\" aria-label=\"from_message ë©”ì„œë“œë¡œ í…œí”Œë¦¿ êµ¬ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>from_message ë©”ì„œë“œë¡œ í…œí”Œë¦¿ êµ¬ì„±</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>prompts <span class=\"token keyword\">import</span> ChatPromptTemplate\n\nchat_template <span class=\"token operator\">=</span> ChatPromptTemplate<span class=\"token punctuation\">.</span>from_messages<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">[</span>\n        <span class=\"token comment\"># role, message</span>\n        <span class=\"token punctuation\">(</span><span class=\"token string\">\"system\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ë‹¹ì‹ ì€ ì¹œì ˆí•œ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì´ë¦„ì€ {name} ì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span><span class=\"token string\">\"human\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ë°˜ê°€ì›Œìš”!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span><span class=\"token string\">\"ai\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ì•ˆë…•í•˜ì„¸ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span><span class=\"token string\">\"human\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"{user_input}\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ì±— message ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</span>\nmessages <span class=\"token operator\">=</span> chat_template<span class=\"token punctuation\">.</span>format_messages<span class=\"token punctuation\">(</span>\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"í…Œë””\"</span><span class=\"token punctuation\">,</span> user_input<span class=\"token operator\">=</span><span class=\"token string\">\"ë‹¹ì‹ ì˜ ì´ë¦„ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?\"</span>\n<span class=\"token punctuation\">)</span>\nmessages\n<span class=\"token comment\"># ì¶œë ¥: [SystemMessage(content='ë‹¹ì‹ ì€ ì¹œì ˆí•œ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì´ë¦„ì€ í…Œë”” ì…ë‹ˆë‹¤.', additional_kwargs={}, response_metadata={}), HumanMessage(content='ë°˜ê°€ì›Œìš”!', additional_kwargs={}, response_metadata={}), AIMessage(content='ì•ˆë…•í•˜ì„¸ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?', additional_kwargs={}, response_metadata={}), HumanMessage(content='ë‹¹ì‹ ì˜ ì´ë¦„ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?', additional_kwargs={}, response_metadata={})]</span></code></pre></div>\n<p><code class=\"language-text\">from_message()</code> ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬  system ë©”ì‹œì§€ë¡œ ì „ì—­ ì„¤ì •í•´ì£¼ê³ , humanê³¼ aiì˜ ëŒ€í™”ëª©ë¡ì„ í”„ë¡¬í”„íŠ¸ì— ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>roleì€ ai, human, system, tool ë“±ì´ ìˆìŠµë‹ˆë‹¤.</li>\n<li>role ì„¤ì •ì„ í†µí•´ í•´ë‹¹ ë©”ì‹œì§€ê°€ ì–´ë–¤ roleì„ ê°–ëŠ”ì§€ LLMì—ê²Œ ëª…í™•íˆ ì•Œë ¤ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n<li>ëŒ€í™” íë¦„ ìˆœì„œ (í˜„ì¬ëŠ” system â†’ human â†’ ai â†’ human ìˆœì„œ)ë¥¼ ê³ ì •ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<p>ê·¸ë¦¬ê³ , <code class=\"language-text\">format_messages()</code> ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ ì…ë ¥ ë³€ìˆ˜ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><strong>ì´ë ‡ê²Œ ì„¤ì •í•œ <code class=\"language-text\">messages</code>ë¥¼ ì¶œë ¥í•˜ë©´, <code class=\"language-text\">SystemMessage</code>, <code class=\"language-text\">HumanMessage</code>, <code class=\"language-text\">AIMessage</code> ê° contentì— í”„ë¡¬í”„íŠ¸ê°€ ì„¤ì •ë˜ì–´ ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<p>OK.</p>\n<p>Â </p>\n<p>ê·¸ë ‡ë‹¤ë©´,</p>\n<blockquote>\n<p><strong>Q. ì´ëŸ¬í•œ ëŒ€í™”ëª©ë¡ì„ í”„ë¡¬í”„íŠ¸ì— ì„¤ì •í•˜ë©´ ì–´ë–¤ ì¥ì ì´ ìˆëŠ” ê²ƒì¸ê°€?</strong></p>\n<p>=> LLMì´ í•´ë‹¹ ë©”ì‹œì§€ê°€ ì–´ë–¤ roleì¸ì§€ ëª…í™•í•˜ê²Œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ì„ ì‚¬ìš©í•´ë„ ì•Œ ìˆ˜ëŠ” ìˆì§€ë§Œ, ì´ í…œí”Œë¦¿ì€ ëª…í™•í•˜ê²Œ ì•Œë ¤ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë„ ëª…í™•í•˜ê²Œ ì¸ì§€ ê°€ëŠ¥!!)</p>\n<p>ê·¸ë¦¬ê³ , ë‚˜ì¤‘ì— â­ï¸ <strong>â€œëŒ€í™” ê¸°ë¡ ìš”ì•½â€</strong> â­ï¸ì—ì„œ í™œìš© ê°€ëŠ¥!!!!</p>\n<p>ì—¬ê¸°ì„œ</p>\n<h3 id=\"-ê¹¨ì•Œ-tip\" style=\"position:relative;\"><a href=\"#-%EA%B9%A8%EC%95%8C-tip\" aria-label=\" ê¹¨ì•Œ tip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’¡ ê¹¨ì•Œ Tip</h3>\n<p><strong>MessagesPlaceholder()ë¥¼ ì´ìš©í•˜ì—¬ ì•„ì§ ì±„ì›Œì§€ì§€ ì•Šì€ ëŒ€í™”ëª©ë¡ì„ í”„ë¡¬í”„íŠ¸ì— ê³ ì •ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<p><strong>ì¦‰, ë¯¸ë¦¬ ìë¦¬ ì°¨ì§€í•´ë†“ê³  ëŒ€í™”í•˜ë‹¤ê°€ ê·¸ ëŒ€í™”ë¥¼ ë¼ì›Œë„£ì„ ìˆ˜ ìˆëŠ” ê²ƒì„!!</strong> OK?!</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>output_parsers <span class=\"token keyword\">import</span> StrOutputParser\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>prompts <span class=\"token keyword\">import</span> ChatPromptTemplate<span class=\"token punctuation\">,</span> MessagesPlaceholder\n\nchat_prompt <span class=\"token operator\">=</span> ChatPromptTemplate<span class=\"token punctuation\">.</span>from_messages<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">(</span>\n            <span class=\"token string\">\"system\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"ë‹¹ì‹ ì€ ìš”ì•½ ì „ë¬¸ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì„ë¬´ëŠ” ì£¼ìš” í‚¤ì›Œë“œë¡œ ëŒ€í™”ë¥¼ ìš”ì•½í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\"># ì•„ì§ í™•ì •ë˜ì§€ ì•Šì€ ëŒ€í™”ë¥¼ ê³ ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>\n        <span class=\"token comment\"># variable_nameë¡œ í‚¤ ê°’ ì„¤ì •í•¨</span>\n        MessagesPlaceholder<span class=\"token punctuation\">(</span>variable_name<span class=\"token operator\">=</span><span class=\"token string\">\"conversation\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span><span class=\"token string\">\"human\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ì§€ê¸ˆê¹Œì§€ì˜ ëŒ€í™”ë¥¼ {word_count} ë‹¨ì–´ë¡œ ìš”ì•½í•©ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span>\nchat_prompt</code></pre></div>\n<p><strong><code class=\"language-text\">variable_name</code>ë¡œ ì•„ì§ ì •í•´ì§€ì§€ ì•Šì€ ëŒ€í™”ëª©ë¡(ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸)ì˜ í‚¤ ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<p><strong>format() ë©”ì„œë“œë¡œ í•œë²ˆ ì–´ë–»ê²Œ ì±„ì›Œì§€ëŠ”ì§€ í™•ì¸í•´ë´…ì‹œë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">formatted_chat_prompt <span class=\"token operator\">=</span> chat_prompt<span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>\n    word_count<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n    conversation<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">(</span><span class=\"token string\">\"human\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ì˜¤ëŠ˜ ìƒˆë¡œ ì…ì‚¬í•œ í…Œë”” ì…ë‹ˆë‹¤. ë§Œë‚˜ì„œ ë°˜ê°‘ìŠµë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span><span class=\"token string\">\"ai\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ë°˜ê°€ì›Œìš”! ì•ìœ¼ë¡œ ì˜ ë¶€íƒ ë“œë¦½ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>formatted_chat_prompt<span class=\"token punctuation\">)</span>\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\nSystem: ë‹¹ì‹ ì€ ìš”ì•½ ì „ë¬¸ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì„ë¬´ëŠ” ì£¼ìš” í‚¤ì›Œë“œë¡œ ëŒ€í™”ë¥¼ ìš”ì•½í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\nHuman: ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ì˜¤ëŠ˜ ìƒˆë¡œ ì…ì‚¬í•œ í…Œë”” ì…ë‹ˆë‹¤. ë§Œë‚˜ì„œ ë°˜ê°‘ìŠµë‹ˆë‹¤.\nAI: ë°˜ê°€ì›Œìš”! ì•ìœ¼ë¡œ ì˜ ë¶€íƒ ë“œë¦½ë‹ˆë‹¤.\nHuman: ì§€ê¸ˆê¹Œì§€ì˜ ëŒ€í™”ë¥¼ 5 ë‹¨ì–´ë¡œ ìš”ì•½í•©ë‹ˆë‹¤.\n\"\"\"</span></code></pre></div>\n<p>ë‹¤ì‹œ chat_promptì„ ê°€ì§€ê³ , chainì„ ë§Œë“¤ê³  ì•„ë˜ì²˜ëŸ¼ invoke() í˜¸ì¶œí•˜ë©´<br><strong>ìœ„ì˜ formatìœ¼ë¡œ í™•ì¸í–ˆë˜ í”„ë¡¬í”„íŠ¸ê°€ LLMì—ê²Œ ë³´ë‚´ì–´ ì‘ë‹µê²°ê³¼ë¥¼ ë°›ì•„ì˜¤ê²Œ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">chain <span class=\"token operator\">=</span> chat_prompt <span class=\"token operator\">|</span> llm <span class=\"token operator\">|</span> StrOutputParser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nchain<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"word_count\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"conversation\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">(</span>\n                <span class=\"token string\">\"human\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ì˜¤ëŠ˜ ìƒˆë¡œ ì…ì‚¬í•œ í…Œë”” ì…ë‹ˆë‹¤. ë§Œë‚˜ì„œ ë°˜ê°‘ìŠµë‹ˆë‹¤.\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">(</span><span class=\"token string\">\"ai\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ë°˜ê°€ì›Œìš”! ì•ìœ¼ë¡œ ì˜ ë¶€íƒ ë“œë¦½ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># ì¶œë ¥: 'ìƒˆë¡œìš´ ì…ì‚¬, ë°˜ê°€ìš´ ë§Œë‚¨.'</span></code></pre></div>\n<p>LangSmithì—ì„œ ë³´ë©´,<br>ì•„ë˜ì²˜ëŸ¼ <code class=\"language-text\">MessagesPlaceholder()</code> ë¶€ë¶„ì— í”„ë¡¬í”„íŠ¸ê°€ ë¼ì›Œ ë“¤ì–´ê°„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 111.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB2klEQVQ4y51U25KaQBTkA5JdHRiuIggou4sFpYaqPOUxz3nOH+Rb8tGd6gNDkEVKfWimHIa2+/Q5Y+Xtb1x+/cXx/YC6OaNtv+N8blHXJzT1CbtsD3eXQ/sRbKVh2+48lJYzVvT+E28//uBQ5KiqBk1zxvHYCCHXNCug4wTaC6CUhrLdbh2j33PcAFYcBYh8jXRXoCw/4DierGma48vXFVYrG4ro1X0i62HeWVGUIAy3suG6AbT2ZSVITtjELasTWL4fic3tdnfz39VS7UYQhVSw2SSiaHpgUHinOlHIR1lWEkCeH5AkGbJsjzQtkCQ54jidJZ2qNr+F0PNCIaBKhrBeO7NYEaOA5hxZfEnL7L2iKBFFW6nnGFRp9pk+BUxTHwhNujxMuwQ/+o+sJ02QpF05GOScyitCWnp5WV/h9VWNLOvOdm/ZtJMzgVimJRMIVRmlLMVSi0zbalDImnRkHaGp3RLhzVD4UModbErKqrNnrD2CroZegP3+TVIOw/juyZhtbLKSxNRtnODSKN4aT8sMPhMdmvbBcftUQ6oyt0un7Dm7tnJhkehyaVFVtVxdz9bu6nJgqqwjCZdm9U5CT3rvdPomKbPJg2DzVDCDQg4+FRJs6DHhowr/ASWeLq97a5oEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"img 1\" title=\"img 1\" src=\"/static/009f09c2a1754d79ab91f9587fe4c240/37523/img_1.png\" srcset=\"/static/009f09c2a1754d79ab91f9587fe4c240/e9ff0/img_1.png 180w,\n/static/009f09c2a1754d79ab91f9587fe4c240/f21e7/img_1.png 360w,\n/static/009f09c2a1754d79ab91f9587fe4c240/37523/img_1.png 720w,\n/static/009f09c2a1754d79ab91f9587fe4c240/302a4/img_1.png 1080w,\n/static/009f09c2a1754d79ab91f9587fe4c240/fbf76/img_1.png 1252w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n</blockquote>\n<p>Â </p>\n<p>Â </p>\n<h3 id=\"prompttemplateì™€-chatprompttemplate-ì¥ë‹¨ì -ë¹„êµ\" style=\"position:relative;\"><a href=\"#prompttemplate%EC%99%80-chatprompttemplate-%EC%9E%A5%EB%8B%A8%EC%A0%90-%EB%B9%84%EA%B5%90\" aria-label=\"prompttemplateì™€ chatprompttemplate ì¥ë‹¨ì  ë¹„êµ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PromptTemplateì™€ ChatPromptTemplate ì¥ë‹¨ì  ë¹„êµ</h3>\n<table>\n<thead>\n<tr>\n<th>êµ¬ë¶„</th>\n<th><strong>PromptTemplate</strong></th>\n<th><strong>ChatPromptTemplate</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ê¸°ë³¸ ê°œë…</td>\n<td>ë‹¨ì¼ ë¬¸ìì—´ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿</td>\n<td>ì—­í• (role) ê¸°ë°˜ ë©”ì‹œì§€ í…œí”Œë¦¿</td>\n</tr>\n<tr>\n<td>ì¶œë ¥ í˜•íƒœ</td>\n<td><code class=\"language-text\">str</code></td>\n<td><code class=\"language-text\">List[BaseMessage]</code></td>\n</tr>\n<tr>\n<td>ëª¨ë¸ ì í•©ë„</td>\n<td>ì¼ë°˜ LLM / ë‹¨ë°œ ì§ˆë¬¸</td>\n<td><strong>Chat Modelì— ìµœì í™”</strong></td>\n</tr>\n<tr>\n<td>role êµ¬ë¶„</td>\n<td>âŒ ì—†ìŒ</td>\n<td><strong>â­• system / human / ai / tool</strong></td>\n</tr>\n<tr>\n<td>system ì§€ì¹¨ í‘œí˜„</td>\n<td>ë¬¸ìì—´ì— í¬í•¨</td>\n<td><strong>system ë©”ì‹œì§€ë¡œ ë¶„ë¦¬</strong></td>\n</tr>\n<tr>\n<td>few-shot ì˜ˆì‹œ</td>\n<td>ë¬¸ìì—´ë¡œ ì§ì ‘ ì‘ì„±</td>\n<td><strong>human/ai ë©”ì‹œì§€ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ í‘œí˜„</strong></td>\n</tr>\n<tr>\n<td>ëŒ€í™” íë¦„ í‘œí˜„</td>\n<td>ë¶ˆëª…í™•</td>\n<td><strong>ëª…ì‹œì  (ìˆœì„œÂ·ì—­í•  ê³ ì •)</strong></td>\n</tr>\n<tr>\n<td>ì´ì „ ëŒ€í™” ì‚½ì…</td>\n<td>ìˆ˜ë™ ë¬¸ìì—´ ì¡°í•©</td>\n<td><strong>MessagesPlaceholderë¡œ êµ¬ì¡°ì  ì‚½ì…</strong></td>\n</tr>\n<tr>\n<td>Memory ì—°ë™</td>\n<td>ë¶ˆí¸</td>\n<td><strong>ìì—°ìŠ¤ëŸ½ê³  ì•ˆì •ì </strong></td>\n</tr>\n<tr>\n<td>Tool / Function í˜¸ì¶œ</td>\n<td>ë¹„ì í•©</td>\n<td><strong>í•„ìˆ˜ êµ¬ì¡°</strong></td>\n</tr>\n<tr>\n<td>í”„ë¡¬í”„íŠ¸ ë””ë²„ê¹…</td>\n<td>ë‹¨ìˆœ</td>\n<td>êµ¬ì¡°ê°€ ë³µì¡</td>\n</tr>\n<tr>\n<td>í•™ìŠµ ê³¡ì„ </td>\n<td><strong>ë‚®ìŒ</strong></td>\n<td>ìƒëŒ€ì ìœ¼ë¡œ ë†’ìŒ</td>\n</tr>\n<tr>\n<td>ììœ ë„</td>\n<td><strong>ë†’ìŒ</strong></td>\n<td>êµ¬ì¡° ì œì•½ ìˆìŒ</td>\n</tr>\n</tbody>\n</table>\n<p>ì´ì •ë„ë¡œ ì •ë¦¬í•  ìˆ˜ ìˆë‹¤ê³  ìš°ë¦¬ì˜ GPT ë°•ì‚¬ë‹˜ì´ ì•Œë ¤ì¤¬ìŠµë‹ˆë‹¤.</p>\n<p>Â </p>\n<p>Â </p>\n<p>ì—¬ê¸°ì„œ ì¼ë‹¨ ë. ë‹¤ìŒ í¬ìŠ¤íŒ…ë„ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ì¼ ë“¯ í•©ë‹ˆë‹¤~</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#pydanticoutputparser\">PydanticOutputParser</a></p>\n<ul>\n<li><a href=\"#1-basemodel--field%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\">1) <code class=\"language-text\">BaseModel</code> / <code class=\"language-text\">Field</code>ëŠ” ë¬´ì—‡ì¸ê°€?</a></li>\n<li><a href=\"#2-partial_variables%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\">2) <code class=\"language-text\">partial_variables</code>ëŠ” ë¬´ì—‡ì¸ê°€?</a></li>\n<li><a href=\"#3-format_instructions%EB%8A%94-%EC%9B%90%EB%9E%98-%EC%9E%88%EB%8A%94-%EB%B3%80%EC%88%98%EC%9D%B8%EA%B0%80\">3) <code class=\"language-text\">format_instructions</code>ëŠ” ì›ë˜ ìˆëŠ” ë³€ìˆ˜ì¸ê°€?</a></li>\n<li><a href=\"#4-%ED%94%84%EB%A1%AC%ED%94%84%ED%8A%B8%EC%97%90-%EC%B6%9C%EB%A0%A5-%ED%8F%AC%EB%A7%B7%EC%9D%84-%EC%A0%95%ED%95%B4%EC%A4%80%EB%8B%A4%EA%B3%A0-%ED%98%95%EC%8B%9D%EC%9D%84-%EC%A0%95%ED%99%95%ED%9E%88-%EB%94%B0%EB%A5%B4%EB%8A%94%EA%B0%80\">4. í”„ë¡¬í”„íŠ¸ì— ì¶œë ¥ í¬ë§·ì„ ì •í•´ì¤€ë‹¤ê³  í˜•ì‹ì„ ì •í™•íˆ ë”°ë¥´ëŠ”ê°€?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#prompttemplate-%EB%8B%A8%EC%9D%BC-%EB%AC%B8%EC%9E%90%EC%97%B4-%ED%94%84%EB%A1%AC%ED%94%84%ED%8A%B8-%ED%85%9C%ED%94%8C%EB%A6%BF\">PromptTemplate: ë‹¨ì¼ ë¬¸ìì—´ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿</a></p>\n<ul>\n<li><a href=\"#prompt-%EC%83%9D%EC%84%B1\">Prompt ìƒì„±</a></li>\n<li><a href=\"#prompt-%EA%B4%80%EB%A6%AC\">Prompt ê´€ë¦¬</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#chatprompttemplate-%EB%8C%80%ED%99%94%EA%B8%B0%EB%A1%9D-%EC%A3%BC%EC%9E%85\">ChatPromptTemplate: ëŒ€í™”ê¸°ë¡ ì£¼ì…</a></p>\n<ul>\n<li><a href=\"#from_message-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%ED%85%9C%ED%94%8C%EB%A6%BF-%EA%B5%AC%EC%84%B1\">from_message ë©”ì„œë“œë¡œ í…œí”Œë¦¿ êµ¬ì„±</a></li>\n<li><a href=\"#prompttemplate%EC%99%80-chatprompttemplate-%EC%9E%A5%EB%8B%A8%EC%A0%90-%EB%B9%84%EA%B5%90\">PromptTemplateì™€ ChatPromptTemplate ì¥ë‹¨ì  ë¹„êµ</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"ì°¸ê³  : í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ (https://fastcampus.co.kr/data_online_teddy)ì†ŒìŠ¤ì½”ë“œ: https://github.com/teddylee777/langchain-krìœ„í‚¤ë…ìŠ¤: https://wikidocs.net/book/14314 Â  ì˜¤ëŠ˜ë„ ì‘ì„±í•˜ëŠ”ë° Pydantic íŒŒì‹± ë”°ë¡œ ê³µë¶€í•œ ê²ƒ ì¢€ ë„ì ì´ê³  ê°€ê² ìŠµë‹ˆë‹¤. ë ˆì¸ ê¸°ë¦¿! Â  PydanticOutputParser BaseModel/Field, partial_variables, ê²°ê³¼ í¬ë§· ì§€ì‹œì‚¬í•­, parser ë“±ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ì˜ˆì‹œë¡œ ë°”ë¡œ ë´…ì‹œë‹¤. 1)  / ëŠ” ë¬´ì—‡ì¸ê°€? : ìƒì†ë°›ëŠ” ë¶€ëª¨ ëª¨ë¸ (ì—¬ê¸°ì„œëŠ” pydantic ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ BaseModel ëª¨ë“ˆì„ ìƒì† ë°›ëŠ” ê²ƒì„) : ê° í•„ë“œì˜ ì˜ë¯¸/ì œì•½(ì„¤ëª…, ê¸°ë³¸ê°’ ë“±)ì„ ë¶™ì´ëŠ” ë©”íƒ€ë°ì´í„° LLMì—ê²Œ â€œì´ í•„ë“œëŠ” ì´ëŸ° ì˜ë¯¸â€ë¼ê³  ì•Œë ¤ì¤˜ì„œ ì¶œë ¥ í’ˆì§ˆì„ ì˜¬ë ¤ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë³´í†µ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•©ë‹ˆë‹¤. Â  2) ëŠ” ë¬´ì—‡ì¸ê°€? ë¯¸ë¦¬ í”„ë¡¬í”„íŠ¸ì—â€¦","frontmatter":{"date":"December 13, 2025","title":"[LLM] í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ ë„ì ë„ì -3","categories":"LLM","author":"ë³€ìš°ì¤‘","emoji":"â˜€ï¸"},"fields":{"slug":"/25-12-13_1/"}},"next":{"id":"16028044-feb8-52fb-8dfc-47bb74183808","html":"<p>ì°¸ê³  : í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ (<a href=\"https://fastcampus.co.kr/data_online_teddy)\">https://fastcampus.co.kr/data_online_teddy)</a><br>ì†ŒìŠ¤ì½”ë“œ: <a href=\"https://github.com/teddylee777/langchain-kr\">https://github.com/teddylee777/langchain-kr</a><br>ìœ„í‚¤ë…ìŠ¤: <a href=\"https://wikidocs.net/book/14314\">https://wikidocs.net/book/14314</a></p>\n<p>Â </p>\n<p>ì˜¤ëŠ˜ë„ ê°€ì¦ˆì•„..!!!!\nìƒˆë¡œìš´ ê±¸ ì•Œì•„ê°€ëŠ” ê±´ ì •ë§ ì¦ê²ë‹¤~ ë‹¤ë§Œ ì•Œê²Œëœ ê²ƒì„ {ì •ë¦¬}í•˜ëŠ” ê²ƒì€ ë³„ê°œì¼ ë¿â€¦ Oâ€”&#x3C;</p>\n<p>ê±°ë‘ì ˆë¯¸. ë ˆì¸ ê³ ~!</p>\n<p>Â </p>\n<h2 id=\"lcel-ì¸í„°í˜ì´ìŠ¤\" style=\"position:relative;\"><a href=\"#lcel-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4\" aria-label=\"lcel ì¸í„°í˜ì´ìŠ¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LCEL ì¸í„°í˜ì´ìŠ¤</h2>\n<hr>\n<p>ì§€ë‚œ ê¸€ì—ì„œëŠ” <code class=\"language-text\">invoke()</code>, <code class=\"language-text\">stream()</code> ë©”ì„œë“œë¥¼ ì‚´í´ë´¤ëŠ”ë°\nì‚¬ì‹¤ <code class=\"language-text\">batch()</code> ë©”ì„œë“œë„ ìˆë‹¤.</p>\n<h4 id=\"batch-ë°°ì¹˜-ì²˜ë¦¬\" style=\"position:relative;\"><a href=\"#batch-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC\" aria-label=\"batch ë°°ì¹˜ ì²˜ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>batch(): ë°°ì¹˜ ì²˜ë¦¬</h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_openai <span class=\"token keyword\">import</span> ChatOpenAI\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>prompts <span class=\"token keyword\">import</span> PromptTemplate\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>output_parsers <span class=\"token keyword\">import</span> StrOutputParser\n\nmodel <span class=\"token operator\">=</span> ChatOpenAI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nprompt <span class=\"token operator\">=</span> PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"{topic}ì— ëŒ€í•˜ì—¬ 3ë¬¸ì¥ìœ¼ë¡œ ì„¤ëª…í•´ì¤˜.\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># í”„ë¡¬í”„íŠ¸ì™€ ëª¨ë¸ì„ ì—°ê²°í•˜ì—¬ ëŒ€í™” ì²´ì¸ì„ ìƒì„±í•©ë‹ˆë‹¤.</span>\nchain <span class=\"token operator\">=</span> prompt <span class=\"token operator\">|</span> model <span class=\"token operator\">|</span> StrOutputParser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nchain<span class=\"token punctuation\">.</span>batch<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ChatGPT\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Instagram\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># ì¶œë ¥: ['ChatGPTëŠ” ìì—°ì–´ ì²˜ë¦¬ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ëŒê³¼ì˜ ëŒ€í™”ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” ì¸ê³µì§€ëŠ¥ ì±—ë´‡ì´ë‹¤. ìµœì‹ ì˜ ë”¥ëŸ¬ë‹ ëª¨ë¸ì„ ë°”íƒ•ìœ¼ë¡œ í•™ìŠµí•˜ë©° ì‚¬ìš©ìì˜ ì§ˆë¬¸ì— ëŒ€ë‹µí•˜ê³  ë‹¤ì–‘í•œ ì£¼ì œì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•œë‹¤. ì‚¬ìš©ìì™€ ìì—°ìŠ¤ëŸ½ê²Œ ìƒí˜¸ì‘ìš©í•˜ë©´ì„œ í•™ìŠµê³¼ ì—…ë°ì´íŠ¸ë¥¼ ê±°ì³ ë³´ë‹¤ ì •í™•í•˜ê³  ìœ ìš©í•œ ì‘ë‹µì„ ì œê³µí•œë‹¤.', 'Instagramì€ ì‚¬ì§„ê³¼ ë™ì˜ìƒì„ ê³µìœ í•˜ê³  ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ê³¼ ì†Œí†µí•  ìˆ˜ ìˆëŠ” ì†Œì…œ ë¯¸ë””ì–´ í”Œë«í¼ì´ë‹¤. ì¸ìŠ¤íƒ€ê·¸ë¨ì€ íœ´ëŒ€í° ì•±ì„ í†µí•´ ì´ìš©ë˜ë©°, ë‹¤ì–‘í•œ í•„í„°ì™€ íš¨ê³¼ë¥¼ í†µí•´ ì‚¬ì§„ì„ ê°€ê³µí•˜ê³  ì„¸ë ¨ëœ í”„ë¡œí•„ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ë˜í•œ í•´ì‹œíƒœê·¸ë¥¼ í†µí•´ ë‹¤ì–‘í•œ ì£¼ì œì™€ ê´€ì‹¬ì‚¬ì— ë§ëŠ” ì½˜í…ì¸ ë¥¼ ê²€ìƒ‰í•˜ê³  ì†Œí†µí•  ìˆ˜ ìˆë‹¤.']</span></code></pre></div>\n<p>ë¦¬ìŠ¤íŠ¸ì— input_variablesì˜ ê°’ë“¤ì„ ê°–ëŠ” ë”•ì…”ë„ˆë¦¬ë¥¼ ëª¨ì•„ì„œ ê°ê° ë°°ì¹˜ë¡œ chainì— ë˜ì§„ë‹¤.<br>\n<strong>modelì„ ê±°ì¹˜ê³  íŒŒì‹±ì„ ê±°ì¹˜ë©´ì„œ ê° ë°°ì¹˜ ê²°ê³¼ì˜ contentë“¤ì„ ë¦¬ìŠ¤íŠ¸ì— ë¬¶ì–´ì„œ ì €ì¥ëœë‹¤.</strong></p>\n<p>ì°¸ê³ ë¡œ config ë”•ì…”ë„ˆë¦¬ì—ì„œ max_concurrency í‚¤ì˜ ê°’ì„ ì„¤ì •í•˜ì—¬ ë™ì‹œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ ì‘ì—… ìˆ˜ë¥¼ ì •í•´ì¤„ ìˆ˜ ìˆë‹¤. ì¦‰, í•œë²ˆì— ë°°ì¹˜ë¥¼ ì—¬ëŸ¬ ê°œ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆê³  ê²°ê³¼ëŠ” ë˜‘ê°™ì´ ëª¨ë“  ë°°ì¹˜ë¥¼ ë¬¶ì–´ì„œ ì •ë¦¬ë˜ì–´ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">chain<span class=\"token punctuation\">.</span>batch<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ChatGPT\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Instagram\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ë©€í‹°ëª¨ë‹¬\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"í”„ë¡œê·¸ë˜ë°\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ë¨¸ì‹ ëŸ¬ë‹\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    config<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"max_concurrency\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Â </p>\n<h3 id=\"ë¹„ë™ê¸°-ë©”ì†Œë“œ\" style=\"position:relative;\"><a href=\"#%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%A9%94%EC%86%8C%EB%93%9C\" aria-label=\"ë¹„ë™ê¸° ë©”ì†Œë“œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¹„ë™ê¸° ë©”ì†Œë“œ</h3>\n<p>ì–´ë–¤ ì‘ì—…ì„ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ì‘ì—…ë„ í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ë¹„ë™ê¸°ë¼ê³  í•œë‹¤.</p>\n<p>async í‚¤ì›Œë“œ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸° ìŠ¤íŠ¸ë¦¼, í˜¸ì¶œ, ë°°ì¹˜ ê°€ëŠ¥í•˜ë‹¤.</p>\n<h4 id=\"1-ë¹„ë™ê¸°-ìŠ¤íŠ¸ë¦¼-async-for-astream\" style=\"position:relative;\"><a href=\"#1-%EB%B9%84%EB%8F%99%EA%B8%B0-%EC%8A%A4%ED%8A%B8%EB%A6%BC-async-for-astream\" aria-label=\"1 ë¹„ë™ê¸° ìŠ¤íŠ¸ë¦¼ async for astream permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. ë¹„ë™ê¸° ìŠ¤íŠ¸ë¦¼: async for, astream()</h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">for</span> token <span class=\"token keyword\">in</span> chain<span class=\"token punctuation\">.</span>astream<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Youtube\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">,</span> end<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> flush<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"2-ë¹„ë™ê¸°-í˜¸ì¶œ-ainvoke\" style=\"position:relative;\"><a href=\"#2-%EB%B9%84%EB%8F%99%EA%B8%B0-%ED%98%B8%EC%B6%9C-ainvoke\" aria-label=\"2 ë¹„ë™ê¸° í˜¸ì¶œ ainvoke permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. ë¹„ë™ê¸° í˜¸ì¶œ: ainvoke()</h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ë¹„ë™ê¸° í˜¸ì¶œ ì²´ì¸ ê°ì²´ ìƒì„±</span>\nmy_process <span class=\"token operator\">=</span> chain<span class=\"token punctuation\">.</span>ainvoke<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Youtube\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬í•˜ë©° í”„ë¡œì„¸ìŠ¤ ì™„ë£Œ í›„ ì¶œë ¥ë¨</span>\n<span class=\"token keyword\">await</span> my_process</code></pre></div>\n<p><strong>ainvokeëŠ” ë¹„ë™ê¸° ì²´ì¸ ê°ì²´ ìƒì„± í›„, await í‚¤ì›Œë“œ í˜¸ì¶œë¡œ ë‹µë³€ì„ ìƒì„±í•œë‹¤.</strong></p>\n<h4 id=\"3-ë¹„ë™ê¸°-ë°°ì¹˜-abatch\" style=\"position:relative;\"><a href=\"#3-%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%B0%B0%EC%B9%98-abatch\" aria-label=\"3 ë¹„ë™ê¸° ë°°ì¹˜ abatch permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. ë¹„ë™ê¸° ë°°ì¹˜: abatch()</h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ë¹„ë™ê¸° ë°°ì¹˜ ì²´ì¸ ê°ì²´ ìƒì„±</span>\nmy_abatch_process <span class=\"token operator\">=</span> chain<span class=\"token punctuation\">.</span>abatch<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"YouTube\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Instagram\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Facebook\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ë¹„ë™ê¸°ì ìœ¼ë¡œ ë°°ì¹˜ë¥¼ ì¼ê´„ ì²˜ë¦¬í•˜ë©° í”„ë¡œì„¸ìŠ¤ ì™„ë£Œ í›„ </span>\n<span class=\"token keyword\">await</span> my_abatch_process\n<span class=\"token triple-quoted-string string\">\"\"\" ì¶œë ¥:\n['YouTubeëŠ” ì˜¨ë¼ì¸ ë™ì˜ìƒ ê³µìœ  í”Œë«í¼ìœ¼ë¡œ, ì‚¬ìš©ìë“¤ì´ ë™ì˜ìƒì„ ì—…ë¡œë“œí•˜ê³  ì‹œì²­í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ì´ë‹¤. ë¨¹ë°©, ê²Œì„ í”Œë ˆì´, ë·°í‹° ê´€ë ¨ ì½˜í…ì¸  ë“± ë‹¤ì–‘í•œ ì£¼ì œì˜ ë™ì˜ìƒì„ ì œê³µí•˜ë©°, ìˆ˜ë§ì€ ìœ ì €ë“¤ì´ ì´ìš©í•˜ê³  ìˆë‹¤. ìœ ëª… ì¸í”Œë£¨ì–¸ì„œë‚˜ í¬ë¦¬ì—ì´í„°ë“¤ì´ YouTubeë¥¼ í†µí•´ ìˆ˜ìµì„ ì°½ì¶œí•˜ê³ , ì „ ì„¸ê³„ì ìœ¼ë¡œ ì¸ê¸°ë¥¼ ëŒê³  ìˆë‹¤.',\n 'ì¸ìŠ¤íƒ€ê·¸ë¨ì€ ì‚¬ì§„ê³¼ ë™ì˜ìƒì„ ê³µìœ í•  ìˆ˜ ìˆëŠ” ì†Œì…œë¯¸ë””ì–´ í”Œë«í¼ì´ë‹¤. ì‚¬ìš©ìë“¤ì€ íŒ”ë¡œì›Œë“¤ê³¼ ì†Œí†µí•˜ë©° ì¼ìƒ ì†ì˜ ìˆœê°„ë“¤ì„ ê³µìœ í•  ìˆ˜ ìˆë‹¤. ë˜í•œ í•´ì‹œíƒœê·¸ë¥¼ í†µí•´ ê´€ì‹¬ì‚¬ë‚˜ ì£¼ì œì— ë§ëŠ” ì½˜í…ì¸ ë¥¼ ì°¾ì„ ìˆ˜ë„ ìˆë‹¤.',\n 'Facebookì€ ì†Œì…œ ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ë¡œ, ì‚¬ìš©ìë“¤ì´ ê¸€ì„ ê²Œì‹œí•˜ê³  ì‚¬ì§„ì´ë‚˜ ë™ì˜ìƒì„ ê³µìœ í•  ìˆ˜ ìˆëŠ” í”Œë«í¼ì…ë‹ˆë‹¤. ì „ ì„¸ê³„ì ìœ¼ë¡œ ë§ì€ ì‚¬ëŒë“¤ì´ ê°€ì…í•´ ì‚¬ìš©í•˜ë©°, ì¹œêµ¬ë“¤ì´ë‚˜ ê°€ì¡±ê³¼ ì†Œí†µí•˜ê³  ì†Œì…œ ë¯¸ë””ì–´ë¥¼ í†µí•´ ì •ë³´ë¥¼ ê³µìœ í•©ë‹ˆë‹¤. ë˜í•œ ê´‘ê³ ë„ í™œë°œíˆ ì§„í–‰ë˜ì–´ ìƒí’ˆì´ë‚˜ ì„œë¹„ìŠ¤ë¥¼ í™ë³´í•˜ëŠ”ë° ì´ìš©ë©ë‹ˆë‹¤.']\n\"\"\"</span></code></pre></div>\n<p><strong>ë¹„ë™ê¸°ì ìœ¼ë¡œ ê° ë°°ì¹˜ë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë™ì‹œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©°, í”„ë¡œì„¸ìŠ¤ ì™„ë£Œ í›„ ë¦¬ìŠ¤íŠ¸ë¡œ ì¶œë ¥í•œë‹¤.</strong><br>ì´ë•Œ, ê²°ê³¼ëŠ” ë±‰ì–´ ë‚´ê³  ì–´ë””ì— ì €ì¥ì´ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤!!</p>\n<blockquote>\n<h3 id=\"ê¹¨ì•Œ-tip\" style=\"position:relative;\"><a href=\"#%EA%B9%A8%EC%95%8C-tip\" aria-label=\"ê¹¨ì•Œ tip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’¡ê¹¨ì•Œ Tip</h3>\n<p>ê·¸ë˜ì„œ!! â€˜ë³€ìˆ˜ = await ë¹„ë™ê¸° ë°°ì¹˜ ì²´ì¸ ê°ì²´â€™ë¡œ ê²°ê³¼ë¥¼ ë°›ì•„ ë†“ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">my_abatch_process <span class=\"token operator\">=</span> chain<span class=\"token punctuation\">.</span>abatch<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"YouTube\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Instagram\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"topic\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Facebook\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span>\n\nresult <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> my_abatch_process\nresult</code></pre></div>\n</blockquote>\n<p>Â </p>\n<p>Â </p>\n<h2 id=\"runnable-interface\" style=\"position:relative;\"><a href=\"#runnable-interface\" aria-label=\"runnable interface permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Runnable Interface</h2>\n<hr>\n<p><strong>Runnable</strong>ì€ ì±„íŒ… ëª¨ë¸, LLM, í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿, ì¶œë ¥ íŒŒì„œ, ê²€ìƒ‰ê¸° ë“± <strong>ì…ë ¥ì„ ë°›ì•„ ì‹¤í–‰ ê°€ëŠ¥í•œ LangChainì˜ ê¸°ë³¸ êµ¬ì„±ìš”ì†Œ</strong>ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.</p>\n<p>ì´ëŸ¬í•œ Runnableë“¤ì„ ìˆœì°¨ ë˜ëŠ” ë³‘ë ¬ë¡œ ì—°ê²°í•´ í•˜ë‚˜ì˜ ì‹¤í–‰ íë¦„ìœ¼ë¡œ êµ¬ì„±í•œ ê²ƒì„ <strong>Chain</strong>ì´ë¼ê³  í•©ë‹ˆë‹¤.</p>\n<p>Â </p>\n<h3 id=\"runnable-í”„ë¡œí† ì½œ\" style=\"position:relative;\"><a href=\"#runnable-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C\" aria-label=\"runnable í”„ë¡œí† ì½œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Runnable í”„ë¡œí† ì½œ</h3>\n<p><strong>Runnable í”„ë¡œí† ì½œ</strong>ì€<br>\nLangChainì—ì„œ **ëª¨ë“  ì‹¤í–‰ ê°€ëŠ¥í•œ êµ¬ì„±ìš”ì†Œê°€ ë”°ë¼ì•¼ í•˜ëŠ” ê³µí†µ ì‹¤í–‰ ê·œì•½(interface)**ì…ë‹ˆë‹¤.</p>\n<blockquote>\n<p>ì¦‰,\n<strong>â€œì…ë ¥ì„ ë°›ì•„ ì‹¤í–‰í•˜ê³ , ì¶œë ¥ì„ ë°˜í™˜í•˜ëŠ” ë°©ë²•ì„ í‘œì¤€í™”í•œ ì•½ì†â€</strong></p>\n</blockquote>\n<p>Â </p>\n<p>LangChainì— ì„œë¡œ ì„±ê²©ì´ ì™„ì „íˆ ë‹¤ë¥¸ êµ¬ì„±ìš”ì†Œë“¤ì´</p>\n<ol>\n<li>ì‹¤í–‰ ë°©ì‹ì´ í†µì¼ë˜ì–´ì•¼ í•˜ê³ </li>\n<li>ì…ë ¥/ì¶œë ¥ íë¦„ì´ ì˜ˆì¸¡ ê°€ëŠ¥í•´ì•¼ í•˜ë¯€ë¡œ</li>\n</ol>\n<p><strong>Runnable í”„ë¡œí† ì½œ</strong>ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>\n<p>Runnable í”„ë¡œí† ì½œ ë•ë¶„ì— <strong>ê°ì²´ë“¤ì€ ëª¨ë‘ ë™ì¼í•œ ì‹¤í–‰ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°€ì§‘ë‹ˆë‹¤.</strong></p>\n<table>\n<thead>\n<tr>\n<th>ë©”ì„œë“œ</th>\n<th>ì˜ë¯¸</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">invoke(input)</code></td>\n<td>ë‹¨ì¼ ì…ë ¥ â†’ ë‹¨ì¼ ì¶œë ¥</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">batch(inputs)</code></td>\n<td>ì—¬ëŸ¬ ì…ë ¥ â†’ ì—¬ëŸ¬ ì¶œë ¥</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">stream(input)</code></td>\n<td>ì¶œë ¥ ìŠ¤íŠ¸ë¦¬ë°</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">astream(input)</code></td>\n<td>ë¹„ë™ê¸° ìŠ¤íŠ¸ë¦¬ë°</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">ainvoke(input)</code></td>\n<td>ë¹„ë™ê¸° ì‹¤í–‰</td>\n</tr>\n</tbody>\n</table>\n<p>Â </p>\n<p>ì¦‰,</p>\n<p><strong>LLMë„ Runnable</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">llm<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token string\">\"2+3ì€?\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>PromptTemplateë„ Runnable</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">prompt<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"question\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2+3ì€?\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>Retrieverë„ Runnable</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">retriever<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token string\">\"2+3\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ì „ë¶€ <code class=\"language-text\">invoke()</code>ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤ëŠ” ë§ì…ë‹ˆë‹¤.</p>\n<p>ì°¸ê³ ë¡œ Chainë„ ê·¸ ìì²´ê°€ Runnableì´ë¼ ë™ì¼í•œ ì‹¤í–‰ ì¸í„°í˜ì´ìŠ¤ë¡œ í˜¸ì¶œ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ì‰¿ğŸ¤« Chainì´ë¼ëŠ” Runnableì„ ë³‘ë ¬ë¡œ ì—°ê²° ê°€ëŠ¥í•œë°, ê·¸ê²ƒë„ ê°€ëŠ¥í•¨~)</p>\n<p>Â </p>\n<p>ê²°êµ­, Runnableì˜ í•µì‹¬ ì² í•™ì€</p>\n<blockquote>\n<p>â€œë¬´ì—‡ì„ í•˜ëŠ”ê°€â€ê°€ ì•„ë‹ˆë¼\nâ€œì–´ë–»ê²Œ ì‹¤í–‰ë˜ëŠ”ê°€â€ë¥¼ í†µì¼í•œë‹¤</p>\n</blockquote>\n<p>Â </p>\n<p>ì´í•´ ì™„.ğŸ§âœ¨</p>\n<p>Â </p>\n<p>Â </p>\n<h3 id=\"ë°ì´í„°-ì „ë‹¬-ë°©ë²•\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%84%EB%8B%AC-%EB%B0%A9%EB%B2%95\" aria-label=\"ë°ì´í„° ì „ë‹¬ ë°©ë²• permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë°ì´í„° ì „ë‹¬ ë°©ë²•</h3>\n<p>LangChainì—ì„œ Runnableë“¤ì„ ì—°ê²°í•  ë•ŒëŠ”</p>\n<ul>\n<li>ì• Runnableì˜ <strong>ì¶œë ¥ í˜•íƒœ</strong></li>\n<li>ë‹¤ìŒ Runnableì´ <strong>ê¸°ëŒ€í•˜ëŠ” ì…ë ¥ í˜•íƒœ</strong></li>\n</ul>\n<p>ë¥¼ ë§ì¶°ì•¼ í•˜ê³ , ì´ë¥¼ ìœ„í•´ <strong>ë°ì´í„°ë¥¼ ì „ë‹¬Â·ë³€í˜•í•˜ëŠ” ì—¬ëŸ¬ ë°©ë²•</strong>ì´ ì¡´ì¬í•©ë‹ˆë‹¤.</p>\n<p>Â </p>\n<h4 id=\"1-ê°’-ì „ë‹¬-runnablepassthrough\" style=\"position:relative;\"><a href=\"#1-%EA%B0%92-%EC%A0%84%EB%8B%AC-runnablepassthrough\" aria-label=\"1 ê°’ ì „ë‹¬ runnablepassthrough permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. ê°’ ì „ë‹¬: RunnablePassthrough</h4>\n<p>RunnablePassthroughëŠ” ê°’ì„ ê·¸ëŒ€ë¡œ ì „ë‹¬í•´ì£¼ëŠ” ì¹œêµ¬ì…ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>runnables <span class=\"token keyword\">import</span> RunnablePassthrough\n\nRunnablePassthrough<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"num\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># ì¶œë ¥: {\"num\": 10}</span></code></pre></div>\n<p>ì´ë ‡ê²Œ RunnablePassthrough()ì—ì„œ invoke ë©”ì„œë“œ í˜¸ì¶œí•˜ë©´ ì…ë ¥ê°’ ê·¸ëŒ€ë¡œ ì¶œë ¥ë©ë‹ˆë‹¤.<br>ì¼ë°˜ì ìœ¼ë¡œ invoke() í†µí•´ Runnable ì‹¤í–‰í•  ë•ŒëŠ” ì‚¬ìš©ì ì…ë ¥ì€ <strong>ë”•ì…”ë„ˆë¦¬ í˜•íƒœ</strong>ë¡œ ì „ë‹¬í•˜ì–ì•„ìš”?</p>\n<p><strong>ì‚¬ìš©ì ì…ë ¥ì„ ë”•ì…”ë„ˆë¦¬ê°€ ì•„ë‹Œ â€˜ì…ë ¥ ë³€ìˆ˜ì˜ ê°’â€™ë§Œ ë°›ê³ , RunnablePassthroughë¥¼ í†µí•´ì„œ chain ë‚´ë¶€ì—ì„œ ì…ë ¥(ë”•ì…”ë„ˆë¦¬ í˜•íƒœ) í‚¤ì˜ ê°’ìœ¼ë¡œ ê³§ë°”ë¡œ ë„£ì–´ì¤„ ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># chainì— ë”•ì…”ë„ˆë¦¬ {ì…ë ¥ ë³€ìˆ˜ëª…: RunnablePassthrough()}ë¥¼ ë„£ê³  ì—°ê²°í•´ì¤Œ</span>\nrunnable_chain <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"num\"</span><span class=\"token punctuation\">:</span> RunnablePassthrough<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">|</span> prompt <span class=\"token operator\">|</span> ChatOpenAI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ì‚¬ìš©ì ì…ë ¥ì€ ì…ë ¥ ë³€ìˆ˜ì˜ 'ê°’'ë§Œ ë°›ìŒ</span>\nrunnable_chain<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>ê·¸ëŸ¼ ì´ê²ƒì˜ ì¥ì ì´ ë­ëƒ?</strong><br><strong>=> ì²´ì¸ ì„¤ê³„í•  ë•Œ  ë”•ì…”ë„ˆë¦¬ í˜•íƒœë¡œ ë³€ìˆ˜ë¥¼ ë¯¸ë¦¬ ë‹¤ ë„£ì–´ ë‘ê³ , ì…ë ¥ ë³€ìˆ˜ ë„£ê³  í˜¸ì¶œí•  ë•ŒëŠ” ë³€ìˆ˜ëª… ê¸°ì–µ ëª»í•´ë„ ê°’ë§Œ ë„£ì„ ìˆ˜ ìˆìŒ!!</strong></p>\n<blockquote>\n<h3 id=\"ê¹¨ì•Œ-tip-1\" style=\"position:relative;\"><a href=\"#%EA%B9%A8%EC%95%8C-tip-1\" aria-label=\"ê¹¨ì•Œ tip 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’¡ê¹¨ì•Œ Tip</h3>\n<p><strong>RunnablePassthrough.assign</strong>()ì„ ì´ìš©í•´ì„œ RunnablePassthroughì˜ <strong>ì…ë ¥ key/valu</strong>eì™€ <strong>ìƒˆë¡­ê²Œ í• ë‹¹í•  key/valueë¥¼ í†µí•©í•  ìˆ˜ ìˆë‹¤.</strong><br>\n=> <strong>RunnablePassthrough.assign(ìƒˆë¡­ê²Œ í• ë‹¹í•  keyì´ë¦„=Runnable/lambda í•¨ìˆ˜).invoke({ì…ë ¥ key: value})ì„ ì´ìš©í•˜ë©´ ëœë‹¤.</strong></p>\n<p><strong>ì¦‰, ì…ë ¥ì€ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜¤ë©´ì„œ assignì„ í†µí•´ ìƒˆë¡œìš´ key/valueë„ ê°€ì ¸ì™€ ì¶œë ¥í•œë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># \"RunnablePassthrough.assign(new_num=lambda x: x[\"num\"] * 3)\"ì— ì…ë ¥ {\"num\": 1}ì„ ë„£ìŒ</span>\n<span class=\"token comment\"># ì…ë ¥ {\"num\": 1} ìì²´ê°€ xë¡œ ë“¤ì–´ê° (x={\"num\": 1})</span>\n<span class=\"token comment\"># x[\"num\"] * 3 ê²°ê³¼ë¥¼ new_num í‚¤ì˜ ê°’ì— ë„£ì–´ ìƒˆë¡œìš´ key/value ë§Œë“¦</span>\n<span class=\"token comment\"># ì…ë ¥ì€ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜¤ë©´ì„œ assignì„ í†µí•´ ìƒˆë¡œìš´ key/valueë„ ê°€ì ¸ì™€ ì¶œë ¥í•œë‹¤.</span>\n<span class=\"token punctuation\">(</span>RunnablePassthrough<span class=\"token punctuation\">.</span>assign<span class=\"token punctuation\">(</span>new_num<span class=\"token operator\">=</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">[</span><span class=\"token string\">\"num\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"num\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># ì¶œë ¥: {'num': 1, 'new_num': 3}</span></code></pre></div>\n</blockquote>\n<p>Â </p>\n<h3 id=\"2-runnable-ë³‘ë ¬-ì—°ê²°-runnableparallel\" style=\"position:relative;\"><a href=\"#2-runnable-%EB%B3%91%EB%A0%AC-%EC%97%B0%EA%B2%B0-runnableparallel\" aria-label=\"2 runnable ë³‘ë ¬ ì—°ê²° runnableparallel permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Runnable ë³‘ë ¬ ì—°ê²°: RunnableParallel</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>runnables <span class=\"token keyword\">import</span> RunnableParallel\n<span class=\"token keyword\">from</span> langchain_openai <span class=\"token keyword\">import</span> ChatOpenAI\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>prompts <span class=\"token keyword\">import</span> PromptTemplate\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>output_parsers <span class=\"token keyword\">import</span> StrOutputParser\n\nmodel <span class=\"token operator\">=</span> ChatOpenAI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># {country} ì˜ ìˆ˜ë„ë¥¼ ë¬¼ì–´ë³´ëŠ” ì²´ì¸ì„ ìƒì„±í•©ë‹ˆë‹¤.</span>\nchain1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"{country} ì˜ ìˆ˜ë„ëŠ” ì–´ë””ì•¼?\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">|</span> model\n    <span class=\"token operator\">|</span> StrOutputParser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># {country} ì˜ ë©´ì ì„ ë¬¼ì–´ë³´ëŠ” ì²´ì¸ì„ ìƒì„±í•©ë‹ˆë‹¤.</span>\nchain2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"{country} ì˜ ë©´ì ì€ ì–¼ë§ˆì•¼?\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">|</span> model\n    <span class=\"token operator\">|</span> StrOutputParser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ìœ„ì˜ 2ê°œ ì²´ì¸ì„ ë™ì‹œì— ìƒì„±í•˜ëŠ” ë³‘ë ¬ ì‹¤í–‰ ì²´ì¸ì„ ìƒì„±í•©ë‹ˆë‹¤.</span>\ncombined <span class=\"token operator\">=</span> RunnableParallel<span class=\"token punctuation\">(</span>capital<span class=\"token operator\">=</span>chain1<span class=\"token punctuation\">,</span> area<span class=\"token operator\">=</span>chain2<span class=\"token punctuation\">)</span>\ncombined<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"country\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ëŒ€í•œë¯¼êµ­\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># ì¶œë ¥: {'capital': 'ëŒ€í•œë¯¼êµ­ì˜ ìˆ˜ë„ëŠ” ì„œìš¸ì´ì—ìš”.', 'area': 'ëŒ€í•œë¯¼êµ­ì˜ ì´ ë©´ì ì€ ì•½ 100,363kmÂ² ì…ë‹ˆë‹¤.'}</span></code></pre></div>\n<p>ê° chain ê°ì²´ë¥¼ ìƒì„±í•œ í›„,<br><strong>RunnableParallelë¥¼ ì´ìš©í•´ chainë“¤ì„ ë™ì‹œì— ì‹¤í–‰í•˜ëŠ” ë³‘ë ¬ ì‹¤í–‰ ì²´ì¸ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong> (ì •í™•íˆ ë§í•˜ë©´ Runnableì¸ chain ê°ì²´ë¥¼ ë³‘ë ¬ ì—°ê²° ê°€ëŠ¥í•©ë‹ˆë‹¤.)</p>\n<p>ê·¸ë¦¬ê³ ,<br><strong>RunnableParallel ì•ˆì— capitalê³¼ areaëŠ” ê° ì²´ì¸ì˜ ì‘ë‹µ ê²°ê³¼ë¥¼ ë°›ëŠ” ë³€ìˆ˜ëª…ì…ë‹ˆë‹¤.</strong> <strong>ê·¸ capitalê³¼ areaì„ í‚¤ë¡œ ê°–ëŠ” ë”•ì…”ë„ˆë¦¬ í˜•íƒœë¡œ ìµœì¢… ê²°ê³¼ë¥¼ ë‚´ì–´ ì¤ë‹ˆë‹¤.</strong> (ì´ë ‡ê²Œ ì²´ì¸ ê°„ ë°ì´í„° ì „ë‹¬ë„ ê°€ëŠ¥í•œ ê²ë‹ˆë‹¤~)</p>\n<p>ê²°ê³¼ë¥¼ ë³´ë©´,<br>ê° ì²´ì¸ì„ <strong>ë³‘ë ¬ë¡œ ì‹¤í–‰í•œ í›„, ê° ì‘ë‹µ ê²°ê³¼ë¥¼ capitalê³¼ areaì˜ í‚¤ì˜ ê°’ìœ¼ë¡œ ë„£ì–´ ë”•ì…”ë„ˆë¦¬ë¥¼ ë°˜í™˜</strong>í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<h3 id=\"ê¹¨ì•Œ-tip-2\" style=\"position:relative;\"><a href=\"#%EA%B9%A8%EC%95%8C-tip-2\" aria-label=\"ê¹¨ì•Œ tip 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’¡ê¹¨ì•Œ Tip</h3>\n<p><strong>Q1. ë³‘ë ¬ë¡œ ì—°ê²°í•œ Chainë“¤ì˜ input_variablesì´ ë‹¤ë¥´ë‹¤ë©´?</strong><br>\n=> í˜¸ì¶œ ë©”ì„œë“œ(ì—¬ê¸°ì„œ invoke)ì˜ ì…ë ¥ê°’ì— <strong>í•˜ë‚˜ì˜ ë”•ì…”ë„ˆë¦¬ì— input_variables ê°’ë“¤ì„ ëª¨ë‘ ë„£ì–´ì£¼ë©´ ëœë‹¤!!</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># input_variables: country2</span>\nchain1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"{country1} ì˜ ìˆ˜ë„ëŠ” ì–´ë””ì•¼?\"</span><span class=\"token punctuation\">)</span>\n <span class=\"token operator\">|</span> model\n <span class=\"token operator\">|</span> StrOutputParser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># input_variables: country2</span>\nchain2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"{country2} ì˜ ë©´ì ì€ ì–¼ë§ˆì•¼?\"</span><span class=\"token punctuation\">)</span>\n <span class=\"token operator\">|</span> model\n <span class=\"token operator\">|</span> StrOutputParser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n\ncombined <span class=\"token operator\">=</span> RunnableParallel<span class=\"token punctuation\">(</span>capital<span class=\"token operator\">=</span>chain1<span class=\"token punctuation\">,</span> area<span class=\"token operator\">=</span>chain2<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># â­ï¸ í•˜ë‚˜ì˜ ë”•ì…”ë„ˆë¦¬ì— input_variables ê°’ì„ ë„£ì–´ì¤Œ â­ï¸</span>\ncombined<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"country1\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ëŒ€í•œë¯¼êµ­\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"country2\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ë¯¸êµ­\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Â </p>\n<p><strong>Q2. ë³‘ë ¬ë¡œ ë¬¶ì€ Chainë“¤ì„ ë°°ì¹˜ ê°€ëŠ¥í•œê°€?</strong><br>\n=> <del>ìŒ‰ê°€ëŠ¥</del> ë§¤ìš° ê°€ëŠ¥. <strong>RunnableParallel() ê°ì²´ ë˜í•œ Runnableì´ê¸° ë•Œë¬¸ì— ë™ì¼í•œ batch ì‹¤í–‰ ì¸í„°í˜ì´ìŠ¤ë¡œ í˜¸ì¶œ ê°€ëŠ¥í•©ë‹ˆë‹¤ìš”.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># input_variables: country2</span>\nchain1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"{country1} ì˜ ìˆ˜ë„ëŠ” ì–´ë””ì•¼?\"</span><span class=\"token punctuation\">)</span>\n <span class=\"token operator\">|</span> model\n <span class=\"token operator\">|</span> StrOutputParser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># input_variables: country2</span>\nchain2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"{country2} ì˜ ë©´ì ì€ ì–¼ë§ˆì•¼?\"</span><span class=\"token punctuation\">)</span>\n <span class=\"token operator\">|</span> model\n <span class=\"token operator\">|</span> StrOutputParser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n\ncombined <span class=\"token operator\">=</span> RunnableParallel<span class=\"token punctuation\">(</span>capital<span class=\"token operator\">=</span>chain1<span class=\"token punctuation\">,</span> area<span class=\"token operator\">=</span>chain2<span class=\"token punctuation\">)</span>\ncombined<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"country1\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ëŒ€í•œë¯¼êµ­\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"country2\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ë¯¸êµ­\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"country1\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ì¼ë³¸\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"country2\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ì¤‘êµ­\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ìœ„ ì˜ˆì‹œëŠ” ì¢€ ë³µì¡í•´ ë³´ì´ëŠ”ë°</p>\n<ol>\n<li>ê° ë°°ì¹˜ì˜ ì²´ì¸ì˜ ê²°ê³¼ëŠ” capital, areaë¡œ ë°›ìœ¼ë©´ì„œ</li>\n<li>ê° ì²´ì¸ì˜ input_variablesëŠ” ì²«ë²ˆì§¸ ë°°ì¹˜ì—ì„œëŠ” ëŒ€í•œë¯¼êµ­, ë¯¸êµ­, ë‘ë²ˆì§¸ ë°°ì¹˜ì—ì„œëŠ” ì¼ë³¸, ì¤‘êµ­ì„ ë„£ì–´ì¤Œ</li>\n</ol>\n<p>ê·¸ëŸ¼ ìµœì¢… ê²°ê³¼ëŠ” ì²«ë²ˆì§¸  <code class=\"language-text\">{\"country1\": \"ëŒ€í•œë¯¼êµ­\", \"country2\": \"ë¯¸êµ­\"}</code>ë¡œ ë„£ì€ ê²°ê³¼ì™€ ë‘ë²ˆì§¸  <code class=\"language-text\">{\"country1\": \"ì¼ë³¸\", \"country2\": \"ì¤‘êµ­\"}</code>ë¡œ ë„£ì€ ê²°ê³¼ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ë¬¶ì€ ê²ƒì´ ë‚˜ì˜¤ê² ì£ ?<br>\nì¦‰, ìµœì¢… ì‘ë‹µ ê²°ê³¼ëŠ” capital, area í‚¤ì™€ ê°’ì„ ê°–ëŠ” ë”•ì…”ë„ˆë¦¬ 2ê°œë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ë¬¶ì€ ê²ƒì´ë‹¤!</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ì¶œë ¥</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string\">'capital'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ëŒ€í•œë¯¼êµ­ì˜ ìˆ˜ë„ëŠ” ì„œìš¸ì…ë‹ˆë‹¤.'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'area'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ëŒ€í•œë¯¼êµ­ì˜ ë©´ì ì€ ì•½ 100,363kmÂ² ì…ë‹ˆë‹¤.'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">{</span><span class=\"token string\">'capital'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ë¯¸êµ­ì˜ ìˆ˜ë„ëŠ” ì›Œì‹±í„´ D.C.ì…ë‹ˆë‹¤.'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'area'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ë¯¸êµ­ì˜ ë©´ì ì€ ëŒ€ëµ 9,833,520 ì œê³± í‚¬ë¡œë¯¸í„°ì´ë©°, ì´ëŠ” ì„¸ê³„ì—ì„œ ì„¸ ë²ˆì§¸ë¡œ ë„“ì€ êµ­ê°€ì…ë‹ˆë‹¤.'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>ì•„, ì°¸ê³ ë¡œ ë³‘ë ¬ì²˜ë¦¬ëŠ” ê° ë°°ì¹˜ì—ì„œ <strong>chain ê²°ê³¼ ë°›ì•„ì˜¤ëŠ” ê²ƒì„ ë³‘ë ¬ë¡œ ì²˜ë¦¬</strong>ë˜ëŠ” ê²ƒì´ë‹ˆê¹Œ í—·ê°ˆë¦¬ì§€ ì•Šë„ë¡.</p>\n<p>Â </p>\n<p><strong>Q3. Chainì— RunnablePassthrough()ë¥¼ ì´ìš©í•´ ì§ì ‘ ë”•ì…”ë„ˆë¦¬ë¥¼ ë§Œë“¤ì—ˆëŠ”ë°, chainë“¤ì„ ë³‘ë ¬ë¡œ RunnableParallel()ë¡œ ë³‘ë ¬ë¡œ ì—°ê²°í•œë‹¤ë©´ ì…ë ¥ ë³€ìˆ˜ê°€ ì„œë¡œ ë‹¤ë¥¼ ë•ŒëŠ” ì–´ë–»ê²Œ ì „ë‹¬í•´ì•¼ í•˜ëŠ” ê²ƒì¸ê°€?</strong> (ì°¸ê³ ë¡œ ì…ë ¥ë³€ìˆ˜ ì„œë¡œ ê°™ìœ¼ë©´ ê·¸ëƒ¥ ê°’ë§Œ ë„£ì–´ë„ ë©ë‹ˆë‹¤.)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">chain1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span><span class=\"token string\">\"country1\"</span><span class=\"token punctuation\">:</span> RunnablePassthrough<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">|</span> PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"{country1} ì˜ ìˆ˜ë„ëŠ”?\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">|</span> ChatOpenAI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\nchain2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span><span class=\"token string\">\"country2\"</span><span class=\"token punctuation\">:</span> RunnablePassthrough<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">|</span> PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"{country2} ì˜ ë©´ì ì€?\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">|</span> ChatOpenAI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n\ncombined_chain <span class=\"token operator\">=</span> RunnableParallel<span class=\"token punctuation\">(</span>capital<span class=\"token operator\">=</span>chain1<span class=\"token punctuation\">,</span> area<span class=\"token operator\">=</span>chain2<span class=\"token punctuation\">)</span>\ncombined_chain<span class=\"token punctuation\">.</span>invoke<span class=\"token comment\">#(\"ì—¬ê¸°ì— ë¬´ì—‡ì„ ë„£ì–´ì•¼ í•˜ëŠ” ê²ƒì¸ê°€?\")</span></code></pre></div>\n<p>(âŒ) combined_chain.invoke({â€œcountry1â€: â€œëŒ€í•œë¯¼êµ­â€, â€œcountry2â€: â€œëŒ€í•œë¯¼êµ­â€})<br>\n(âŒ) combined_chain.invoke(â€œëŒ€í•œë¯¼êµ­â€)<br>\nì…ë ¥ ë³€ìˆ˜ëª…ì´ ë‹¬ë¼ì„œ ì´ëŸ° ì‹ìœ¼ë¡œëŠ” ë‹¤ ì•ˆ ë©ë‹ˆë‹¤.</p>\n<p>ë§ˆìŒ í¸íˆ í•˜ëŠ” ë°©ë²•ì€ chainì„ ì¢€ ëœ¯ì–´ ê³ ì¹˜ëŠ” ê²ƒ.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain<span class=\"token punctuation\">.</span>schema<span class=\"token punctuation\">.</span>runnable <span class=\"token keyword\">import</span> RunnableLambda\n\nchain1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token comment\"># ë°©ë²•: RunnableLambdaë¥¼ ì‚¬ìš©í•´ country1 í‚¤ì— ê°’ì„ ë§¤í•‘</span>\n    <span class=\"token punctuation\">{</span><span class=\"token string\">\"country1\"</span><span class=\"token punctuation\">:</span> RunnableLambda<span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">[</span><span class=\"token string\">\"country1\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">|</span> PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"{country1} ì˜ ìˆ˜ë„ëŠ”?\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">|</span> ChatOpenAI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n\nchain2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token comment\"># ë°©ë²•: RunnableLambdaë¥¼ ì‚¬ìš©í•´ country2 í‚¤ì— ê°’ì„ ë§¤í•‘</span>\n    <span class=\"token punctuation\">{</span><span class=\"token string\">\"country2\"</span><span class=\"token punctuation\">:</span> RunnableLambda<span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">[</span><span class=\"token string\">\"country2\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">|</span> PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"{country2} ì˜ ë©´ì ì€?\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">|</span> ChatOpenAI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n\ncombined_chain <span class=\"token operator\">=</span> RunnableParallel<span class=\"token punctuation\">(</span>capital<span class=\"token operator\">=</span>chain1<span class=\"token punctuation\">,</span> area<span class=\"token operator\">=</span>chain2<span class=\"token punctuation\">)</span>\n\ncombined_chain<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\"># ë°©ë²•: country1, country2 í‚¤ì— ê°ê° ê°’ì„ ì „ë‹¬</span>\n        <span class=\"token string\">\"country1\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ëŒ€í•œë¯¼êµ­\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"country2\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ëŒ€í•œë¯¼êµ­\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>ì•„ë˜ì—ì„œ ë°°ìš¸ RunnableLambda() í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ì§ì ‘ ì…ë ¥ ê°’ì—ì„œ êº¼ë‚´ì–´ ì“°ë©´ ë©ë‹ˆë‹¤.</strong></p>\n<p>êµ³ğŸ‘ğŸ»</p>\n</blockquote>\n<p>Â </p>\n<p><strong>Q. Runnable ë³‘ë ¬ ì—°ê²°, RunnablePassthrough(), RunnablePassthrough.assign() ë©”ì„œë“œ, ì¼ë°˜ lambda í•¨ìˆ˜ì— ê´€í•œ ë³µì¡í•œ ì˜ˆì‹œì˜ ê²°ê³¼ë¥¼ ì˜ˆìƒí•´ë´…ì‹œë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>runnables <span class=\"token keyword\">import</span> RunnableParallel\n\nrunnable <span class=\"token operator\">=</span> RunnableParallel<span class=\"token punctuation\">(</span>\n    passed<span class=\"token operator\">=</span>RunnablePassthrough<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    extra<span class=\"token operator\">=</span>RunnablePassthrough<span class=\"token punctuation\">.</span>assign<span class=\"token punctuation\">(</span>mult<span class=\"token operator\">=</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">[</span><span class=\"token string\">\"num\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    modified<span class=\"token operator\">=</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">[</span><span class=\"token string\">\"num\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\nrunnable<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"num\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol>\n<li>ìµœì¢… ì‘ë‹µ ê²°ê³¼ëŠ” RunnableParallel ë‚´ë¶€ë¥¼ ë³‘ë ¬ë¡œ ì‹¤í–‰í•˜ì—¬ ê° ê²°ê³¼ë¥¼ passed, extra, modified í‚¤ì˜ ê°’ìœ¼ë¡œ í•˜ëŠ” ë”•ì…”ë„ˆë¦¬ í˜•íƒœë¡œ ë°˜í™˜í•œë‹¤.</li>\n<li><code class=\"language-text\">passed</code>: ì…ë ¥  <code class=\"language-text\">{\"num\": 1}</code> ê·¸ëŒ€ë¡œ ë°˜í™˜í•¨</li>\n<li><code class=\"language-text\">extra</code>: ì…ë ¥  <code class=\"language-text\">{\"num\": 1}</code>ë¥¼ xë¡œ ë°›ì•„ì™€ì„œ numì˜ ê°’ 1ì— 3ì„ ê³±í•œ ê°’ì„ multì— â€˜ì¶”ê°€ í• ë‹¹â€™í•˜ì—¬ ê²°ê³¼ <code class=\"language-text\">{\"num\": 1, \"mult\": 3}</code>ì„ ë°˜í™˜í•¨</li>\n<li><code class=\"language-text\">modified</code>: ì…ë ¥  <code class=\"language-text\">{\"num\": 1}</code>ë¥¼ xë¡œ ë°›ì•„ì™€ì„œ numì˜ ê°’ 1ì— 1ì„ ë”í•˜ì—¬ ë°˜í™˜í•¨</li>\n</ol>\n<p>ê·¸ë˜ì„œ ìµœì¢… ê²°ê³¼ëŠ” <code class=\"language-text\">{'passed': {'num': 1}, 'extra': {'num': 1, 'mult': 3}, 'modified': 2}</code>ê°€ ë‚˜ì˜µë‹ˆë‹¤.</p>\n<p>Â </p>\n<h3 id=\"3-ì‚¬ìš©ì-ì •ì˜-í•¨ìˆ˜-ë§¤í•‘-runnablelambda\" style=\"position:relative;\"><a href=\"#3-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%A0%95%EC%9D%98-%ED%95%A8%EC%88%98-%EB%A7%A4%ED%95%91-runnablelambda\" aria-label=\"3 ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ ë§¤í•‘ runnablelambda permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ ë§¤í•‘: RunnableLambda</h3>\n<p>í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ í›„ì— í”„ë¡¬í”„íŠ¸ì— ë„£ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. RunnableLambda(ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜)ë¡œ ì´ìš©í•˜ë©´ ë©ë‹ˆë‹¤.</p>\n<p>ëŒ€ì¶©, ë¨¸ë¦¿ ì†ìœ¼ë¡œ ê·¸ë ¤ë³´ìë©´</p>\n<blockquote>\n<p>invoke(ì…ë ¥ ë³€ìˆ˜) -> RunnableLambda(ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜)ì„ í†µí•´ í”„ë¡¬í”„íŠ¸ì— ì „ë‹¬</p>\n</blockquote>\n<p>ì´ëŸ° ì‹ì´ ë  ê²ƒ ê°™ì€ë°, ì´ë•Œ <strong>ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ëŠ” ì •ë§ í•¨ìˆ˜ ì´ë¦„ë§Œ ì‘ì„±í•©ë‹ˆë‹¤.</strong></p>\n<p>ê·¸ë ‡ë‹¤ë©´,<br>\nì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ ì¦‰, í•¨ìˆ˜ê°€ ìˆë‹¤ëŠ” ê²ƒì€ ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ìƒí™©ì´ ìˆì„ í…ë°, <strong>ì „ë‹¬í•˜ëŠ” ì…ë ¥ ë³€ìˆ˜ê°€ ë”•ì…”ë„ˆë¦¬ í˜•íƒœ</strong>ì¼ ë•ŒëŠ”</p>\n<ol>\n<li>ì§ì ‘ í‚¤ë¡œ ì ‘ê·¼í•˜ëŠ” ë°©ë²• ë¿ë§Œ ì•„ë‹ˆë¼</li>\n<li><strong>operator ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ itemgetter ëª¨ë“ˆì„ ì´ìš©í•˜ì—¬ ì ‘ê·¼í•˜ëŠ” ë°©ë²•</strong>ì´ ìˆìŠµë‹ˆë‹¤.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">chain <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">:</span> itemgetter<span class=\"token punctuation\">(</span><span class=\"token string\">\"word1\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> RunnableLambda<span class=\"token punctuation\">(</span>length_function<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"text1\"</span><span class=\"token punctuation\">:</span> itemgetter<span class=\"token punctuation\">(</span><span class=\"token string\">\"word1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"text2\"</span><span class=\"token punctuation\">:</span> itemgetter<span class=\"token punctuation\">(</span><span class=\"token string\">\"word2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">|</span> RunnableLambda<span class=\"token punctuation\">(</span>multiple_length_function<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">|</span> prompt\n    <span class=\"token operator\">|</span> model\n<span class=\"token punctuation\">)</span>\n\nchain<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"word1\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"word2\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"world\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ìš”ëŸ° ëŠë‚Œìœ¼ë¡œ ê° ì…ë ¥ <code class=\"language-text\">{\"word1\": \"hello\", \"word2\": \"world\"}</code>ì—ì„œ <code class=\"language-text\">itemgetter(\"word1\")</code>, <code class=\"language-text\">itemgetter(\"word2\")</code>ì„ ì´ìš©í•´ì„œ ê° í‚¤ì˜ ê°’ì„ êº¼ë‚´ì–´ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<p><strong>Q. ê·¸ëŸ¬ë©´ ê·¸ëƒ¥ ë”•ì…”ë„ˆë¦¬ì—ì„œ ì§ì ‘ í‚¤ ê°’ìœ¼ë¡œ ì ‘ê·¼í•˜ë©° ë˜ì§€, ì™œ itemgetter()ì„ ì´ìš©í•˜ë‚˜ìš”?</strong></p>\n<p>=> operator.itemgetter()ì„ ì‘ì„±í•˜ë©´, \"\"ë‚´ê°€ ì´ê²ƒì„ ë½‘ì•„ ì“¸ ê±°ë‹¤â€ë¼ëŠ” <strong>ëª…í™•ì„±</strong>ê³¼ ê°„ê²°í•¨ì„ ì œê³µí•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>\n</blockquote>\n<p>Â </p>\n<p>ê·¸ëŸ¬ë©´ ì…ë ¥ ë³€ìˆ˜ê°€ ì—¬ëŸ¬ ê°œëŠ”â€¦? <del>(ë”•ì…”ë„ˆë¦¬ 1ê°œì— ì—¬ëŸ¬ ê°œ ìˆëŠ” ê²ƒ ë§ê³ , ì§„ì§œ ì—¬ëŸ¬ ê°œ ë§í•˜ëŠ” ê²ƒì„)</del></p>\n<blockquote>\n<p><strong>Q. ì…ë ¥ ë³€ìˆ˜ê°€ ì—¬ëŸ¬ ê°œë©´ ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ì— ì–´ë–»ê²Œ ì „ë‹¬í•˜ëŠ” ê²ƒì¸ê°€?</strong></p>\n<p>=> ê²°ë¡ ë¶€í„° ë§í•˜ë©´, <strong>ì…ë ¥ ë³€ìˆ˜ëŠ” ë°˜ë“œì‹œ í•˜ë‚˜</strong>ì—¬ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>ì…ë ¥ ë³€ìˆ˜ê°€ 1ê°œë©´ ë§¤ê°œë³€ìˆ˜ë„ í•˜ë‚˜ì¼í…Œë‹ˆ ì ë‹¹íˆ ì˜ ë§¤ì¹­ë  ê²ƒ ê°™ì€ë°,<br>\nì…ë ¥ ë³€ìˆ˜ê°€ 2ê°œë©´ ì–´ë–»ê²Œ ë§¤ì¹­í•˜ë‚˜ ê±±ì •ì´ ëìŠµë‹ˆë‹¤.</p>\n<p>ê·¸ëŸ°ë°, ì—¬ê¸°ì„œ <strong>ì…ë ¥ ë³€ìˆ˜ëŠ” ë°˜ë“œì‹œ í•˜ë‚˜ì—¬ì•¼ í•˜ë©°,<br>ì—¬ëŸ¬ ê°œë¥¼ ì „ë‹¬í•˜ê³  ì‹¶ì„ ë• ë°˜ë“œì‹œ ë”•ì…”ë„ˆë¦¬ë¥¼ ì´ìš©í•´ì„œ ì „ë‹¬í•´ì¤€ í›„ ì´ë¥¼ ì „ë‹¬ ë°›ì•„ì„œ í‚¤ì˜ ê°’ì„ ì½ëŠ” í˜•íƒœë¡œ ì´ìš©</strong>í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>ê·¸ë˜ì„œ <strong>ì‚¬ìš©ì ì •ì˜í•¨ìˆ˜ì—ì„œ ë§¤ê°œë³€ìˆ˜ëŠ” ë³´í†µ ë”•ì…”ë„ˆë¦¬ 1ê°œ ë°›ëŠ” í˜•íƒœë¡œì¨ ë‹¤ë£¨ê²Œ ë©ë‹ˆë‹¤.</strong> (_dict !!)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> operator <span class=\"token keyword\">import</span> itemgetter\n\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>prompts <span class=\"token keyword\">import</span> ChatPromptTemplate\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>runnables <span class=\"token keyword\">import</span> RunnableLambda\n<span class=\"token keyword\">from</span> langchain_openai <span class=\"token keyword\">import</span> ChatOpenAI\n\n\n<span class=\"token comment\"># ë¬¸ì¥ì˜ ê¸¸ì´ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">length_function</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ë‘ ë¬¸ì¥ì˜ ê¸¸ì´ë¥¼ ê³±í•œ ê°’ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">_multiple_length_function</span><span class=\"token punctuation\">(</span>text1<span class=\"token punctuation\">,</span> text2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>text1<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>text2<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># â­ï¸ ë”•ì…”ë„ˆë¦¬ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ì˜¤ê¸° ë–„ë¬¸ì— _dictë¡œ ë°›ìŒ â­ï¸</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">multiple_length_function</span><span class=\"token punctuation\">(</span>_dict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> _multiple_length_function<span class=\"token punctuation\">(</span>_dict<span class=\"token punctuation\">[</span><span class=\"token string\">\"text1\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> _dict<span class=\"token punctuation\">[</span><span class=\"token string\">\"text2\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n\nprompt <span class=\"token operator\">=</span> ChatPromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"{a} + {b} ëŠ” ë¬´ì—‡ì¸ê°€ìš”?\"</span><span class=\"token punctuation\">)</span>\nmodel <span class=\"token operator\">=</span> ChatOpenAI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nchain1 <span class=\"token operator\">=</span> prompt <span class=\"token operator\">|</span> model\n\nchain <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\"># ì…ë ¥ ë³€ìˆ˜ ë”•ì…”ë„ˆë¦¬ì—ì„œ ê°’ì„ êº¼ë‚´ì–´ ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ length_functionì— ì „ë‹¬</span>\n        <span class=\"token comment\"># â­ï¸ ì¦‰, length_functionì— word1ì˜ ê°’ 1ê°œë¥¼ ì „ë‹¬ â­ï¸</span>\n        <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">:</span> itemgetter<span class=\"token punctuation\">(</span><span class=\"token string\">\"word1\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> RunnableLambda<span class=\"token punctuation\">(</span>length_function<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"text1\"</span><span class=\"token punctuation\">:</span> itemgetter<span class=\"token punctuation\">(</span><span class=\"token string\">\"word1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"text2\"</span><span class=\"token punctuation\">:</span> itemgetter<span class=\"token punctuation\">(</span><span class=\"token string\">\"word2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        <span class=\"token comment\"># â­ï¸ multiple_length_functionì— {\"text1\": itemgetter(\"word1\"), \"text2\": itemgetter(\"word2\")} 1ê°œë¥¼ ì „ë‹¬ â­ï¸</span>\n        <span class=\"token operator\">|</span> RunnableLambda<span class=\"token punctuation\">(</span>multiple_length_function<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">|</span> prompt\n    <span class=\"token operator\">|</span> model\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ì…ë ¥ë³€ìˆ˜: {\"word1\": \"hello\", \"word2\": \"world\"}</span>\nchain<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"word1\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"word2\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"world\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n</blockquote>\n<p>Â </p>\n<blockquote>\n<h3 id=\"ê¹¨ì•Œ-tip-3\" style=\"position:relative;\"><a href=\"#%EA%B9%A8%EC%95%8C-tip-3\" aria-label=\"ê¹¨ì•Œ tip 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’¡ê¹¨ì•Œ Tip</h3>\n<p><strong>RunnableLambda ë‚´ë¶€ ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ë¥¼ invoke() ë©”ì„œë“œë¡œ í˜¸ì¶œ ì‹œ,<br>ì…ë ¥ ë³€ìˆ˜ê°€ ê·¸ í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ê°’ì„ ì „ë‹¬í•´ì¤˜ì•¼ í•˜ê¸° ë•Œë¬¸ì—, ì‹¤ì œë¡œ ê·¸ í•¨ìˆ˜ì—ì„œ ì…ë ¥ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šë”ë¼ë„ ë§¤ê°œ ë³€ìˆ˜ë¥¼ ì¨ì¤˜ì•¼ í•œë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>output_parsers <span class=\"token keyword\">import</span> StrOutputParser\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>prompts <span class=\"token keyword\">import</span> PromptTemplate\n<span class=\"token keyword\">from</span> langchain_openai <span class=\"token keyword\">import</span> ChatOpenAI\n<span class=\"token keyword\">from</span> datetime <span class=\"token keyword\">import</span> datetime\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>runnables <span class=\"token keyword\">import</span> RunnableLambda<span class=\"token punctuation\">,</span> RunnablePassthrough\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_today</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n <span class=\"token comment\"># ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ê°€ì ¸ì˜¤ê¸°</span>\n <span class=\"token keyword\">return</span> datetime<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%b-%d\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ì¶œë ¥</span>\n<span class=\"token comment\"># print(get_today(None))</span>\n\n\n<span class=\"token comment\"># prompt ì™€ llm ì„ ìƒì„±í•©ë‹ˆë‹¤.</span>\nprompt <span class=\"token operator\">=</span> PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span>\n <span class=\"token string\">\"{today} ê°€ ìƒì¼ì¸ ìœ ëª…ì¸ {n} ëª…ì„ ë‚˜ì—´í•˜ì„¸ìš”. ìƒë…„ì›”ì¼ì„ í‘œê¸°í•´ ì£¼ì„¸ìš”.\"</span>\n<span class=\"token punctuation\">)</span>\nllm <span class=\"token operator\">=</span> ChatOpenAI<span class=\"token punctuation\">(</span>temperature<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> model_name<span class=\"token operator\">=</span><span class=\"token string\">\"gpt-4.1-mini\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># chain ì„ ìƒì„±í•©ë‹ˆë‹¤.</span>\nchain <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n\n <span class=\"token punctuation\">{</span><span class=\"token string\">\"today\"</span><span class=\"token punctuation\">:</span> RunnableLambda<span class=\"token punctuation\">(</span>get_today<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"n\"</span><span class=\"token punctuation\">:</span> RunnablePassthrough<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n <span class=\"token operator\">|</span> prompt\n <span class=\"token operator\">|</span> llm\n <span class=\"token operator\">|</span> StrOutputParser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>chain<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol>\n<li><code class=\"language-text\">chain.invoke(3)</code>ì—ì„œ 3ì„ <code class=\"language-text\">RunnableLambda(get_today)</code>ì—ì„œ ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ <code class=\"language-text\">get_today</code>ì— ì „ë‹¬í•œë‹¤.</li>\n<li><code class=\"language-text\">get_today</code>ëŠ” ê·¸ 3ì„ ì´ìš©í•˜ì§€ ì•Šë”ë¼ë„, ë§¤ê°œë³€ìˆ˜ë¥¼ ì‘ì„±í•´ì•¼ í•˜ë¯€ë¡œ <code class=\"language-text\">def get_today(a):</code> ë¼ê³  ì‘ì„±í•œë‹¤.</li>\n</ol>\n<p>(ì°¸ê³ ë¡œ get_today() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•ŒëŠ” ì…ë ¥ë³€ìˆ˜ì— Noneê³¼ ê°™ì´ ë§¤ê°œë³€ìˆ˜ ê°’ì„ ì¨ì¤˜ì•¼ í•œë‹¤.)</p>\n<p>LangSmithì—ì„œ ì§ì ‘ í™•ì¸í•´ë³´ë©´ ì´ëŸ° íë¦„ìœ¼ë¡œ ì§„í–‰ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 51.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABD0lEQVQoz5WSS07DMBRFuwIgjmPHn8T5QWijtqg0RR0wKCPECtj/Rg5KpHRCScvgSs/y9fF9z16EoiYLNWnqUMogYkUsNSqW6O5A+/nNdtXx3G1IfCAe9i9IiASpDAtnUrqmoi5qtLFED4LoXhDdCVJlyHwghIo8L0cNB/+CDlpUrz1fHy9s+z1P+zdCt8E0LbZdYkI1wuYAv4C79yOH04llf+Rx15N1a3TTYtoVOivIs2Icx7VkZ6CRkuA8IS/HFgdZ7TDKEIuERBmSJL0dqLRDp25MkRqPsRnOB6zLkVKPcxuAN7cshCSKLmswlGWDtf72hNcM3gecy88XzH2bWeBkUMr+75XnYFM9rad6Tj9dVf7M+TmMqQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"img 1\" title=\"img 1\" src=\"/static/98e0bb52d22267b2de807136aab5ce60/37523/img_1.png\" srcset=\"/static/98e0bb52d22267b2de807136aab5ce60/e9ff0/img_1.png 180w,\n/static/98e0bb52d22267b2de807136aab5ce60/f21e7/img_1.png 360w,\n/static/98e0bb52d22267b2de807136aab5ce60/37523/img_1.png 720w,\n/static/98e0bb52d22267b2de807136aab5ce60/302a4/img_1.png 1080w,\n/static/98e0bb52d22267b2de807136aab5ce60/07a9c/img_1.png 1440w,\n/static/98e0bb52d22267b2de807136aab5ce60/3d22e/img_1.png 2010w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 57.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABZElEQVQoz32SyW7CMBiE8wZAEi+xncVxSFgUIKBCKbSovVRqD7216vs/yFR2CQpiOXz6Y8saz4zjxbGGSgw4VyCEw/cJgoCg5zPMC4HvwwjD0QyLeQOlDUIujmeom91vwgQ8pSTWswrT8RSxNiCU/x8IKBiTkCpDmmjEcYYk0SeBW3hRmmNXxzBKQqkMjHAMer6DhAxFUSEM2YWrrrszwe3XB95+f7B8/0Qxa5AtH5DtX6APr5DTGjrNIWTi6qA0Os2WC0GzeUS53cHMGhSbLYZPz6j2B1RWsJog4tJFbUlTS44sM64GK9p16tGQuZiMRg5OI0RMILK3+wRJqsGYuIh6M7Lf6WXQMggdtjvrhrJzF/cexrv3YhYbUevCkedDF9WYEsYMz+K207t3o90vyzEWi5WjaVao6wVWqzUmk/qq65uC7R7nElImUCp1CBGf1raSq5HvCfrHTvv9wNH2a7n2b/4BWTgeSdGVbqIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"img 2\" title=\"img 2\" src=\"/static/33293e51d1c8b0b0e615d9c783f5abd0/37523/img_2.png\" srcset=\"/static/33293e51d1c8b0b0e615d9c783f5abd0/e9ff0/img_2.png 180w,\n/static/33293e51d1c8b0b0e615d9c783f5abd0/f21e7/img_2.png 360w,\n/static/33293e51d1c8b0b0e615d9c783f5abd0/37523/img_2.png 720w,\n/static/33293e51d1c8b0b0e615d9c783f5abd0/302a4/img_2.png 1080w,\n/static/33293e51d1c8b0b0e615d9c783f5abd0/07a9c/img_2.png 1440w,\n/static/33293e51d1c8b0b0e615d9c783f5abd0/0486e/img_2.png 2008w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n</blockquote>\n<p>Â </p>\n<p>Â </p>\n<p>ë„-ì•.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#lcel-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4\">LCEL ì¸í„°í˜ì´ìŠ¤</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#batch-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC\">batch(): ë°°ì¹˜ ì²˜ë¦¬</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%A9%94%EC%86%8C%EB%93%9C\">ë¹„ë™ê¸° ë©”ì†Œë“œ</a></p>\n<ul>\n<li><a href=\"#1-%EB%B9%84%EB%8F%99%EA%B8%B0-%EC%8A%A4%ED%8A%B8%EB%A6%BC-async-for-astream\">1. ë¹„ë™ê¸° ìŠ¤íŠ¸ë¦¼: async for, astream()</a></li>\n<li><a href=\"#2-%EB%B9%84%EB%8F%99%EA%B8%B0-%ED%98%B8%EC%B6%9C-ainvoke\">2. ë¹„ë™ê¸° í˜¸ì¶œ: ainvoke()</a></li>\n<li><a href=\"#3-%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%B0%B0%EC%B9%98-abatch\">3. ë¹„ë™ê¸° ë°°ì¹˜: abatch()</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#runnable-interface\">Runnable Interface</a></p>\n<ul>\n<li>\n<p><a href=\"#runnable-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C\">Runnable í”„ë¡œí† ì½œ</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%84%EB%8B%AC-%EB%B0%A9%EB%B2%95\">ë°ì´í„° ì „ë‹¬ ë°©ë²•</a></p>\n<ul>\n<li><a href=\"#1-%EA%B0%92-%EC%A0%84%EB%8B%AC-runnablepassthrough\">1. ê°’ ì „ë‹¬: RunnablePassthrough</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-runnable-%EB%B3%91%EB%A0%AC-%EC%97%B0%EA%B2%B0-runnableparallel\">2. Runnable ë³‘ë ¬ ì—°ê²°: RunnableParallel</a></p>\n</li>\n<li>\n<p><a href=\"#3-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%A0%95%EC%9D%98-%ED%95%A8%EC%88%98-%EB%A7%A4%ED%95%91-runnablelambda\">3. ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ ë§¤í•‘: RunnableLambda</a></p>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"December 12, 2025","title":"[LLM] í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ ë„ì ë„ì -2","categories":"LLM","author":"ë³€ìš°ì¤‘","emoji":"â˜€ï¸"},"fields":{"slug":"/25-12-12_1/"}},"prev":{"id":"fe49cd49-a75e-5770-ae92-ec14391a764a","html":"<p>ì°¸ê³  : í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ (<a href=\"https://fastcampus.co.kr/data_online_teddy)\">https://fastcampus.co.kr/data_online_teddy)</a><br>ì†ŒìŠ¤ì½”ë“œ: <a href=\"https://github.com/teddylee777/langchain-kr\">https://github.com/teddylee777/langchain-kr</a><br>ìœ„í‚¤ë…ìŠ¤: <a href=\"https://wikidocs.net/book/14314\">https://wikidocs.net/book/14314</a></p>\n<p>Â </p>\n<p>ì˜¤ëŠ˜ë„ ê°“ í…Œë””ë…¸íŠ¸ë‹˜ ë„ì  ë ˆì¸ ê¸°ë¦¿.</p>\n<p>Â </p>\n<p>ê·¸ ì „ì— ì ì‹œ!!<br>ë”•ì…”ë„ˆë¦¬ í‚¤ì›Œë“œ ì¸ì ì „ë‹¬í•˜ëŠ” íŒŒì´ì¬ ë¬¸ë²• í™•ì¸í•˜ê³  ê°€ê³ ì í•©ë‹ˆë‹¤~</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>prompts<span class=\"token punctuation\">.</span>few_shot <span class=\"token keyword\">import</span> FewShotPromptTemplate\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>prompts <span class=\"token keyword\">import</span> PromptTemplate\n\n\nexamples <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"question\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ì™€ ì•„ì¸ìŠˆíƒ€ì¸ ì¤‘ ëˆ„ê°€ ë” ì˜¤ë˜ ì‚´ì•˜ë‚˜ìš”?\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"answer\"</span><span class=\"token punctuation\">:</span> <span class=\"token triple-quoted-string string\">\"\"\"ì´ ì§ˆë¬¸ì— ì¶”ê°€ ì§ˆë¬¸ì´ í•„ìš”í•œê°€ìš”: ì˜ˆ.\nì¶”ê°€ ì§ˆë¬¸: ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ëŠ” ëª‡ ì‚´ì— ì‚¬ë§í–ˆë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ëŠ” 56ì„¸ì— ì‚¬ë§í–ˆìŠµë‹ˆë‹¤.\nì¶”ê°€ ì§ˆë¬¸: ì•„ì¸ìŠˆíƒ€ì¸ì€ ëª‡ ì‚´ì— ì‚¬ë§í–ˆë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ì•„ì¸ìŠˆíƒ€ì¸ì€ 76ì„¸ì— ì‚¬ë§í–ˆìŠµë‹ˆë‹¤.\nìµœì¢… ë‹µë³€ì€: ì•„ì¸ìŠˆíƒ€ì¸\n\"\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"question\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ë„¤ì´ë²„ì˜ ì°½ë¦½ìëŠ” ì–¸ì œ íƒœì–´ë‚¬ë‚˜ìš”?\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"answer\"</span><span class=\"token punctuation\">:</span> <span class=\"token triple-quoted-string string\">\"\"\"ì´ ì§ˆë¬¸ì— ì¶”ê°€ ì§ˆë¬¸ì´ í•„ìš”í•œê°€ìš”: ì˜ˆ.\nì¶”ê°€ ì§ˆë¬¸: ë„¤ì´ë²„ì˜ ì°½ë¦½ìëŠ” ëˆ„êµ¬ì¸ê°€ìš”?\nì¤‘ê°„ ë‹µë³€: ë„¤ì´ë²„ëŠ” ì´í•´ì§„ì— ì˜í•´ ì°½ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤.\nì¶”ê°€ ì§ˆë¬¸: ì´í•´ì§„ì€ ì–¸ì œ íƒœì–´ë‚¬ë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ì´í•´ì§„ì€ 1967ë…„ 6ì›” 22ì¼ì— íƒœì–´ë‚¬ìŠµë‹ˆë‹¤.\nìµœì¢… ë‹µë³€ì€: 1967ë…„ 6ì›” 22ì¼\n\"\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span>\n\nexample_prompt <span class=\"token operator\">=</span> PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span>\n    <span class=\"token comment\"># question, answer í‚¤ì›Œë“œ ì¸ì ì‚¬ìš©</span>\n    <span class=\"token string\">\"Question:\\n{question}\\nAnswer:\\n{answer}\"</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># **examples[0]ë¡œ í‚¤ì›Œë“œ ì¸ì ì „ë‹¬</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>example_prompt<span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>examples<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\nQuestion:\nìŠ¤í‹°ë¸Œ ì¡ìŠ¤ì™€ ì•„ì¸ìŠˆíƒ€ì¸ ì¤‘ ëˆ„ê°€ ë” ì˜¤ë˜ ì‚´ì•˜ë‚˜ìš”?\nAnswer:\nì´ ì§ˆë¬¸ì— ì¶”ê°€ ì§ˆë¬¸ì´ í•„ìš”í•œê°€ìš”: ì˜ˆ.\nì¶”ê°€ ì§ˆë¬¸: ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ëŠ” ëª‡ ì‚´ì— ì‚¬ë§í–ˆë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ëŠ” 56ì„¸ì— ì‚¬ë§í–ˆìŠµë‹ˆë‹¤.\nì¶”ê°€ ì§ˆë¬¸: ì•„ì¸ìŠˆíƒ€ì¸ì€ ëª‡ ì‚´ì— ì‚¬ë§í–ˆë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ì•„ì¸ìŠˆíƒ€ì¸ì€ 76ì„¸ì— ì‚¬ë§í–ˆìŠµë‹ˆë‹¤.\nìµœì¢… ë‹µë³€ì€: ì•„ì¸ìŠˆíƒ€ì¸\n\"\"\"</span></code></pre></div>\n<p>exampleì˜ ì²«ë²ˆì§¸</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n    \"question\": \"ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ì™€ ì•„ì¸ìŠˆíƒ€ì¸ ì¤‘ ëˆ„ê°€ ë” ì˜¤ë˜ ì‚´ì•˜ë‚˜ìš”?\",\n    \"answer\": \"\"\"ì´ ì§ˆë¬¸ì— ì¶”ê°€ ì§ˆë¬¸ì´ í•„ìš”í•œê°€ìš”: ì˜ˆ.\nì¶”ê°€ ì§ˆë¬¸: ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ëŠ” ëª‡ ì‚´ì— ì‚¬ë§í–ˆë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ëŠ” 56ì„¸ì— ì‚¬ë§í–ˆìŠµë‹ˆë‹¤.\nì¶”ê°€ ì§ˆë¬¸: ì•„ì¸ìŠˆíƒ€ì¸ì€ ëª‡ ì‚´ì— ì‚¬ë§í–ˆë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ì•„ì¸ìŠˆíƒ€ì¸ì€ 76ì„¸ì— ì‚¬ë§í–ˆìŠµë‹ˆë‹¤.\nìµœì¢… ë‹µë³€ì€: ì•„ì¸ìŠˆíƒ€ì¸\n\"\"\",\n}</code></pre></div>\n<p>ì—ì„œ ì–¸íŒ¨í‚¹í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ PromptTemplate.from_templateì— í‚¤ì›Œë“œ ì¸ìë¥¼ ì „ë‹¬í•˜ê³ , ê·¸ í‚¤ì›Œë“œë¥¼ ì§ì ‘ ì‚¬ìš©í•´ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>Â </p>\n<p>ê·¸ëŸ¼ ì§„ì§œ ë ˆì¸ ê¸°ë¥!</p>\n<p>Â </p>\n<h2 id=\"fewshotprompttemplate\" style=\"position:relative;\"><a href=\"#fewshotprompttemplate\" aria-label=\"fewshotprompttemplate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FewShotPromptTemplate</h2>\n<hr>\n<p>LLMì—ê²Œ ì˜ˆì‹œ ëª‡ ê°€ì§€ë¥¼ <code class=\"language-text\">FewShotPromptTemplate</code>ì„ í™œìš©í•´ ë˜ì ¸ì£¼ëŠ” ë°©ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤.</p>\n<p>ì‚¬ì‹¤, í”„ë¡¬í”„íŠ¸ì— ì˜ˆì‹œë¥¼ ì§ì ‘ í¬í•¨í•´ë„ ë˜ì§€ë§Œ <br>ì˜ˆì‹œë¥¼ ì„ íƒì ìœ¼ë¡œ ì‚½ì…í•˜ëŠ” ëª¨ë“ˆê³¼ í•¨ê»˜ ì“°ë©´ ì¢‹ê¸°ì— í™œìš©ì„±ì´ ê´œì°®ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">example_prompt <span class=\"token operator\">=</span> PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span>\n    <span class=\"token comment\"># question, answer í‚¤ì›Œë“œ ì¸ì ì‚¬ìš©</span>\n    <span class=\"token string\">\"Question:\\n{question}\\nAnswer:\\n{answer}\"</span>\n<span class=\"token punctuation\">)</span>\n\nprompt <span class=\"token operator\">=</span> FewShotPromptTemplate<span class=\"token punctuation\">(</span>\n    <span class=\"token comment\"># ì˜ˆì‹œ</span>\n    examples<span class=\"token operator\">=</span>examples<span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿</span>\n    example_prompt<span class=\"token operator\">=</span>example_prompt<span class=\"token punctuation\">,</span>\n    suffix<span class=\"token operator\">=</span><span class=\"token string\">\"Question:\\n{question}\\nAnswer:\"</span><span class=\"token punctuation\">,</span>\n    input_variables<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"question\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\nquestion <span class=\"token operator\">=</span> <span class=\"token string\">\"Googleì´ ì°½ë¦½ëœ ì—°ë„ì— Bill Gatesì˜ ë‚˜ì´ëŠ” ëª‡ ì‚´ì¸ê°€ìš”?\"</span>\nfinal_prompt <span class=\"token operator\">=</span> prompt<span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>question<span class=\"token operator\">=</span>question<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>final_prompt<span class=\"token punctuation\">)</span>\n\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\nQuestion:\nìŠ¤í‹°ë¸Œ ì¡ìŠ¤ì™€ ì•„ì¸ìŠˆíƒ€ì¸ ì¤‘ ëˆ„ê°€ ë” ì˜¤ë˜ ì‚´ì•˜ë‚˜ìš”?\nAnswer:\nì´ ì§ˆë¬¸ì— ì¶”ê°€ ì§ˆë¬¸ì´ í•„ìš”í•œê°€ìš”: ì˜ˆ.\nì¶”ê°€ ì§ˆë¬¸: ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ëŠ” ëª‡ ì‚´ì— ì‚¬ë§í–ˆë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ëŠ” 56ì„¸ì— ì‚¬ë§í–ˆìŠµë‹ˆë‹¤.\nì¶”ê°€ ì§ˆë¬¸: ì•„ì¸ìŠˆíƒ€ì¸ì€ ëª‡ ì‚´ì— ì‚¬ë§í–ˆë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ì•„ì¸ìŠˆíƒ€ì¸ì€ 76ì„¸ì— ì‚¬ë§í–ˆìŠµë‹ˆë‹¤.\nìµœì¢… ë‹µë³€ì€: ì•„ì¸ìŠˆíƒ€ì¸\n\n\nQuestion:\në„¤ì´ë²„ì˜ ì°½ë¦½ìëŠ” ì–¸ì œ íƒœì–´ë‚¬ë‚˜ìš”?\nAnswer:\nì´ ì§ˆë¬¸ì— ì¶”ê°€ ì§ˆë¬¸ì´ í•„ìš”í•œê°€ìš”: ì˜ˆ.\nì¶”ê°€ ì§ˆë¬¸: ë„¤ì´ë²„ì˜ ì°½ë¦½ìëŠ” ëˆ„êµ¬ì¸ê°€ìš”?\nì¤‘ê°„ ë‹µë³€: ë„¤ì´ë²„ëŠ” ì´í•´ì§„ì— ì˜í•´ ì°½ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤.\nì¶”ê°€ ì§ˆë¬¸: ì´í•´ì§„ì€ ì–¸ì œ íƒœì–´ë‚¬ë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ì´í•´ì§„ì€ 1967ë…„ 6ì›” 22ì¼ì— íƒœì–´ë‚¬ìŠµë‹ˆë‹¤.\nìµœì¢… ë‹µë³€ì€: 1967ë…„ 6ì›” 22ì¼\n\n\nQuestion:\nGoogleì´ ì°½ë¦½ëœ ì—°ë„ì— Bill Gatesì˜ ë‚˜ì´ëŠ” ëª‡ ì‚´ì¸ê°€ìš”?\nAnswer:\n\"\"\"</span></code></pre></div>\n<p><code class=\"language-text\">prompt</code>ì—ëŠ”  ì˜ˆì‹œë“¤ì„ ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ì— ê° ì±„ì›Œ ë‚˜ì—´í•œ í›„ì— <br>ë§ˆì§€ë§‰ì— <code class=\"language-text\">suffix</code> ë‚´ìš©ì„ ì±„ì›Œ ì£¼ê²Œ ë©ë‹ˆë‹¤.</p>\n<p><code class=\"language-text\">suffix</code>ì—ì„œ <code class=\"language-text\">question</code>ì€ <code class=\"language-text\">input_variables</code> ë‚´ìš©ê³¼ ì—°ê²°ì´ ë˜ëŠ” ë¶€ë¶„ì´ë©°,<br>ì‚¬ìš©ì ì…ë ¥(ì§ˆë¬¸)ì„ ë„£ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.</p>\n<p>ì´ë ‡ê²Œ ëª‡ê°€ì§€ ì˜ˆì‹œë¥¼ ì£¼ë©´, LLM ëª¨ë¸ì´ ë‹µë³€ì„ ìƒì„±í•  ë•Œ í•´ë‹¹ ì˜ˆì‹œë¥¼ ì°¸ê³ í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>OK.</p>\n<p>Â </p>\n<blockquote>\n<h3 id=\"ê¹¨ì•Œ-tip\" style=\"position:relative;\"><a href=\"#%EA%B9%A8%EC%95%8C-tip\" aria-label=\"ê¹¨ì•Œ tip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’¡ê¹¨ì•Œ Tip</h3>\n<p>â­ï¸ <strong>Example Selectorì„ ì´ìš©í•˜ì—¬ ì˜ˆì‹œ ì„ íƒí•˜ê¸°</strong> â­ï¸</p>\n<p>ExampleSelector ì¤‘ì—ì„œ langchain_core.example_selectorsì˜ <strong>MaxMarginalRelevanceExampleSelector</strong>ì™€ <strong>SemanticSimilarityExampleSelector</strong>ì„ ì•Œì•„ë´…ì‹œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>example_selectors <span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n    MaxMarginalRelevanceExampleSelector<span class=\"token punctuation\">,</span>\n    SemanticSimilarityExampleSelector<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">from</span> langchain_openai <span class=\"token keyword\">import</span> OpenAIEmbeddings\n<span class=\"token keyword\">from</span> langchain_chroma <span class=\"token keyword\">import</span> Chroma\n\nexamples <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"question\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ì™€ ì•„ì¸ìŠˆíƒ€ì¸ ì¤‘ ëˆ„ê°€ ë” ì˜¤ë˜ ì‚´ì•˜ë‚˜ìš”?\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"answer\"</span><span class=\"token punctuation\">:</span> <span class=\"token triple-quoted-string string\">\"\"\"ì´ ì§ˆë¬¸ì— ì¶”ê°€ ì§ˆë¬¸ì´ í•„ìš”í•œê°€ìš”: ì˜ˆ.\nì¶”ê°€ ì§ˆë¬¸: ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ëŠ” ëª‡ ì‚´ì— ì‚¬ë§í–ˆë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ëŠ” 56ì„¸ì— ì‚¬ë§í–ˆìŠµë‹ˆë‹¤.\nì¶”ê°€ ì§ˆë¬¸: ì•„ì¸ìŠˆíƒ€ì¸ì€ ëª‡ ì‚´ì— ì‚¬ë§í–ˆë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ì•„ì¸ìŠˆíƒ€ì¸ì€ 76ì„¸ì— ì‚¬ë§í–ˆìŠµë‹ˆë‹¤.\nìµœì¢… ë‹µë³€ì€: ì•„ì¸ìŠˆíƒ€ì¸\n\"\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"question\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ë„¤ì´ë²„ì˜ ì°½ë¦½ìëŠ” ì–¸ì œ íƒœì–´ë‚¬ë‚˜ìš”?\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"answer\"</span><span class=\"token punctuation\">:</span> <span class=\"token triple-quoted-string string\">\"\"\"ì´ ì§ˆë¬¸ì— ì¶”ê°€ ì§ˆë¬¸ì´ í•„ìš”í•œê°€ìš”: ì˜ˆ.\nì¶”ê°€ ì§ˆë¬¸: ë„¤ì´ë²„ì˜ ì°½ë¦½ìëŠ” ëˆ„êµ¬ì¸ê°€ìš”?\nì¤‘ê°„ ë‹µë³€: ë„¤ì´ë²„ëŠ” ì´í•´ì§„ì— ì˜í•´ ì°½ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤.\nì¶”ê°€ ì§ˆë¬¸: ì´í•´ì§„ì€ ì–¸ì œ íƒœì–´ë‚¬ë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ì´í•´ì§„ì€ 1967ë…„ 6ì›” 22ì¼ì— íƒœì–´ë‚¬ìŠµë‹ˆë‹¤.\nìµœì¢… ë‹µë³€ì€: 1967ë…„ 6ì›” 22ì¼\n\"\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"question\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ìœ¨ê³¡ ì´ì´ì˜ ì–´ë¨¸ë‹ˆê°€ íƒœì–´ë‚œ í•´ì˜ í†µì¹˜í•˜ë˜ ì™•ì€ ëˆ„êµ¬ì¸ê°€ìš”?\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"answer\"</span><span class=\"token punctuation\">:</span> <span class=\"token triple-quoted-string string\">\"\"\"ì´ ì§ˆë¬¸ì— ì¶”ê°€ ì§ˆë¬¸ì´ í•„ìš”í•œê°€ìš”: ì˜ˆ.\nì¶”ê°€ ì§ˆë¬¸: ìœ¨ê³¡ ì´ì´ì˜ ì–´ë¨¸ë‹ˆëŠ” ëˆ„êµ¬ì¸ê°€ìš”?\nì¤‘ê°„ ë‹µë³€: ìœ¨ê³¡ ì´ì´ì˜ ì–´ë¨¸ë‹ˆëŠ” ì‹ ì‚¬ì„ë‹¹ì…ë‹ˆë‹¤.\nì¶”ê°€ ì§ˆë¬¸: ì‹ ì‚¬ì„ë‹¹ì€ ì–¸ì œ íƒœì–´ë‚¬ë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ì‹ ì‚¬ì„ë‹¹ì€ 1504ë…„ì— íƒœì–´ë‚¬ìŠµë‹ˆë‹¤.\nì¶”ê°€ ì§ˆë¬¸: 1504ë…„ì— ì¡°ì„ ì„ í†µì¹˜í•œ ì™•ì€ ëˆ„êµ¬ì¸ê°€ìš”?\nì¤‘ê°„ ë‹µë³€: 1504ë…„ì— ì¡°ì„ ì„ í†µì¹˜í•œ ì™•ì€ ì—°ì‚°êµ°ì…ë‹ˆë‹¤.\nìµœì¢… ë‹µë³€ì€: ì—°ì‚°êµ°\n\"\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"question\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ì˜¬ë“œë³´ì´ì™€ ê¸°ìƒì¶©ì˜ ê°ë…ì´ ê°™ì€ ë‚˜ë¼ ì¶œì‹ ì¸ê°€ìš”?\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"answer\"</span><span class=\"token punctuation\">:</span> <span class=\"token triple-quoted-string string\">\"\"\"ì´ ì§ˆë¬¸ì— ì¶”ê°€ ì§ˆë¬¸ì´ í•„ìš”í•œê°€ìš”: ì˜ˆ.\nì¶”ê°€ ì§ˆë¬¸: ì˜¬ë“œë³´ì´ì˜ ê°ë…ì€ ëˆ„êµ¬ì¸ê°€ìš”?\nì¤‘ê°„ ë‹µë³€: ì˜¬ë“œë³´ì´ì˜ ê°ë…ì€ ë°•ì°¬ìš±ì…ë‹ˆë‹¤.\nì¶”ê°€ ì§ˆë¬¸: ë°•ì°¬ìš±ì€ ì–´ëŠ ë‚˜ë¼ ì¶œì‹ ì¸ê°€ìš”?\nì¤‘ê°„ ë‹µë³€: ë°•ì°¬ìš±ì€ ëŒ€í•œë¯¼êµ­ ì¶œì‹ ì…ë‹ˆë‹¤.\nì¶”ê°€ ì§ˆë¬¸: ê¸°ìƒì¶©ì˜ ê°ë…ì€ ëˆ„êµ¬ì¸ê°€ìš”?\nì¤‘ê°„ ë‹µë³€: ê¸°ìƒì¶©ì˜ ê°ë…ì€ ë´‰ì¤€í˜¸ì…ë‹ˆë‹¤.\nì¶”ê°€ ì§ˆë¬¸: ë´‰ì¤€í˜¸ëŠ” ì–´ëŠ ë‚˜ë¼ ì¶œì‹ ì¸ê°€ìš”?\nì¤‘ê°„ ë‹µë³€: ë´‰ì¤€í˜¸ëŠ” ëŒ€í•œë¯¼êµ­ ì¶œì‹ ì…ë‹ˆë‹¤.\nìµœì¢… ë‹µë³€ì€: ì˜ˆ\n\"\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n\nexample_selector <span class=\"token operator\">=</span> SemanticSimilarityExampleSelector<span class=\"token punctuation\">.</span>from_examples<span class=\"token punctuation\">(</span>\n    <span class=\"token comment\"># ì„ íƒ ê°€ëŠ¥í•œ ì˜ˆì‹œ ëª©ë¡</span>\n    examples<span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># ì˜ë¯¸ì  ìœ ì‚¬ì„±ì„ ì¸¡ì •í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì„ë² ë”©ì„ ìƒì„±í•˜ëŠ” ì„ë² ë”© í´ë˜ìŠ¤</span>\n    OpenAIEmbeddings<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># ì„ë² ë”©ì„ ì €ì¥í•˜ê³  ìœ ì‚¬ì„± ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” VectorStore í´ë˜ìŠ¤</span>\n    Chroma<span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># ìƒì„±í•  ì˜ˆì‹œì˜ ìˆ˜</span>\n    k<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\nquestion <span class=\"token operator\">=</span> <span class=\"token string\">\"Googleì´ ì°½ë¦½ëœ ì—°ë„ì— Bill Gatesì˜ ë‚˜ì´ëŠ” ëª‡ ì‚´ì¸ê°€ìš”?\"</span>\n\n<span class=\"token comment\"># ì…ë ¥ê³¼ ê°€ì¥ ìœ ì‚¬í•œ ì˜ˆì‹œë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</span>\nselected_examples <span class=\"token operator\">=</span> example_selector<span class=\"token punctuation\">.</span>select_examples<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"question\"</span><span class=\"token punctuation\">:</span> question<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"ì…ë ¥ì— ê°€ì¥ ìœ ì‚¬í•œ ì˜ˆì‹œ:\\n</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>question<span class=\"token punctuation\">}</span></span><span class=\"token string\">\\n\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> example <span class=\"token keyword\">in</span> selected_examples<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'question:\\n</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>example<span class=\"token punctuation\">[</span><span class=\"token string\">\"question\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'answer:\\n</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>example<span class=\"token punctuation\">[</span><span class=\"token string\">\"answer\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\nì…ë ¥ì— ê°€ì¥ ìœ ì‚¬í•œ ì˜ˆì‹œ:\nGoogleì´ ì°½ë¦½ëœ ì—°ë„ì— Bill Gatesì˜ ë‚˜ì´ëŠ” ëª‡ ì‚´ì¸ê°€ìš”?\n\nquestion:\në„¤ì´ë²„ì˜ ì°½ë¦½ìëŠ” ì–¸ì œ íƒœì–´ë‚¬ë‚˜ìš”?\nanswer:\nì´ ì§ˆë¬¸ì— ì¶”ê°€ ì§ˆë¬¸ì´ í•„ìš”í•œê°€ìš”: ì˜ˆ.\nì¶”ê°€ ì§ˆë¬¸: ë„¤ì´ë²„ì˜ ì°½ë¦½ìëŠ” ëˆ„êµ¬ì¸ê°€ìš”?\nì¤‘ê°„ ë‹µë³€: ë„¤ì´ë²„ëŠ” ì´í•´ì§„ì— ì˜í•´ ì°½ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤.\nì¶”ê°€ ì§ˆë¬¸: ì´í•´ì§„ì€ ì–¸ì œ íƒœì–´ë‚¬ë‚˜ìš”?\nì¤‘ê°„ ë‹µë³€: ì´í•´ì§„ì€ 1967ë…„ 6ì›” 22ì¼ì— íƒœì–´ë‚¬ìŠµë‹ˆë‹¤.\nìµœì¢… ë‹µë³€ì€: 1967ë…„ 6ì›” 22ì¼\n\"\"\"</span></code></pre></div>\n<p><strong><code class=\"language-text\">SemanticSimilarityExampleSelector</code>ì˜ <code class=\"language-text\">from_examples()</code> ë©”ì„œë“œë¡œ Chroma DBì— <code class=\"language-text\">OpenAIEmbeddings()</code> ì„ë² ë”© ëª¨ë¸ë¡œ ì˜ˆì‹œë¥¼ ì„ íƒí•˜ëŠ” ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<p>ì´í›„ì— ê·¸ ìƒì„±í•œ <strong>ê°ì²´ì˜ <code class=\"language-text\">select_examples()</code> ë©”ì„œë“œì— ë”•ì…”ë„ˆë¦¬ í˜•íƒœì˜ ì…ë ¥ì„ ë„£ì–´ì£¼ë©´</strong> <br><strong>ì˜ˆì‹œë“¤ ì¤‘ì—ì„œ ì…ë ¥ê³¼ ìœ ì‚¬í•œ ì˜ˆì‹œ kê°œë¥¼ ì„ íƒí•´ ì¤ë‹ˆë‹¤.</strong></p>\n<p>ì—¬ê¸°ì„œëŠ” <strong>ë‚˜ì´ë¥¼ ë¬¼ì–´ë³´ëŠ” ì˜ˆì‹œë¥¼ ì •í™•í•˜ê²Œ ì„ íƒ</strong>í•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤.</p>\n</blockquote>\n<p>Â </p>\n<p>ê·¸ë ‡ë‹¤ë©´,</p>\n<p><strong>example_selectorì„ ì‹¤ì „ì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëƒ?</strong></p>\n<ol>\n<li>ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸ <code class=\"language-text\">example_prompt</code> í…œí”Œë¦¿ ìƒì„±í•˜ê¸°</li>\n<li>ì„ë² ë”© ëª¨ë¸, ë²¡í„° DB ì„ ì •í•´ì„œ <code class=\"language-text\">example_selector</code> ê°ì²´ ìƒì„±í•˜ê¸°</li>\n<li><code class=\"language-text\">FewShotPromptTemplate</code>ì—ì„œ <code class=\"language-text\">example_selector</code>, <code class=\"language-text\">example_prompt</code>, <code class=\"language-text\">suffix</code>ë¡œ í”„ë¡¬í”„íŠ¸ ì™„ì„±í•˜ê¸°</li>\n<li>chain ìƒì„± í›„ í˜¸ì¶œ</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># chainì—ì„œ ì‚¬ìš©í•´ë³´ê¸°</span>\n\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>example_selectors <span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n    MaxMarginalRelevanceExampleSelector<span class=\"token punctuation\">,</span>\n    SemanticSimilarityExampleSelector<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">from</span> langchain_openai <span class=\"token keyword\">import</span> OpenAIEmbeddings\n<span class=\"token keyword\">from</span> langchain_chroma <span class=\"token keyword\">import</span> Chroma\n<span class=\"token keyword\">from</span> langchain_teddynote<span class=\"token punctuation\">.</span>messages <span class=\"token keyword\">import</span> stream_response\n\n<span class=\"token comment\"># llm, examples ì„¤ì • í•„ìš”</span>\n\nexample_prompt <span class=\"token operator\">=</span> PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"Question:\\n{question}\\nAnswer:\\n{answer}\"</span>\n<span class=\"token punctuation\">)</span>\n\nexample_selector <span class=\"token operator\">=</span> SemanticSimilarityExampleSelector<span class=\"token punctuation\">.</span>from_examples<span class=\"token punctuation\">(</span>\n    examples<span class=\"token punctuation\">,</span>\n    OpenAIEmbeddings<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    Chroma<span class=\"token punctuation\">,</span>\n    k<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\nprompt <span class=\"token operator\">=</span> FewShotPromptTemplate<span class=\"token punctuation\">(</span>\n    example_selector<span class=\"token operator\">=</span>example_selector<span class=\"token punctuation\">,</span>\n    example_prompt<span class=\"token operator\">=</span>example_prompt<span class=\"token punctuation\">,</span>\n    suffix<span class=\"token operator\">=</span><span class=\"token string\">\"Question:\\n{question}\\nAnswer:\"</span><span class=\"token punctuation\">,</span>\n    input_variables<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"question\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ì²´ì¸ ìƒì„±</span>\nchain <span class=\"token operator\">=</span> prompt <span class=\"token operator\">|</span> llm\n\n<span class=\"token comment\"># ê²°ê³¼ ì¶œë ¥</span>\nanswer <span class=\"token operator\">=</span> chain<span class=\"token punctuation\">.</span>stream<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span><span class=\"token string\">\"question\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Googleì´ ì°½ë¦½ëœ ì—°ë„ì— Bill Gatesì˜ ë‚˜ì´ëŠ” ëª‡ ì‚´ì¸ê°€ìš”?\"</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span>\nstream_response<span class=\"token punctuation\">(</span>answer<span class=\"token punctuation\">)</span>\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\nì´ ì§ˆë¬¸ì— ì¶”ê°€ ì§ˆë¬¸ì´ í•„ìš”í•œê°€ìš”: ì˜ˆ.  \nì¶”ê°€ ì§ˆë¬¸: Googleì´ ì°½ë¦½ëœ ì—°ë„ëŠ” ì–¸ì œì¸ê°€ìš”?  \nì¤‘ê°„ ë‹µë³€: Googleì€ 1998ë…„ì— ì°½ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤.  \nì¶”ê°€ ì§ˆë¬¸: Bill GatesëŠ” ì–¸ì œ íƒœì–´ë‚¬ë‚˜ìš”?  \nì¤‘ê°„ ë‹µë³€: Bill GatesëŠ” 1955ë…„ 10ì›” 28ì¼ì— íƒœì–´ë‚¬ìŠµë‹ˆë‹¤.  \nì¶”ê°€ ì§ˆë¬¸: 1998ë…„ì— Bill Gatesì˜ ë‚˜ì´ëŠ” ëª‡ ì‚´ì¸ê°€ìš”?  \nì¤‘ê°„ ë‹µë³€: 1998ë…„ - 1955ë…„ = 43ë…„. 10ì›” 28ì¼ ì´ì „ì—ëŠ” 42ì„¸, ì´í›„ì—ëŠ” 43ì„¸ì…ë‹ˆë‹¤.\n\nìµœì¢… ë‹µë³€: 1998ë…„ì— Bill Gatesì˜ ë‚˜ì´ëŠ” 42ì„¸ ë˜ëŠ” 43ì„¸ì…ë‹ˆë‹¤. (ìƒì¼ì¸ 10ì›” 28ì¼ ì´ì „ì—ëŠ” 42ì„¸, ì´í›„ì—ëŠ” 43ì„¸ì…ë‹ˆë‹¤.)\n\"\"\"</span></code></pre></div>\n<p>êµ³.</p>\n<p>Â </p>\n<p>ì•„, ì°¸ê³ ë¡œ <code class=\"language-text\">MaxMarginalRelevanceExampleSelector</code> ì‚¬ìš©ë²•ì€ <code class=\"language-text\">SemanticSimilarityExampleSelector</code>ë¥¼ <code class=\"language-text\">MaxMarginalRelevanceExampleSelector</code>ë¡œ ë°”ê¾¸ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.</p>\n<p>Â </p>\n<p>â­ï¸ <strong>ë‘˜ì˜ ì°¨ì´ì  ë¹„êµ</strong> â­ï¸</p>\n<table>\n<thead>\n<tr>\n<th>êµ¬ë¶„</th>\n<th>SemanticSimilarityExampleSelector</th>\n<th>MaxMarginalRelevanceExampleSelector (MMR)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>í•µì‹¬ ëª©í‘œ</td>\n<td>queryì™€<strong>ê°€ì¥ ìœ ì‚¬í•œ ì˜ˆì‹œ ì„ íƒ</strong></td>\n<td>queryì™€ ìœ ì‚¬í•˜ë©´ì„œ<strong>ì˜ˆì‹œ ê°„ ì¤‘ë³µ ìµœì†Œí™”</strong></td>\n</tr>\n<tr>\n<td>ê¸°ë³¸ ê°œë…</td>\n<td><strong>ê´€ë ¨ì„±(relevance)ë§Œ ê³ ë ¤</strong></td>\n<td><strong>ê´€ë ¨ì„± + ë‹¤ì–‘ì„±(diversity)</strong></td>\n</tr>\n<tr>\n<td>ì„ íƒ ê¸°ì¤€</td>\n<td><code class=\"language-text\">sim(query, example)</code></td>\n<td><code class=\"language-text\">Î»Â·sim(query, example) âˆ’ (1âˆ’Î»)Â·max(sim(example, selected))</code></td>\n</tr>\n<tr>\n<td>ì˜ˆì‹œ ê°„ ì¤‘ë³µ</td>\n<td>ë†’ìŒ (ë¹„ìŠ·í•œ ì˜ˆì‹œê°€ ëª°ë¦´ ìˆ˜ ìˆìŒ)</td>\n<td>ë‚®ìŒ (ì„œë¡œ ë‹¤ë¥¸ ì¼€ì´ìŠ¤ ìœ„ì£¼)</td>\n</tr>\n<tr>\n<td>ë‹¤ì–‘ì„± ê³ ë ¤</td>\n<td>âŒ</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td>íŒŒë¼ë¯¸í„°</td>\n<td><code class=\"language-text\">k</code></td>\n<td><code class=\"language-text\">k</code>, <code class=\"language-text\">lambda_mult (Î»)</code></td>\n</tr>\n<tr>\n<td>lambda ì˜í–¥</td>\n<td>í•´ë‹¹ ì—†ìŒ</td>\n<td>Î»â†‘ â†’ ìœ ì‚¬ë„ ì¤‘ì‹¬ / Î»â†“ â†’ ë‹¤ì–‘ì„± ì¤‘ì‹¬</td>\n</tr>\n<tr>\n<td>ê³„ì‚° ë¹„ìš©</td>\n<td>ë‚®ìŒ</td>\n<td>ì¤‘ê°„ (ë°˜ë³µ ì„ íƒ)</td>\n</tr>\n<tr>\n<td>í”„ë¡¬í”„íŠ¸ ì •ë³´ëŸ‰</td>\n<td>ì œí•œì </td>\n<td>í’ë¶€ (ì¼€ì´ìŠ¤ ì»¤ë²„ë¦¬ì§€ â†‘)</td>\n</tr>\n<tr>\n<td>Few-shot ì•ˆì •ì„±</td>\n<td>ë³´í†µ</td>\n<td>ë†’ìŒ</td>\n</tr>\n<tr>\n<td>RAG ì í•©ì„±</td>\n<td>â–³</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td>Tool Calling ì í•©ì„±</td>\n<td>âŒ</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td>Agent / Reasoning</td>\n<td>âŒ</td>\n<td>âœ…</td>\n</tr>\n<tr>\n<td>ì¶”ì²œ ì‚¬ìš© ìƒí™©</td>\n<td>ë‹¨ìˆœ Q&#x26;A, í¬ë§· í•™ìŠµ</td>\n<td>API ì„ íƒ, ë³µí•© ì¶”ë¡ , edge case í¬í•¨</td>\n</tr>\n</tbody>\n</table>\n<p>GPT ì„ ìƒë‹˜ì´ ì•Œë ¤ì£¼ì…¨ìŠµë‹ˆë‹¤.</p>\n<p><code class=\"language-text\">MaxMarginalRelevanceExampleSelector</code>ì—ì„œ <br><code class=\"language-text\">Î»Â·sim(query, example) âˆ’ (1âˆ’Î»)Â·max(sim(example, selected))</code> ì‹ì„ ë³´ì•˜ì„ ë•Œ,</p>\n<h5 id=\"code-classlanguage-textsimquery-examplecode-code-classlanguage-textmaxsimexample-selectedcodeë¥¼-ì´ìš©í•˜ê³ -ìˆê³ -ê·¸ë“¤ì˜-ê³„ìˆ˜ê°€-ì„œë¡œ-ë°˜ë¹„ë¡€í•¨ì„-ë³¼-ìˆ˜-ìˆìŠµë‹ˆë‹¤\" style=\"position:relative;\"><a href=\"#code-classlanguage-textsimquery-examplecode-code-classlanguage-textmaxsimexample-selectedcode%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B3%A0-%EC%9E%88%EA%B3%A0-%EA%B7%B8%EB%93%A4%EC%9D%98-%EA%B3%84%EC%88%98%EA%B0%80-%EC%84%9C%EB%A1%9C-%EB%B0%98%EB%B9%84%EB%A1%80%ED%95%A8%EC%9D%84-%EB%B3%BC-%EC%88%98-%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4\" aria-label=\"code classlanguage textsimquery examplecode code classlanguage textmaxsimexample selectedcodeë¥¼ ì´ìš©í•˜ê³  ìˆê³  ê·¸ë“¤ì˜ ê³„ìˆ˜ê°€ ì„œë¡œ ë°˜ë¹„ë¡€í•¨ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">sim(query, example)</code>, <code class=\"language-text\">max(sim(example, selected)</code>ë¥¼ ì´ìš©í•˜ê³  ìˆê³ , ê·¸ë“¤ì˜ ê³„ìˆ˜ê°€ ì„œë¡œ ë°˜ë¹„ë¡€í•¨ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</h5>\n<p>ì¦‰, <strong>queryì™€ ìœ ì‚¬ì„±ê³¼ ì„ íƒëœ ì˜ˆì‹œì™€ì˜ ìœ ì‚¬ì„±ì„ ë™ì‹œì— ê³ ë ¤í•œë‹¤</strong>ëŠ” ê²ƒì…ë‹ˆë‹¤.<br>**â€œíŒŒë¼ë¯¸í„° Î»ê°€ í¬ë‹¤â€ = â€œì§ˆë¬¸ê³¼ ìœ ì‚¬í•œ ê²ƒë“¤ì„ ê³ ë¥´ì§€ë§Œ, ë°˜ëŒ€ë¡œ ì„ íƒë˜ëŠ” ê²ƒë“¤ ì‚¬ì´ì—ëŠ” ìœ ì‚¬í•˜ì§€ ì•Šë„ë¡ í•œë‹¤â€**ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>(â€¼ï¸ langchainì˜ MaxMarginalRelevanceExampleSelectorëŠ” <code class=\"language-text\">lambda_mult</code> ì„¤ì •ì´ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì§ì ‘ ì»¤ìŠ¤í…€í•´ì„œ ë§Œë“¤ì–´ì•¼ í•œë‹¤ê³  í•©ë‹ˆë‹¤.)</p>\n<p>Â </p>\n<p>Â </p>\n<p><strong>í•˜ì§€ë§Œ, Example Selector ë¬¸ì œì ì´ ìˆë‹¤ê³  í•©ë‹ˆë‹¤.</strong></p>\n<p>ìƒí™© ì •ì˜ë¶€í„° í•©ì‹œë‹¤.</p>\n<ol>\n<li>ì˜ˆì‹œì— <code class=\"language-text\">instruction</code>, <code class=\"language-text\">input</code>, <code class=\"language-text\">answer</code>ì™€ ê°™ì´ ì—¬ëŸ¬ ë³€ìˆ˜ê°€ ìˆìŒ</li>\n<li>LLMì—ê²Œ ì˜ˆì‹œì²˜ëŸ¼ <code class=\"language-text\">instruction</code>, <code class=\"language-text\">input</code>ì˜ ê°’ì„ ë˜ì ¸ì£¼ê³ , <code class=\"language-text\">answer</code> ê°’ì„ ë°›ì•„ì™€ì•¼ í•˜ëŠ”ë°</li>\n<li>ê·¸ëŸ¬ì§€ ì•Šê³  <code class=\"language-text\">instruction</code>ë§Œ ë˜ì ¸ì£¼ì—ˆì„ ë•Œ ì˜¬ë°”ë¥¸ ë‹µë³€ì„ í•´ì£¼ì§€ ëª»í•¨</li>\n</ol>\n<p><code class=\"language-text\">instruction</code>, <code class=\"language-text\">input</code>ì„ í•¨ê»˜ ê³ ë ¤í•˜ì—¬ ìœ ì‚¬ë„ ê³„ì‚°ì„ í•´ì•¼í•˜ëŠ”ë°<br>ê·¸ëŸ¬ì§€ ëª»í•˜ì—¬ ì˜¤ë¥˜ê°€ ë‚œë‹¤ê³  í•©ë‹ˆë‹¤.</p>\n<p>Â </p>\n<p>ê·¸ëŸ°ë°,</p>\n<p><strong>ê°“ í…Œë””ë…¸íŠ¸ë‹˜ê»˜ì„œ ë§Œë“œì‹  CustomExampleSelector() ëª¨ë“ˆì—ì„œ <code class=\"language-text\">search_key</code> ì„¤ì •ì„ í†µí•´ ì§ì ‘ ìœ ì‚¬ë„ë¥¼ ê³„ì‚°í•˜ê³ ì í•˜ëŠ” ë³€ìˆ˜ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_teddynote<span class=\"token punctuation\">.</span>prompts <span class=\"token keyword\">import</span> CustomExampleSelector\n\n<span class=\"token comment\"># ì»¤ìŠ¤í…€ ì˜ˆì œ ì„ íƒê¸° ìƒì„±</span>\n<span class=\"token comment\"># examplesì—ì„œ ìœ ì‚¬ë„ ê³„ì‚°í•˜ëŠ” ë³€ìˆ˜ë¥¼ instructionë¡œ ì§€ì •</span>\n<span class=\"token comment\"># search_keyì˜ ê¸°ë³¸ ê°’ì€ instruction.</span>\ncustom_selector <span class=\"token operator\">=</span> CustomExampleSelector<span class=\"token punctuation\">(</span>examples<span class=\"token operator\">=</span>examples<span class=\"token punctuation\">,</span> embedding_model<span class=\"token operator\">=</span>OpenAIEmbeddings<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> search_key<span class=\"token operator\">=</span><span class=\"token string\">\"instruction\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ì»¤ìŠ¤í…€ ì˜ˆì œ ì„ íƒê¸°ë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ ê²°ê³¼</span>\ncustom_selector<span class=\"token punctuation\">.</span>select_examples<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"instruction\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ë‹¤ìŒ ë¬¸ì¥ì„ íšŒì˜ë¡ ì‘ì„±í•´ ì£¼ì„¸ìš”\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\n[{'instruction': 'ë‹¹ì‹ ì€ íšŒì˜ë¡ ì‘ì„± ì „ë¬¸ê°€ ì…ë‹ˆë‹¤. ì£¼ì–´ì§„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ íšŒì˜ë¡ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”',\n  'input': '2023ë…„ 12ì›” 25ì¼, XYZ íšŒì‚¬ì˜ ë§ˆì¼€íŒ… ì „ëµ íšŒì˜ê°€ ì˜¤í›„ 3ì‹œì— ì‹œì‘ë˜ì—ˆë‹¤. íšŒì˜ì—ëŠ” ë§ˆì¼€íŒ… íŒ€ì¥ì¸ ê¹€ìˆ˜ì§„, ë””ì§€í„¸ ë§ˆì¼€íŒ… ë‹´ë‹¹ìì¸ ë°•ì§€ë¯¼, ì†Œì…œ ë¯¸ë””ì–´ ê´€ë¦¬ìì¸ ì´ì¤€í˜¸ê°€ ì°¸ì„í–ˆë‹¤. íšŒì˜ì˜ ì£¼ìš” ëª©ì ì€ 2024ë…„ ìƒë°˜ê¸° ë§ˆì¼€íŒ… ì „ëµì„ ìˆ˜ë¦½í•˜ê³ , ìƒˆë¡œìš´ ì†Œì…œ ë¯¸ë””ì–´ ìº í˜ì¸ì— ëŒ€í•œ ì•„ì´ë””ì–´ë¥¼ ë…¼ì˜í•˜ëŠ” ê²ƒì´ì—ˆë‹¤. íŒ€ì¥ì¸ ê¹€ìˆ˜ì§„ì€ ìµœê·¼ ì‹œì¥ ë™í–¥ì— ëŒ€í•œ ê°„ëµí•œ ê°œìš”ë¥¼ ì œê³µí–ˆìœ¼ë©°, ì´ì–´ì„œ ê° íŒ€ì›ì´ ìì‹ ì˜ ë¶„ì•¼ì—ì„œì˜ ì „ëµì  ì•„ì´ë””ì–´ë¥¼ ë°œí‘œí–ˆë‹¤.',\n  'answer': '\\níšŒì˜ë¡: XYZ íšŒì‚¬ ë§ˆì¼€íŒ… ì „ëµ íšŒì˜\\nì¼ì‹œ: 2023ë…„ 12ì›” 25ì¼\\nì¥ì†Œ: XYZ íšŒì‚¬ íšŒì˜ì‹¤\\nì°¸ì„ì: ê¹€ìˆ˜ì§„ (ë§ˆì¼€íŒ… íŒ€ì¥), ë°•ì§€ë¯¼ (ë””ì§€í„¸ ë§ˆì¼€íŒ… ë‹´ë‹¹ì), ì´ì¤€í˜¸ (ì†Œì…œ ë¯¸ë””ì–´ ê´€ë¦¬ì)\\n\\n1. ê°œíšŒ\\n   - íšŒì˜ëŠ” ê¹€ìˆ˜ì§„ íŒ€ì¥ì˜ ê°œíšŒì‚¬ë¡œ ì‹œì‘ë¨.\\n   - íšŒì˜ì˜ ëª©ì ì€ 2024ë…„ ìƒë°˜ê¸° ë§ˆì¼€íŒ… ì „ëµ ìˆ˜ë¦½ ë° ìƒˆë¡œìš´ ì†Œì…œ ë¯¸ë””ì–´ ìº í˜ì¸ ì•„ì´ë””ì–´ ë…¼ì˜.\\n\\n2. ì‹œì¥ ë™í–¥ ê°œìš” (ê¹€ìˆ˜ì§„)\\n   - ê¹€ìˆ˜ì§„ íŒ€ì¥ì€ ìµœê·¼ ì‹œì¥ ë™í–¥ì— ëŒ€í•œ ë¶„ì„ì„ ì œì‹œ.\\n   - ì†Œë¹„ì í–‰ë™ ë³€í™”ì™€ ê²½ìŸì‚¬ ì „ëµì— ëŒ€í•œ í†µì°° ê³µìœ .\\n\\n3. ë””ì§€í„¸ ë§ˆì¼€íŒ… ì „ëµ (ë°•ì§€ë¯¼)\\n   - ë°•ì§€ë¯¼ì€ ë””ì§€í„¸ ë§ˆì¼€íŒ… ì „ëµì— ëŒ€í•´ ë°œí‘œ.\\n   - ì˜¨ë¼ì¸ ê´‘ê³ ì™€ SEO ìµœì í™” ë°©ì•ˆì— ì¤‘ì ì„ ë‘ .\\n\\n4. ì†Œì…œ ë¯¸ë””ì–´ ìº í˜ì¸ (ì´ì¤€í˜¸)\\n   - ì´ì¤€í˜¸ëŠ” ìƒˆë¡œìš´ ì†Œì…œ ë¯¸ë””ì–´ ìº í˜ì¸ì— ëŒ€í•œ ì•„ì´ë””ì–´ë¥¼ ì œì•ˆ.\\n   - ì¸í”Œë£¨ì–¸ì„œ ë§ˆì¼€íŒ…ê³¼ ì½˜í…ì¸  ì „ëµì— ëŒ€í•œ ê³„íšì„ ì„¤ëª…í•¨.\\n\\n5. ì¢…í•© ë…¼ì˜\\n   - íŒ€ì›ë“¤ ê°„ì˜ ì•„ì´ë””ì–´ ê³µìœ  ë° í† ë¡ .\\n   - ê° ì „ëµì— ëŒ€í•œ ì˜ˆì‚° ë° ìì› ë°°ë¶„ì— ëŒ€í•´ ë…¼ì˜.\\n\\n6. ë§ˆë¬´ë¦¬\\n   - ë‹¤ìŒ íšŒì˜ ë‚ ì§œ ë° ì‹œê°„ í™•ì •.\\n   - íšŒì˜ë¡ ì •ë¦¬ ë° ë°°í¬ëŠ” ë°•ì§€ë¯¼ ë‹´ë‹¹.\\n'}]\n\"\"\"</span></code></pre></div>\n<p>ì›ë˜ëŠ” ë‹¤ë¥¸ ì˜ˆì‹œ(êµì • ì „ë¬¸ê°€ ê´€ë ¨)ê°€ ì„ íƒëì—ˆëŠ”ë° <br>ì§€ê¸ˆì€ ì •í™•í•˜ê²Œ ì„ íƒë¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>Â </p>\n<p>Â </p>\n<h2 id=\"langchain-hub\" style=\"position:relative;\"><a href=\"#langchain-hub\" aria-label=\"langchain hub permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LangChain Hub</h2>\n<hr>\n<p>LangChain Hubì—ì„œ í”„ë¡¬í”„íŠ¸ë¥¼ ë‹¹ê²¨ì˜¬ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸: <a href=\"https://smith.langchain.com/hub/rlm/rag-prompt\">https://smith.langchain.com/hub/rlm/rag-prompt</a></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain <span class=\"token keyword\">import</span> hub\n\n<span class=\"token comment\"># ê°€ì¥ ìµœì‹  ë²„ì „ì˜ í”„ë¡¬í”„íŠ¸ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.</span>\nprompt <span class=\"token operator\">=</span> hub<span class=\"token punctuation\">.</span>pull<span class=\"token punctuation\">(</span><span class=\"token string\">\"rlm/rag-prompt\"</span><span class=\"token punctuation\">)</span>\nprompt\n<span class=\"token comment\"># ì¶œë ¥: input_variables=['context', 'question'] input_types={} partial_variables={} metadata={'lc_hub_owner': 'rlm', 'lc_hub_repo': 'rag-prompt', 'lc_hub_commit_hash': '50442af133e61576e74536c6556cefe1fac147cad032f4377b60c436e6cdcb6e'} messages=[HumanMessagePromptTemplate(prompt=PromptTemplate(input_variables=['context', 'question'], input_types={}, partial_variables={}, template=\"You are an assistant for question-answering tasks. Use the following pieces of retrieved context to answer the question. If you don't know the answer, just say that you don't know. Use three sentences maximum and keep the answer concise.\\nQuestion: {question} \\nContext: {context} \\nAnswer:\"), additional_kwargs={})]</span></code></pre></div>\n<p>ì´ë•Œ, í”„ë¡¬í”„íŠ¸ëŠ” ìˆ˜ì •ë  ìˆ˜ ìˆìœ¼ë‹ˆ í”„ë¡¬í”„íŠ¸ ë²„ì „ í•´ì‹œë¥¼ ì§€ì •í•´ë‘ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.<br>ë²„ì „ í•´ì‹œëŠ” í•´ë‹¹ í”„ë¡¬í”„íŠ¸ì—ì„œ commit ë¶€ë¶„ ë“¤ì–´ê°€ë©´ ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># íŠ¹ì • ë²„ì „ì˜ í”„ë¡¬í”„íŠ¸ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ë²„ì „ í•´ì‹œ ì§€ì •</span>\nprompt <span class=\"token operator\">=</span> hub<span class=\"token punctuation\">.</span>pull<span class=\"token punctuation\">(</span><span class=\"token string\">\"rlm/rag-prompt:50442af1\"</span><span class=\"token punctuation\">)</span>\nprompt</code></pre></div>\n<p>í”„ë¡¬í”„íŠ¸ë¥¼ í—ˆë¸Œì— ì—…ë¡œë“œë¥¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain <span class=\"token keyword\">import</span> hub\n\n<span class=\"token comment\"># í”„ë¡¬í”„íŠ¸ë¥¼ í—ˆë¸Œì— ì—…ë¡œë“œí•©ë‹ˆë‹¤.</span>\nhub<span class=\"token punctuation\">.</span>push<span class=\"token punctuation\">(</span><span class=\"token string\">\"teddynote/simple-summary-korean\"</span><span class=\"token punctuation\">,</span> prompt<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ìì‹ ì˜ â€œID/ë ˆí¬ì§€í† ë¦¬â€ë¥¼ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.</p>\n<p>Â \nÂ </p>\n<p>ì—¬ê¸°ì„œ ë„ì•.</p>\n<p>Â </p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#fewshotprompttemplate\">FewShotPromptTemplate</a></p>\n<ul>\n<li>\n<ul>\n<li>\n<ul>\n<li><a href=\"#simquery-example-maxsimexample-selected%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B3%A0-%EC%9E%88%EA%B3%A0-%EA%B7%B8%EB%93%A4%EC%9D%98-%EA%B3%84%EC%88%98%EA%B0%80-%EC%84%9C%EB%A1%9C-%EB%B0%98%EB%B9%84%EB%A1%80%ED%95%A8%EC%9D%84-%EB%B3%BC-%EC%88%98-%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4\"><code class=\"language-text\">sim(query, example)</code>, <code class=\"language-text\">max(sim(example, selected)</code>ë¥¼ ì´ìš©í•˜ê³  ìˆê³ , ê·¸ë“¤ì˜ ê³„ìˆ˜ê°€ ì„œë¡œ ë°˜ë¹„ë¡€í•¨ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#langchain-hub\">LangChain Hub</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"December 14, 2025","title":"[LLM] í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ ë„ì ë„ì -4","categories":"LLM","author":"ë³€ìš°ì¤‘","emoji":"â˜€ï¸"},"fields":{"slug":"/25-12-14_1/"}},"site":{"siteMetadata":{"siteUrl":"https://www.zoomkoding.com","comments":{"utterances":{"repo":"https://github.com/byeonwoojung/byeonwoojung.github.io"}}}}},"pageContext":{"slug":"/25-12-13_1/","nextSlug":"/25-12-12_1/","prevSlug":"/25-12-14_1/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}