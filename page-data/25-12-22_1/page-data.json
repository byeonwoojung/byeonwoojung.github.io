{"componentChunkName":"component---src-templates-blog-template-js","path":"/25-12-22_1/","result":{"data":{"cur":{"id":"bdf921ea-25f0-5e43-8d59-d6039447df3e","html":"<p>ì°¸ê³  : í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ (<a href=\"https://fastcampus.co.kr/data_online_teddy)\">https://fastcampus.co.kr/data_online_teddy)</a><br>ì†ŒìŠ¤ì½”ë“œ: <a href=\"https://github.com/teddylee777/langchain-kr\">https://github.com/teddylee777/langchain-kr</a><br>ìœ„í‚¤ë…ìŠ¤: <a href=\"https://wikidocs.net/book/14314\">https://wikidocs.net/book/14314</a></p>\n<p>Â </p>\n<p>ì§€ë‚œ ë²ˆì— OutputParserëŠ” í•„ìš” ì‹œ ë‹¤ë£¨ê³ ì í–ˆëŠ”ë°<br>ì œ ì„±ê²©ìƒ ë°”ë¡œ ë˜ ë‚¨ê²¨ë†”ì•¼í•´ì„œ.. ì˜¤ëŠ˜ì€ ë‚˜ë¨¸ì§€ OutputParser ë„ì ì´ê³  ê°€ê² ìŠµë‹ˆë‹¤..</p>\n<p>ë ˆì¸ ê³ ì˜¤!!</p>\n<p>Â </p>\n<h2 id=\"ì´ì™¸ì˜-outputparser\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EC%99%B8%EC%9D%98-outputparser\" aria-label=\"ì´ì™¸ì˜ outputparser permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì´ì™¸ì˜ OutputParser</h2>\n<hr>\n<p>ìš”ì•½í•´ì„œ ì ì–´ë‘ê³ ì í•©ë‹ˆë‹¤.</p>\n<ol>\n<li><code class=\"language-text\">CommaSeparatedListOutputParser</code>ë¥¼ chainì— ë‹¬ì•„ ìŠ¤íŠ¸ë¦¬ë° ì¶œë ¥í•  ë•ŒëŠ” ê° ì‘ë‹µ 1ê°œì”©ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. (ëª¨ë“  ì‘ë‹µì„ ë¬¶ì–´ì„œ ë¦¬ìŠ¤íŠ¸ë¡œ ë°˜í™˜í•˜ì§€ ì•ŠìŒ)</li>\n</ol>\n<p>Â </p>\n<ol start=\"2\">\n<li><code class=\"language-text\">StructuredOutputParser</code>ëŠ” <code class=\"language-text\">ResponseSchema</code> í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ ì •ì˜í•˜ê³  <code class=\"language-text\">from_response_schemas()</code> ë©”ì„œë“œë¥¼ ì´ìš©í•´ íŒŒì„œ ì´ˆê¸°í™”ë¥¼ í•´ì¤€ë‹¤. ë¡œì»¬ê³¼ ëœ ê°•ë ¥í•œ ëª¨ë¸ì— ìœ ìš©í•œ íŒŒì„œë¼ê³  í•œë‹¤.</li>\n</ol>\n<p>Â </p>\n<ol start=\"3\">\n<li><code class=\"language-text\">JsonOutputParser</code>ëŠ” Pydantic íŒŒì„œì—ì„œ í–ˆë˜ ë°©ì‹ê³¼ ê°™ì´ ë°ì´í„° êµ¬ì¡°ë¥¼ í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ ì •ì˜í•´ì£¼ê³  <code class=\"language-text\">pydantic_object</code> íŒŒë¼ë¯¸í„° ê°’ì— í•´ë‹¹ í´ë˜ìŠ¤ëª… ê°’ì„ ì „ë‹¬í•´ì£¼ì–´, íŒŒì„œë¡œ ì •ì˜í•˜ì—¬ ì‚¬ìš©í•œë‹¤.<br>ì´ë•Œ, chainì„ êµ¬ì„±í•˜ì—¬ <code class=\"language-text\">invoke()</code> ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ë‹µë³€ì„ <strong>ë”•ì…”ë„ˆë¦¬ í˜•íƒœë¡œ íŒŒì‹±ë˜ì–´ ê°’ì„ ë°›ì„ ìˆ˜ ìˆë‹¤.</strong></li>\n</ol>\n<p>Â </p>\n<ol start=\"4\">\n<li>\n<p><strong><code class=\"language-text\">PandasDataFrameOutputParser</code>ëŠ” LLMì´ Pandas ë°ì´í„°í”„ë ˆì„ì—ì„œ ì§ˆë¬¸ì— ë§ëŠ” ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ë¬¸(ì˜ˆ: <code class=\"language-text\">column:Age</code>, <code class=\"language-text\">mean:Age[0..4]</code>)ì„ ì‘ë‹µìœ¼ë¡œ ë‚´ë†“ì€ ê²ƒì„ ë°”íƒ•ìœ¼ë¡œ ê·¸ ë¬¸ìì—´ì„ íŒŒì‹±í•˜ì—¬ ì‹¤ì œë¡œ ë°ì´í„°í”„ë ˆì„ì—ì„œ ì¡°íšŒí•˜ì—¬ ë”•ì…”ë„ˆë¦¬ í˜•íƒœë¡œ ê²°ê³¼ë¥¼ ì¶œë ¥í•œë‹¤.</strong></p>\n<ul>\n<li>\n<p>ì¦‰, <strong><code class=\"language-text\">parser=PandasDataFrameOutputParser(dataframe=df)</code>ë¡œ ì •ì˜í–ˆì„ ë•Œ</strong></p>\n</li>\n<li>\n<p><strong><code class=\"language-text\">parser.get_instructions()</code>ë¡œ ë°ì´í„°í”„ë ˆì„ì˜ ì»¬ëŸ¼ êµ¬ì¡° ë“± ì •ë³´ë¥¼ LLMì—ê²Œ ì£¼ê³  LLMì´ ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ” ëª…ë ¹ ë¬¸ìì—´ì„ ë‹µë³€ìœ¼ë¡œ ë‚´ë†“ìœ¼ë©´</strong><br>(LLMì—ê²ŒëŠ” ì‹¤ì œ ë°ì´í„°ê°€ ì•„ë‹Œ ì»¬ëŸ¼ êµ¬ì¡°ì— ëŒ€í•œ ì •ë³´ë§Œ ì£¼ëŠ” ê²ƒì„)</p>\n</li>\n<li>\n<p><strong>parserê°€ ê·¸ ëª…ë ¹ ë¬¸ìì—´ì„ íŒŒì‹±í•˜ì—¬ dataframeì— ì „ë‹¬í•œ â€˜ì‹¤ì œ dfì˜ ë°ì´í„°ì—ì„œ ì½ê³ â€™ ë‹µë³€ì„ ë‚´ë†“ëŠ”ë‹¤</strong>.</p>\n</li>\n<li>\n<p>â­ï¸ <strong>ì¥ì : ëª¨ë“  ë°ì´í„°ë¥¼ LLMì—ê²Œ ì „ë‹¬í•˜ì§€ ì•Šê³ , ë°ì´í„° êµ¬ì¡°ë¥¼ ì¡°íšŒí•˜ëŠ” ë°©ë²•ë§Œ ë°›ì•„ì™€ íŒŒì„œë¡œ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.</strong> â­ï¸</p>\n</li>\n</ul>\n</li>\n</ol>\n<p>Â </p>\n<ol start=\"5\">\n<li><code class=\"language-text\">DateTimeOutputParser</code>ëŠ” <code class=\"language-text\">format()</code> ë©”ì„œë“œë¥¼ ì´ìš©í•´ íŒŒì‹±í•˜ê³ ì í•˜ëŠ” datetime í˜•ì‹ì„ ì •í•´ì£¼ì–´ ê·¸ í˜•ì‹ì˜ ë‹µë³€ì„ ë°›ëŠ”ë‹¤. ìµœì¢… ì‘ë‹µì„ <code class=\"language-text\">strftime()</code> ë©”ì„œë“œë¥¼ ì´ìš©í•´ datetime í˜•ì‹ì„ ë¬¸ìì—´ í˜•ì‹ìœ¼ë¡œ ë°”ê¾¸ì–´ ì´ìš©í•  ìˆ˜ ìˆë‹¤.\n<ul>\n<li><code class=\"language-text\">datetime.datetime(1998, 9, 4, 0, 0)</code> -> <code class=\"language-text\">.strftime(\"%Y-%m-%d\")</code>ì„ ì´ìš©í•´ <code class=\"language-text\">'1998-09-04'</code> ì´ë ‡ê²Œ ë°”ê¾¸ì–´ í™œìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>\n</ul>\n</li>\n</ol>\n<p>Â </p>\n<ol start=\"6\">\n<li>\n<p><code class=\"language-text\">EnumOutputParser</code>ëŠ” enum ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ Enum ëª¨ë“ˆì„ ìƒì†ëª¨ë¸ë¡œ í•˜ì—¬ í´ë˜ìŠ¤ ì •ì˜ë¥¼ í•œ í›„, í•´ë‹¹ íŒŒì„œì˜ enum íŒŒë¼ë¯¸í„°ì— í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ì „ë‹¬í•¨ìœ¼ë¡œì¨ íŒŒì„œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. <strong>chainì—ì„œ ìµœì¢… ì‘ë‹µ í˜•ì‹ì€ Enum ë©¤ë²„ ê°ì²´ì´ë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> enum <span class=\"token keyword\">import</span> Enum\n<span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>prompts <span class=\"token keyword\">import</span> PromptTemplate\n<span class=\"token keyword\">from</span> langchain_openai <span class=\"token keyword\">import</span> ChatOpenAI\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Colors</span><span class=\"token punctuation\">(</span>Enum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    RED <span class=\"token operator\">=</span> <span class=\"token string\">\"ë¹¨ê°„ìƒ‰\"</span>\n    GREEN <span class=\"token operator\">=</span> <span class=\"token string\">\"ì´ˆë¡ìƒ‰\"</span>\n    BLUE <span class=\"token operator\">=</span> <span class=\"token string\">\"íŒŒë€ìƒ‰\"</span>\n\nparser <span class=\"token operator\">=</span> EnumOutputParser<span class=\"token punctuation\">(</span>enum<span class=\"token operator\">=</span>Colors<span class=\"token punctuation\">)</span>\nparser<span class=\"token punctuation\">.</span>get_format_instructions<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token triple-quoted-string string\">\"\"\"â­ï¸ ì¶œë ¥ â­ï¸:\n'Select one of the following options: ë¹¨ê°„ìƒ‰, ì´ˆë¡ìƒ‰, íŒŒë€ìƒ‰'\n\"\"\"</span></code></pre></div>\n<ul>\n<li><strong><code class=\"language-text\">get_format_instructions()</code> ë©”ì„œë“œë¡œ ì¶œë ¥í•´ë³´ë©´ <code class=\"language-text\">Colors</code> í´ë˜ìŠ¤ ì•ˆì— ì •ì˜ëœ ê°’ë“¤(<code class=\"language-text\">RED</code>, <code class=\"language-text\">GREEN</code>, <code class=\"language-text\">BLUE</code>)ì˜ Value(<code class=\"language-text\">ë¹¨ê°„ìƒ‰</code>, <code class=\"language-text\">ì´ˆë¡ìƒ‰</code>, <code class=\"language-text\">íŒŒë€ìƒ‰</code>)ë¥¼ ì½ì–´ì˜¨ë‹¤. (ì¦‰, Enum ë©¤ë²„ê°€ ì•„ë‹Œ Enum ê°’ì„ ê°€ì ¸ì˜´)</strong></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">prompt <span class=\"token operator\">=</span> PromptTemplate<span class=\"token punctuation\">.</span>from_template<span class=\"token punctuation\">(</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"ë‹¤ìŒì˜ ë¬¼ì²´ëŠ” ì–´ë–¤ ìƒ‰ê¹”ì¸ê°€ìš”?\n\nObject: {object}\n\nInstructions: {instructions}\"\"\"</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>partial<span class=\"token punctuation\">(</span>instructions<span class=\"token operator\">=</span>parser<span class=\"token punctuation\">.</span>get_format_instructions<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nchain <span class=\"token operator\">=</span> prompt <span class=\"token operator\">|</span> ChatOpenAI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> parser\nresponse <span class=\"token operator\">=</span> chain<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"object\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"í•˜ëŠ˜\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span>\n<span class=\"token triple-quoted-string string\">\"\"\"â­ï¸ ì¶œë ¥ â­ï¸:\nColors.BLUE\n\"\"\"</span></code></pre></div>\n<ul>\n<li>\n<p>â­ï¸ í•˜ì§€ë§Œ, <strong>chainì—ì„œ <code class=\"language-text\">parser</code>ë¥¼ í†µí•´ ì‘ë‹µë°›ì€ ê²°ê³¼ëŠ” Enum ë©¤ë²„ ê°ì²´ì´ë‹¤.</strong><br><strong>ì¦‰, LLMì˜ í…ìŠ¤íŠ¸ ì‘ë‹µì„ Python Enum íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•´ì£¼ì–´ Color.BLUE ë©¤ë²„ ê°ì²´ë¡œ ë°”ê¾¸ì–´ ì¶œë ¥ì„ í•´ì¤€ë‹¤.</strong> â­ï¸</p>\n</li>\n<li>\n<p>â­ï¸ <strong>ì´ë ‡ê²Œ ë©¤ë²„ ê°ì²´ë¡œ ë°”ê¾¸ì–´ì£¼ê¸° ë•Œë¬¸ì—<br><code class=\"language-text\">response.value</code>ë¡œ ì ‘ê·¼í•´ì„œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê°’ìœ¼ë¡œ ë§¤í•‘í•˜ì—¬ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong> â­ï¸</p>\n</li>\n</ul>\n</li>\n</ol>\n<p>Â </p>\n<p>ì¶”ê°€ë¡œ,</p>\n<p>ì´ì „ ê¸€(<a href=\"https://byeonwoojung.github.io/25-12-13_1/)%EC%97%90\">https://byeonwoojung.github.io/25-12-13_1/)ì—</a> ì ì—ˆë˜ ë‚´ìš©ì¸ë°,</p>\n<ul>\n<li>\n<p><strong><code class=\"language-text\">OutputFixingParser</code>ë¥¼ ì´ìš©í•´ì„œ ë‹¤ì‹œ ê³ ì³ë‹¬ë¼ëŠ” ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆê³ , <code class=\"language-text\">RetryOutputParser</code>ì„ ì´ìš©í•´ì„œ ì²˜ìŒ ë³´ëƒˆë˜ í”„ë¡¬í”„íŠ¸ì™€ ì˜ëª»ëœ ë‹µë³€ì„ ëª¨ë‘ í•¨ê»˜ ì£¼ì–´ ì¬ì‹œë„ë¥¼ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain<span class=\"token punctuation\">.</span>output_parsers <span class=\"token keyword\">import</span> OutputFixingParser\n\n<span class=\"token comment\"># ê¸°ì¡´ parserë¥¼ ê°ì‹¸ì„œ ì •ì˜</span>\nfixing_parser <span class=\"token operator\">=</span> OutputFixingParser<span class=\"token punctuation\">.</span>from_llm<span class=\"token punctuation\">(</span>parser<span class=\"token operator\">=</span>parser<span class=\"token punctuation\">,</span> llm<span class=\"token operator\">=</span>ChatOpenAI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ì´ì œ ì²´ì¸ì—ì„œ ì—ëŸ¬ê°€ ë‚˜ë©´ ìŠ¤ìŠ¤ë¡œ ìˆ˜ì • ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.</span>\nchain <span class=\"token operator\">=</span> prompt <span class=\"token operator\">|</span> model <span class=\"token operator\">|</span> fixing_parser</code></pre></div>\n</li>\n<li>\n<p><strong>ë˜ëŠ”, <code class=\"language-text\">with_fallbacks</code>ì„ ì´ìš©í•´ì„œ í”Œëœ B ì²´ì¸ì„ ì¤€ë¹„í•´ë‘˜ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">chain <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>prompt <span class=\"token operator\">|</span> model <span class=\"token operator\">|</span> parser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>with_fallbacks<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>backup_chain<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n<p>ì´ë“¤ì„ chainì— í•¨ê»˜ ë‘ë©´ ì¢‹ì„ ë“¯ í•©ë‹ˆë‹¤.</p>\n<p>Â </p>\n<p>Â </p>\n<p>ì—¬ê¸°ê¹Œì§€ ëŠê³  ê°‘ë‹ˆë‹¤~</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%9D%B4%EC%99%B8%EC%9D%98-outputparser\">ì´ì™¸ì˜ OutputParser</a></li>\n</ul>\n</div>","excerpt":"ì°¸ê³  : í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ (https://fastcampus.co.kr/data_online_teddy)ì†ŒìŠ¤ì½”ë“œ: https://github.com/teddylee777/langchain-krìœ„í‚¤ë…ìŠ¤: https://wikidocs.net/book/14314 Â  ì§€ë‚œ ë²ˆì— OutputParserëŠ” í•„ìš” ì‹œ ë‹¤ë£¨ê³ ì í–ˆëŠ”ë°ì œ ì„±ê²©ìƒ ë°”ë¡œ ë˜ ë‚¨ê²¨ë†”ì•¼í•´ì„œ.. ì˜¤ëŠ˜ì€ ë‚˜ë¨¸ì§€ OutputParser ë„ì ì´ê³  ê°€ê² ìŠµë‹ˆë‹¤.. ë ˆì¸ ê³ ì˜¤!! Â  ì´ì™¸ì˜ OutputParser ìš”ì•½í•´ì„œ ì ì–´ë‘ê³ ì í•©ë‹ˆë‹¤. ë¥¼ chainì— ë‹¬ì•„ ìŠ¤íŠ¸ë¦¬ë° ì¶œë ¥í•  ë•ŒëŠ” ê° ì‘ë‹µ 1ê°œì”©ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. (ëª¨ë“  ì‘ë‹µì„ ë¬¶ì–´ì„œ ë¦¬ìŠ¤íŠ¸ë¡œ ë°˜í™˜í•˜ì§€ ì•ŠìŒ) Â  ëŠ”  í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ ì •ì˜í•˜ê³   ë©”ì„œë“œë¥¼ ì´ìš©í•´ íŒŒì„œ ì´ˆê¸°í™”ë¥¼ í•´ì¤€ë‹¤. ë¡œì»¬ê³¼ ëœ ê°•ë ¥í•œ ëª¨ë¸ì— ìœ ìš©í•œ íŒŒì„œë¼ê³  í•œë‹¤. Â  ëŠ” Pydantic íŒŒì„œì—ì„œ í–ˆë˜ ë°©ì‹ê³¼ ê°™ì´ ë°ì´í„° êµ¬ì¡°ë¥¼ í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ ì •ì˜í•´ì£¼ê³   íŒŒë¼ë¯¸í„° ê°’ì— í•´ë‹¹ í´ë˜ìŠ¤ëª… ê°’ì„â€¦","frontmatter":{"date":"December 22, 2025","title":"[LLM] í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ ë„ì ë„ì -6","categories":"LLM","author":"ë³€ìš°ì¤‘","emoji":"â˜€ï¸"},"fields":{"slug":"/25-12-22_1/"}},"next":{"id":"905bdc07-3be5-56b6-b025-f3fdad7ea637","html":"<p>ì°¸ê³  : í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ (<a href=\"https://fastcampus.co.kr/data_online_teddy)\">https://fastcampus.co.kr/data_online_teddy)</a><br>ì†ŒìŠ¤ì½”ë“œ: <a href=\"https://github.com/teddylee777/langchain-kr\">https://github.com/teddylee777/langchain-kr</a><br>ìœ„í‚¤ë…ìŠ¤: <a href=\"https://wikidocs.net/book/14314\">https://wikidocs.net/book/14314</a></p>\n<p>Â </p>\n<p>ì˜¤ëŠ˜ì€ ì¶œë ¥ íŒŒì„œì— ëŒ€í•´ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.</p>\n<p>ë©°ì¹  ê¸€ì´ ì˜¬ë¼ì˜¤ì§€ ì•Šì•˜ë˜ ê²ƒì€<br>streamlit í™œìš©í•œ UIì—ì„œ ì‚¬ìš©ìê°€ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ì„ ì„ íƒí•˜ê³  ì—…ë¡œë“œí•œ PDFë¥¼ ê¸°ë°˜í•´ ì§ˆë¬¸í•˜ë©´, PDFë¥¼ íŒŒì‹±í•´ì„œ RAGë¥¼ êµ¬í˜„í•˜ëŠ” ë¯¸ë‹ˆ í”„ë¡œì íŠ¸ë¥¼ í–ˆì—ˆìŠµë‹ˆë‹¤.</p>\n<p>RAG ê°œë°œ ê´€ë ¨í•œ ê²Œì‹œê¸€ì€ ì¢€ ë” ê¹Šì´ ìˆê²Œ ê³µë¶€í•œ í›„ì— ì˜¬ë¦¬ê³ ì í•©ë‹ˆë‹¤.</p>\n<p>ê³ ëŸ¼ ë ˆì¸ ê³ ~!</p>\n<p>Â </p>\n<p>Â </p>\n<p>LLMì€ ìˆ˜ë ´ë³´ë‹¤ ë°œì‚°ì„ ë” ì˜í•˜ê¸° ë–„ë¬¸ì— ì‘ë‹µì˜ í¬ë§·ì„ ì •í•´ì£¼ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.<br><strong>ê·¸ë˜ì„œ LLMì˜ ë‹µë³€ì„ ì›í•˜ëŠ” êµ¬ì¡°ëŒ€ë¡œ ê°•ì œí•˜ê¸° ìœ„í•´ ì¶œë ¥ íŒŒì„œë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</strong></p>\n<p>ì €ëŠ” Pydantic íŒŒì‹± ë°©ë²•ì„ ë§ì´ ì´ìš©í–ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>\n<p>Â </p>\n<h2 id=\"pydanticoutputparser-ê°€ì¥-ìœ ìš©í•œ-ë‚´ë§˜ëŒ€ë¡œ-íŒŒì„œ\" style=\"position:relative;\"><a href=\"#pydanticoutputparser-%EA%B0%80%EC%9E%A5-%EC%9C%A0%EC%9A%A9%ED%95%9C-%EB%82%B4%EB%A7%98%EB%8C%80%EB%A1%9C-%ED%8C%8C%EC%84%9C\" aria-label=\"pydanticoutputparser ê°€ì¥ ìœ ìš©í•œ ë‚´ë§˜ëŒ€ë¡œ íŒŒì„œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PydanticOutputParser: ê°€ì¥ ìœ ìš©í•œ ë‚´ë§˜ëŒ€ë¡œ íŒŒì„œ</h2>\n<hr>\n<p>â­ï¸ OutputParserì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ë©”ì„œë“œ â­ï¸</p>\n<ol>\n<li>\n<p><code class=\"language-text\">get_format_instructions()</code>: ì¶œë ¥ ì •ë³´ì˜ í˜•ì‹ì„ ì •ì˜í•˜ëŠ” ì§€ì¹¨ ì œê³µ</p>\n</li>\n<li>\n<p><code class=\"language-text\">parse()</code>: ëª¨ë¸ì˜ ì¶œë ¥ì„ íŠ¹ì • ìŠ¤í‚¤ë§ˆì— ë§ëŠ”ì§€ ê²€ì¦, ìŠ¤í‚¤ë§ˆ êµ¬ì¡°ë¡œ ë³€í™˜</p>\n</li>\n</ol>\n<p>ì´ ë©”ì„œë“œë“¤ì€ íŒŒì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , <code class=\"language-text\">get_format_instructions()</code> ë©”ì„œë“œë¡œ ì–´ë–»ê²Œ ì¶œë ¥ê²°ê³¼ë¥¼ íŒŒì‹±í•˜ëŠ”ì§€ ì¶œë ¥í•˜ì—¬ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> pydantic <span class=\"token keyword\">import</span> BaseModel<span class=\"token punctuation\">,</span> Field\n\n<span class=\"token comment\"># BaseModel: pydantic ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ BaseModel ëª¨ë“ˆì„ ìƒì† ë°›ìŒ</span>\n<span class=\"token comment\"># description: í•„ë“œì— ëŒ€í•œ ì„¤ëª…(ìì„¸íˆ ì‘ì„± í•„ìš”)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">EmailSummary</span><span class=\"token punctuation\">(</span>BaseModel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    person<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> Field<span class=\"token punctuation\">(</span>description<span class=\"token operator\">=</span><span class=\"token string\">\"ë©”ì¼ì„ ë³´ë‚¸ ì‚¬ëŒ\"</span><span class=\"token punctuation\">)</span>\n    email<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> Field<span class=\"token punctuation\">(</span>description<span class=\"token operator\">=</span><span class=\"token string\">\"ë©”ì¼ì„ ë³´ë‚¸ ì‚¬ëŒì˜ ì´ë©”ì¼ ì£¼ì†Œ\"</span><span class=\"token punctuation\">)</span>\n    subject<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> Field<span class=\"token punctuation\">(</span>description<span class=\"token operator\">=</span><span class=\"token string\">\"ë©”ì¼ ì œëª©\"</span><span class=\"token punctuation\">)</span>\n    summary<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> Field<span class=\"token punctuation\">(</span>description<span class=\"token operator\">=</span><span class=\"token string\">\"ë©”ì¼ ë³¸ë¬¸ì„ ìš”ì•½í•œ í…ìŠ¤íŠ¸\"</span><span class=\"token punctuation\">)</span>\n    date<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> Field<span class=\"token punctuation\">(</span>description<span class=\"token operator\">=</span><span class=\"token string\">\"ë©”ì¼ ë³¸ë¬¸ì— ì–¸ê¸‰ëœ ë¯¸íŒ… ë‚ ì§œì™€ ì‹œê°„\"</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token comment\"># PydanticOutputParser ìƒì„±</span>\nparser <span class=\"token operator\">=</span> PydanticOutputParser<span class=\"token punctuation\">(</span>pydantic_object<span class=\"token operator\">=</span>EmailSummary<span class=\"token punctuation\">)</span>\n\nparser<span class=\"token punctuation\">.</span>get_format_instructions<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\nThe output should be formatted as a JSON instance that conforms to the JSON schema below.\n\nAs an example, for the schema {\"properties\": {\"foo\": {\"title\": \"Foo\", \"description\": \"a list of strings\", \"type\": \"array\", \"items\": {\"type\": \"string\"}}}, \"required\": [\"foo\"]}\nthe object {\"foo\": [\"bar\", \"baz\"]} is a well-formatted instance of the schema. The object {\"properties\": {\"foo\": [\"bar\", \"baz\"]}} is not well-formatted.\n\nHere is the output schema:\n```\n{\"properties\": {\"person\": {\"description\": \"ë©”ì¼ì„ ë³´ë‚¸ ì‚¬ëŒ\", \"title\": \"Person\", \"type\": \"string\"}, \"email\": {\"description\": \"ë©”ì¼ì„ ë³´ë‚¸ ì‚¬ëŒì˜ ì´ë©”ì¼ ì£¼ì†Œ\", \"title\": \"Email\", \"type\": \"string\"}, \"subject\": {\"description\": \"ë©”ì¼ ì œëª©\", \"title\": \"Subject\", \"type\": \"string\"}, \"summary\": {\"description\": \"ë©”ì¼ ë³¸ë¬¸ì„ ìš”ì•½í•œ í…ìŠ¤íŠ¸\", \"title\": \"Summary\", \"type\": \"string\"}, \"date\": {\"description\": \"ë©”ì¼ ë³¸ë¬¸ì— ì–¸ê¸‰ëœ ë¯¸íŒ… ë‚ ì§œì™€ ì‹œê°„\", \"title\": \"Date\", \"type\": \"string\"}}, \"required\": [\"person\", \"email\", \"subject\", \"summary\", \"date\"]}\n```\n\"\"\"</span></code></pre></div>\n<p>ì´ë ‡ê²Œ ì„¤ì •ì´ ë©ë‹ˆë‹¤.</p>\n<p>ì´í›„, <strong><code class=\"language-text\">parser.get_format_instructions()</code>ë¥¼ í”„ë¡¬í”„íŠ¸ì— ì¶œë ¥ í¬ë§·ìœ¼ë¡œ í•¨ê»˜ ì£¼ë©´ ë©ë‹ˆë‹¤</strong>.</p>\n<p>ê·¸ë¦¬ê³ , LLM ì‘ë‹µ(ë¬¸ìì—´ í˜•ì‹)ì„ <strong>parserì˜ <code class=\"language-text\">parse()</code> ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ íŒŒì‹±ì„ í•˜ë©´ ì•ì„œ ì •ì˜í–ˆë˜ í´ë˜ìŠ¤ëŒ€ë¡œ íŒŒì‹±ì„ í•˜ê²Œ ë©ë‹ˆë‹¤</strong>. (ì—¬ê¸°ì„œëŠ” ì•ì„œ ì •ì˜í•œ Pydantic ê°ì²´ í˜•ì‹ì´ ë¨)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">parser<span class=\"token punctuation\">.</span>parse<span class=\"token punctuation\">(</span>output<span class=\"token punctuation\">)</span>\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\nEmailSummary(person='ê¹€ì² ìˆ˜', email='chulsoo.kim@bikecorporation.me', subject='\"ZENESIS\" ìì „ê±° ìœ í†µ í˜‘ë ¥ ë° ë¯¸íŒ… ì¼ì • ì œì•ˆ', summary='ë°”ì´í¬ì½”í¼ë ˆì´ì…˜ ê¹€ì² ìˆ˜ ìƒë¬´ê°€ ZENESIS ìì „ê±°ì˜ ìƒì„¸ ë¸Œë¡œìŠˆì–´(ê¸°ìˆ  ì‚¬ì–‘, ë°°í„°ë¦¬ ì„±ëŠ¥, ë””ìì¸) ìš”ì²­ê³¼ ìœ í†µ ë° ë§ˆì¼€íŒ… í˜‘ë ¥ ë…¼ì˜ë¥¼ ìœ„í•´ ë¯¸íŒ…ì„ ì œì•ˆí•¨.', date='1ì›” 15ì¼ í™”ìš”ì¼ ì˜¤ì „ 10ì‹œ')\n\"\"\"</span></code></pre></div>\n<p>(ì°¸ê³ ë¡œ, <code class=\"language-text\">print()</code>ë¡œ ì¶œë ¥í•˜ë©´ ì•ˆì˜ ë‚´ìš©ë§Œ ì¶œë ¥í•˜ê²Œ ë©ë‹ˆë‹¤.)</p>\n<p>Â </p>\n<p>ë˜í•œ, <strong>chainì—ì„œ LLM ë’¤ì— parserë¥¼ ì—°ê²°í•´ì£¼ë©´<br><code class=\"language-text\">invoke()</code> ë©”ì„œë“œì˜ ì¶œë ¥ ê²°ê³¼ë¥¼ ìë™ìœ¼ë¡œ íŒŒì‹±í•˜ì—¬ Pydantic ê°ì²´ì˜ ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">chain <span class=\"token operator\">=</span> prompt <span class=\"token operator\">|</span> llm <span class=\"token operator\">|</span> parser\nchain<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"email_conversation\"</span><span class=\"token punctuation\">:</span> email_conversation<span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"question\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ì´ë©”ì¼ ë‚´ìš©ì¤‘ ì£¼ìš” ë‚´ìš©ì„ ì¶”ì¶œí•´ ì£¼ì„¸ìš”.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\nEmailSummary(person='ê¹€ì² ìˆ˜', email='chulsoo.kim@bikecorporation.me', subject='\"ZENESIS\" ìì „ê±° ìœ í†µ í˜‘ë ¥ ë° ë¯¸íŒ… ì¼ì • ì œì•ˆ', summary='ë°”ì´í¬ì½”í¼ë ˆì´ì…˜ ê¹€ì² ìˆ˜ ìƒë¬´ê°€ ZENESIS ìì „ê±°ì— ëŒ€í•œ ìƒì„¸ ë¸Œë¡œìŠˆì–´ ìš”ì²­(ê¸°ìˆ  ì‚¬ì–‘, ë°°í„°ë¦¬ ì„±ëŠ¥, ë””ìì¸)ê³¼ ìœ í†µ ë° ë§ˆì¼€íŒ… í˜‘ë ¥ ë…¼ì˜ë¥¼ ìœ„í•´ ë¯¸íŒ…ì„ ì œì•ˆí•¨.', date='1ì›” 15ì¼ í™”ìš”ì¼ ì˜¤ì „ 10ì‹œ')\n\"\"\"</span></code></pre></div>\n<p>Â </p>\n<p>ê·¸ëŸ°ë°,</p>\n<blockquote>\n<h3 id=\"ê¹¨ì•Œ-tip\" style=\"position:relative;\"><a href=\"#%EA%B9%A8%EC%95%8C-tip\" aria-label=\"ê¹¨ì•Œ tip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’¡ê¹¨ì•Œ Tip</h3>\n<p>ì œê°€ ê²½í—˜í•œ ë°”ë¡œëŠ” <strong>LLMì´ ì• ì´ˆì— ì‘ë‹µí•´ì£¼ëŠ” ê²°ê³¼ê°€ ë¶ˆì•ˆì •í•˜ë©´ íŒŒì„œê°€ ì œëŒ€ë¡œ ì‘ë™ë˜ì§€ ì•ŠëŠ” ê²½ìš°</strong>ê°€ ìˆìŠµë‹ˆë‹¤.</p>\n<p><strong>ì¦‰, í”„ë¡¬í”„íŠ¸ì— ì¶œë ¥ í¬ë§·ì„ ì •í•´ì£¼ì—ˆë‹¤ê³  í•´ì„œ í•­ìƒ ì¶œë ¥ í¬ë§·ì„ ë§ì¶”ì–´ ë‹µë³€í•´ì£¼ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<p>ì•ì˜ ì˜ˆì‹œì—ì„œ ì´ëŸ¬í•œ ì¶œë ¥ ê²°ê³¼ë¥¼ ë°›ì„ ë•Œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">AIMessage(content='\njson\\n{\\n  \"person\": \"ê¹€ì² ìˆ˜\",\\n  \"email\": \"chulsoo.kim@bikecorporation.me\",\\n  \"subject\": \"\\\\\"ZENESIS\\\\\" ìì „ê±° ìœ í†µ í˜‘ë ¥ ë° ë¯¸íŒ… ì¼ì • ì œì•ˆ\",\\n  \"summary\": \"ë°”ì´í¬ì½”í¼ë ˆì´ì…˜ ê¹€ì² ìˆ˜ ìƒë¬´ê°€ ZENESIS ìì „ê±°ì— ëŒ€í•œ ìƒì„¸ ë¸Œë¡œìŠˆì–´(ê¸°ìˆ  ì‚¬ì–‘, ë°°í„°ë¦¬ ì„±ëŠ¥, ë””ìì¸)ë¥¼ ìš”ì²­í•˜ê³ , ìœ í†µ ì „ëµê³¼ ë§ˆì¼€íŒ… ê³„íš ìˆ˜ë¦½ì„ ìœ„í•´ í˜‘ë ¥ ê°€ëŠ¥ì„±ì„ ë…¼ì˜í•˜ê³ ì 1ì›” 15ì¼ ì˜¤ì „ 10ì‹œì— ë¯¸íŒ…ì„ ì œì•ˆí•¨.\",\\n  \"date\": \"1ì›” 15ì¼ ì˜¤ì „ 10ì‹œ\"\\n}\\n\n', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 151, 'prompt_tokens': 601, 'total_tokens': 752, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4.1-mini-2025-04-14', 'system_fingerprint': 'fp_376a7ccef1', 'id': 'chatcmpl-CpTzmI5b3Zm40LzHPuNQnkCzOWMqz', 'finish_reason': 'stop', 'logprobs': None}, id='run-3520fb7f-43a8-44ce-8c80-5c30f61d8ea4-0', usage_metadata={'input_tokens': 601, 'output_tokens': 151, 'total_tokens': 752, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})</code></pre></div>\n<p>ì—¬ê¸°ì„œ <strong>ì¶œë ¥ í˜•ì‹ì´ <code class=\"language-text\">AIMessage</code> ê°ì²´ë¼ í•¨ì€ íŒŒì„œê°€ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ì§€ ì•Šì•„ LLM ê²°ê³¼ ê·¸ëŒ€ë¡œì¸ ìƒíƒœ</strong>ì¸ë°<br>content ê°’ì´ ````json`ë¡œ ì‹œì‘í•œ ê²ƒìœ¼ë¡œ ë³¼ ë•Œ ì´ ê²½ìš°ëŠ” <strong>LLMì´ ì‘ë‹µìœ¼ë¡œ ì½”ë“œ ë¸”ë¡ì„ ë‚´ì¤€ ê²ƒ</strong>ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.</p>\n<p>=> ì´ë ‡ê²Œ <strong>íŒŒì‹±ì´ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°, ì €ëŠ” LLMì—ê²Œ ì‘ë‹µë°›ëŠ” ê²ƒì„ ì¬ì‹œë„í•˜ëŠ” ë¡œì§</strong>ì„ í•¨ê»˜ ë„£ì—ˆì—ˆìŠµë‹ˆë‹¤.</p>\n</blockquote>\n<p>Â </p>\n<p><strong>Chainì— parserì„ ì—°ê²°í•˜ëŠ” ê²ƒì€ LLMì˜ ì‘ë‹µê²°ê³¼ë¥¼ ë°›ì€ â€˜í›„ì²˜ë¦¬â€™ ë°©ì‹ì´ê¸° ë•Œë¬¸ì— ì•ˆì •ì ì¸ íŒŒì‹±ì´ ë¶ˆê°€</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>Â </p>\n<p>í•˜ì§€ë§Œ,</p>\n<p><strong>LLMì˜ <code class=\"language-text\">.with_structured_output()</code> ë©”ì„œë“œë¥¼ ì´ìš©í•˜ë©´<br>ì• ì´ˆì— LLMì—ê²Œ êµ¬ì¡°í™”ëœ ì‘ë‹µë°›ì„ ìˆ˜ ìˆë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong> â­ï¸</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">llm_with_structered <span class=\"token operator\">=</span> ChatOpenAI<span class=\"token punctuation\">(</span>\n    temperature<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> model_name<span class=\"token operator\">=</span><span class=\"token string\">\"gpt-4.1-mini\"</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>with_structured_output<span class=\"token punctuation\">(</span>EmailSummary<span class=\"token punctuation\">)</span>\n\nanswer <span class=\"token operator\">=</span> llm_with_structered<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span>email_conversation<span class=\"token punctuation\">)</span>\nanswer\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\nEmailSummary(person='ê¹€ì² ìˆ˜', email='chulsoo.kim@bikecorporation.me', subject='\"ZENESIS\" ìì „ê±° ìœ í†µ í˜‘ë ¥ ë° ë¯¸íŒ… ì¼ì • ì œì•ˆ', summary='ë°”ì´í¬ì½”í¼ë ˆì´ì…˜ì˜ ê¹€ì² ìˆ˜ ìƒë¬´ê°€ ì´ì€ì±„ ëŒ€ë¦¬ì—ê²Œ ZENESIS ìì „ê±°ì— ëŒ€í•œ ìƒì„¸ ë¸Œë¡œìŠˆì–´ ìš”ì²­ê³¼ í•¨ê»˜, ê¸°ìˆ  ì‚¬ì–‘, ë°°í„°ë¦¬ ì„±ëŠ¥, ë””ìì¸ ì •ë³´ê°€ í•„ìš”í•˜ë‹¤ê³  ì „ë‹¬í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, 1ì›” 15ì¼ í™”ìš”ì¼ ì˜¤ì „ 10ì‹œì— ë¯¸íŒ…ì„ ì œì•ˆí•˜ë©° í˜‘ë ¥ ê°€ëŠ¥ì„±ì„ ë…¼ì˜í•˜ê³ ì í•©ë‹ˆë‹¤.', date='2024-01-08')\n\"\"\"</span></code></pre></div>\n<p>ì´ì²˜ëŸ¼ LLMì„ <code class=\"language-text\">with_structured_output()</code> ë©”ì„œë“œë¥¼ ë¶™ì—¬ ìƒì„±í•˜ê³  <code class=\"language-text\">invoke()</code>ë¥¼ í˜¸ì¶œí•˜ë©´</p>\n<p><strong>LLM ì‘ë‹µ í˜•ì‹ <code class=\"language-text\">AIMessage</code>ê°€ ì•„ë‹Œ<br>ì—¬ê¸°ì„œ Pydantic ê°ì²´ì¸ EmailSummary ê°ì²´ë¡œ ì‘ë‹µì´ ë‚˜ì˜¤ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<p>Â </p>\n<p>âš ï¸ <strong>ì•Œì•„ë‘ì–´ì•¼ í•  ì </strong></p>\n<ol>\n<li>LLMë§ˆë‹¤ <code class=\"language-text\">with_structured_output()</code> ë©”ì„œë“œë¥¼ ì§€ì›í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë‹ˆ ì°¾ì•„ë³´ê³  ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</li>\n<li>ìŠ¤íŠ¸ë¦¬ë° ì¶œë ¥ì€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. <code class=\"language-text\">invoke()</code> í˜¸ì¶œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>\n</ol>\n<p>Â </p>\n<p>Â </p>\n<p>ì¶œë ¥ íŒŒì„œëŠ” Pydantic íŒŒì„œ ì™¸ì— ë‹¤ì–‘í•œ í˜•ì‹ì˜ íŒŒì„œê°€ ì¡´ì¬í•©ë‹ˆë‹¤.</p>\n<p>ì´ë²ˆ ê¸€ì—ì„œëŠ” ê·¸ ì¤‘ì— ê°€ì¥ ìœ ìš©í•œ Pydantic íŒŒì„œë§Œ ë‹¤ë¤„ë³´ì•˜ëŠ”ë° ë‹¤ë¥¸ ê²ƒë“¤ì€ í•„ìš”ì‹œ ë‹¤ë£¨ê³ ì í•©ë‹ˆë‹¤.</p>\n<p>ì´ë²ˆ ê¸€ì€ ì—¬ê¸°ì„œ ë§ˆë¬´ë¦¬í•˜ê² ìŠ´ë‹¤ ğŸ«¡</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#pydanticoutputparser-%EA%B0%80%EC%9E%A5-%EC%9C%A0%EC%9A%A9%ED%95%9C-%EB%82%B4%EB%A7%98%EB%8C%80%EB%A1%9C-%ED%8C%8C%EC%84%9C\">PydanticOutputParser: ê°€ì¥ ìœ ìš©í•œ ë‚´ë§˜ëŒ€ë¡œ íŒŒì„œ</a></li>\n</ul>\n</div>","frontmatter":{"date":"December 21, 2025","title":"[LLM] í…Œë””ë…¸íŠ¸ì˜ RAG ë¹„ë²•ë…¸íŠ¸ ë„ì ë„ì -5","categories":"LLM","author":"ë³€ìš°ì¤‘","emoji":"â˜€ï¸"},"fields":{"slug":"/25-12-21_1/"}},"prev":{"id":"0a5507c6-4f1e-5505-b7fb-c556a92f5d07","html":"<p>ì˜¤ëŠ˜ì€ Dense Retrieverì™€ Sparse Retrieverì— ëŒ€í•´ ì •ë¦¬í•´ë³´ê³ ì í•©ë‹ˆë‹¤.</p>\n<p>ë ˆì¸ ê¸°ë¦¿~!</p>\n<p>Â </p>\n<p>Â </p>\n<h2 id=\"dense-retriever-vs-sparse-retriever\" style=\"position:relative;\"><a href=\"#dense-retriever-vs-sparse-retriever\" aria-label=\"dense retriever vs sparse retriever permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dense Retriever vs Sparse Retriever</h2>\n<hr>\n<h3 id=\"ì„ë² ë”©embedding\" style=\"position:relative;\"><a href=\"#%EC%9E%84%EB%B2%A0%EB%94%A9embedding\" aria-label=\"ì„ë² ë”©embedding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì„ë² ë”©(Embedding)</h3>\n<p>Dense RetrieverëŠ” í…ìŠ¤íŠ¸ë¥¼ ê³ ì°¨ì› ê³µê°„ì˜ **ë°€ì§‘ ë²¡í„°(Dense Vector)**ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.</p>\n<ul>\n<li><strong>Sparse Vector:</strong> ë‹¨ì–´ ì‚¬ì „ ì „ì²´ í¬ê¸°ì˜ ë²¡í„° ì¤‘ ëŒ€ë¶€ë¶„ì´ 0ì¸ í˜•íƒœ (ë‹¨ì–´ ì¤‘ë³µ ìœ„ì£¼)</li>\n<li><strong>Dense Vector:</strong> ë³´í†µ 768ì°¨ì›ì´ë‚˜ 1024ì°¨ì›ì˜ ê³ ì •ëœ í¬ê¸° ì•ˆì— ëª¨ë“  ìˆ«ìê°€ ì˜ë¯¸ ìˆëŠ” ìˆ˜ì¹˜ë¡œ ì±„ì›Œì§„ í˜•íƒœ</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th><strong>êµ¬ë¶„</strong></th>\n<th><strong>Sparse Retriever (BM25 ë“±)</strong></th>\n<th><strong>Dense Retriever (DPR ë“±)</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>ë§¤ì¹­ ë°©ì‹</strong></td>\n<td>í‚¤ì›Œë“œ ì¤‘ì‹¬ (Exact Match)</td>\n<td>ë¬¸ë§¥ ë° ì˜ë¯¸ ì¤‘ì‹¬ (Semantic Match)</td>\n</tr>\n<tr>\n<td><strong>íŠ¹ì§•</strong></td>\n<td>â€œì‚¬ê³¼â€ê°€ í¬í•¨ëœ ë¬¸ì„œë¥¼ ì˜ ì°¾ìŒ</td>\n<td>â€œì• í”Œâ€ì´ë‚˜ â€œê³¼ì¼â€ì´ë¼ëŠ” ë‹¨ì–´ë„ ë¬¸ë§¥ìƒ ì´í•´</td>\n</tr>\n<tr>\n<td><strong>ì¥ì </strong></td>\n<td>ë¹ ë¥´ê³ , ë„ë©”ì¸ ì§€ì‹ ì—†ì´ë„ ì•ˆì •ì </td>\n<td>ë™ì˜ì–´ ì²˜ë¦¬ì™€ ì¶”ìƒì ì¸ ì§ˆë¬¸ ë‹µë³€ì— ê°•í•¨</td>\n</tr>\n<tr>\n<td><strong>ë‹¨ì </strong></td>\n<td>ì˜¤íƒ€ë‚˜ ìœ ì˜ì–´ ì²˜ë¦¬ì— ì·¨ì•½í•¨</td>\n<td>í•™ìŠµ ë°ì´í„°ê°€ ë§ì´ í•„ìš”í•˜ê³  ê³„ì‚° ë¹„ìš©ì´ í¼</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"ì™œ-dense-retrieverë¥¼-ì“¸ê¹Œ\" style=\"position:relative;\"><a href=\"#%EC%99%9C-dense-retriever%EB%A5%BC-%EC%93%B8%EA%B9%8C\" aria-label=\"ì™œ dense retrieverë¥¼ ì“¸ê¹Œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì™œ Dense Retrieverë¥¼ ì“¸ê¹Œ?</h3>\n<ol>\n<li><strong>ë¯¸ì„¸í•œ ì˜ë¯¸ ì°¨ì´ íŒŒì•…:</strong> â€œíŒŒì´ì¬ ì„¤ì¹˜ ë°©ë²•â€ê³¼ â€œPython ì¸ìŠ¤í†¨ ê°€ì´ë“œâ€ê°€ ê°™ì€ ì˜ë¯¸ì„ì„ ì´í•´í•©ë‹ˆë‹¤.</li>\n<li><strong>ì§ˆë¬¸-ë‹µë³€ ì„±ëŠ¥ í–¥ìƒ:</strong> RAG(ê²€ìƒ‰ ì¦ê°• ìƒì„±) ì‹œìŠ¤í…œì—ì„œ LLMì´ ë‹µë³€í•˜ê¸° ê°€ì¥ ì¢‹ì€ ë¬¸ë§¥ì„ ê°€ì ¸ì˜¤ëŠ” ë° íƒì›”í•©ë‹ˆë‹¤.</li>\n</ol>\n<h3 id=\"ëŒ€í‘œì ì¸-ëª¨ë¸-dpr-dense-passage-retrieval\" style=\"position:relative;\"><a href=\"#%EB%8C%80%ED%91%9C%EC%A0%81%EC%9D%B8-%EB%AA%A8%EB%8D%B8-dpr-dense-passage-retrieval\" aria-label=\"ëŒ€í‘œì ì¸ ëª¨ë¸ dpr dense passage retrieval permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ëŒ€í‘œì ì¸ ëª¨ë¸: DPR (Dense Passage Retrieval)</h3>\n<p>ë©”íƒ€(êµ¬ Facebook !!)ì—ì„œ ì œì•ˆí•œ ëª¨ë¸ë¡œ, ë‘ ê°œì˜ BERT ëª¨ë¸ì„ ê°ê° ì§ˆë¬¸ìš©ê³¼ ë¬¸ì„œìš© ì¸ì½”ë”ë¡œ í•™ìŠµì‹œì¼œ ì„±ëŠ¥ì„ ê·¹ëŒ€í™”í•œ ë°©ì‹ì´ ê°€ì¥ ìœ ëª…í•©ë‹ˆë‹¤.</p>\n<h3 id=\"í•œê³„ì™€-ë³´ì™„-hybrid-search\" style=\"position:relative;\"><a href=\"#%ED%95%9C%EA%B3%84%EC%99%80-%EB%B3%B4%EC%99%84-hybrid-search\" aria-label=\"í•œê³„ì™€ ë³´ì™„ hybrid search permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í•œê³„ì™€ ë³´ì™„ (Hybrid Search)</h3>\n<p>Dense RetrieverëŠ” í•™ìŠµ ë°ì´í„°ì— ì—†ëŠ” íŠ¹ìˆ˜í•œ ê³ ìœ ëª…ì‚¬ë‚˜ í’ˆë²ˆ(ì˜ˆ: â€œA-1234â€) ê°™ì€ ìˆ˜ì¹˜ ë§¤ì¹­ì—ëŠ” ì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ìµœê·¼ì—ëŠ” <strong>Sparseì™€ Denseë¥¼ ì„ì€ Hybrid Search</strong> ë°©ì‹ì„ ì‹¤ë¬´ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>\n<blockquote>\n<p>ìµœê·¼ì—ëŠ” ê³ ì„±ëŠ¥ ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤(Chroma, Pinecone, FAISS ë“±)ë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ˜ë°±ë§Œ ê°œì˜ Dense Vector ì¤‘ì—ì„œ ê°€ì¥ ìœ ì‚¬í•œ ê²ƒì„ 0.1ì´ˆ ë‚´ì™¸ë¡œ ê²€ìƒ‰í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n</blockquote>\n<p>Â </p>\n<p>Â </p>\n<h3 id=\"ì˜ˆì œë¡œ-í™•ì¸\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%A0%9C%EB%A1%9C-%ED%99%95%EC%9D%B8\" aria-label=\"ì˜ˆì œë¡œ í™•ì¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì˜ˆì œë¡œ í™•ì¸</h3>\n<p>Sparse Retrieverì™€ Dense Retrieverë¥¼ ì˜ˆì œë¥¼ í†µí•´ì„œ ì§ì ‘ ë¹„êµí•´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_core<span class=\"token punctuation\">.</span>documents <span class=\"token keyword\">import</span> Document\n\n<span class=\"token comment\"># 1. ì˜ˆì‹œ ë°ì´í„° (ë¬¸ì„œ ì²­í¬)</span>\ntexts <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"ì•„ì´í° 15 í”„ë¡œëŠ” í‹°íƒ€ëŠ„ ì†Œì¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ë³ìŠµë‹ˆë‹¤.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"ê°¤ëŸ­ì‹œ S24 ìš¸íŠ¸ë¼ëŠ” AI ë²ˆì—­ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"ì ì‹¬ ë©”ë‰´ë¡œ ê¹€ì¹˜ì°Œê°œì™€ ì œìœ¡ë³¶ìŒì´ ì¸ê¸°ì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"ì• í”Œì˜ ìƒˆë¡œìš´ ìŠ¤ë§ˆíŠ¸í°ì€ Cíƒ€ì… ì¶©ì „ ë‹¨ìë¥¼ ì§€ì›í•©ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 'ì•„ì´í°' ë‹¨ì–´ ì—†ìŒ</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># LangChain Document ê°ì²´ë¡œ ë³€í™˜</span>\ndocuments <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>Document<span class=\"token punctuation\">(</span>page_content<span class=\"token operator\">=</span>t<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> t <span class=\"token keyword\">in</span> texts<span class=\"token punctuation\">]</span>\ndocuments\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\n[Document(metadata={}, page_content='ì•„ì´í° 15 í”„ë¡œëŠ” í‹°íƒ€ëŠ„ ì†Œì¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ë³ìŠµë‹ˆë‹¤.'),\n Document(metadata={}, page_content='ê°¤ëŸ­ì‹œ S24 ìš¸íŠ¸ë¼ëŠ” AI ë²ˆì—­ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.'),\n Document(metadata={}, page_content='ì ì‹¬ ë©”ë‰´ë¡œ ê¹€ì¹˜ì°Œê°œì™€ ì œìœ¡ë³¶ìŒì´ ì¸ê¸°ì…ë‹ˆë‹¤.'),\n Document(metadata={}, page_content='ì• í”Œì˜ ìƒˆë¡œìš´ ìŠ¤ë§ˆíŠ¸í°ì€ Cíƒ€ì… ì¶©ì „ ë‹¨ìë¥¼ ì§€ì›í•©ë‹ˆë‹¤.')]\n\"\"\"</span></code></pre></div>\n<p>LangChain Document ê°ì²´ë¡œ ë³€í™˜í•œ í›„ì—,<br>ê²€ìƒ‰ì–´ â€<strong>ì•„ì´í° 15 í”„ë¡œ ì¶©ì „</strong>â€œì— ëŒ€í•œ <strong>ë‘ Retriever ê²°ê³¼ë¥¼ ë¹„êµ</strong>í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<p>Â </p>\n<ol>\n<li>\n<p><strong>BM25Retriever - Sparse Retriever ì˜ˆì‹œ</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_community<span class=\"token punctuation\">.</span>retrievers <span class=\"token keyword\">import</span> BM25Retriever\n\n<span class=\"token comment\"># 1. Sparse Retriever (BM25)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"--- [A. Sparse Retriever (BM25)] ---\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># BM25Retriever ê°ì²´ ìƒì„±</span>\nsparse_retriever <span class=\"token operator\">=</span> BM25Retriever<span class=\"token punctuation\">.</span>from_documents<span class=\"token punctuation\">(</span>documents<span class=\"token punctuation\">)</span>\nsparse_retriever<span class=\"token punctuation\">.</span>k <span class=\"token operator\">=</span> <span class=\"token number\">1</span>  <span class=\"token comment\"># ìƒìœ„ 1ê°œë§Œ ê²€ìƒ‰</span>\n\n<span class=\"token comment\"># ê²€ìƒ‰ì–´: \"ì•„ì´í° 15 í”„ë¡œ ì¶©ì „\"</span>\nsparse_result <span class=\"token operator\">=</span> sparse_retriever<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token string\">\"ì•„ì´í° 15 í”„ë¡œ ì¶©ì „\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"ê²€ìƒ‰ì–´: 'ì•„ì´í° 15 í”„ë¡œ ì¶©ì „'\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"ê²°ê³¼: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>sparse_result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>page_content<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\n--- [A. Sparse Retriever (BM25)] ---\nê²€ìƒ‰ì–´: 'ì•„ì´í° 15 í”„ë¡œ ì¶©ì „'\nê²°ê³¼: ì•„ì´í° 15 í”„ë¡œëŠ” í‹°íƒ€ëŠ„ ì†Œì¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ë³ìŠµë‹ˆë‹¤.\n\"\"\"</span></code></pre></div>\n</li>\n</ol>\n<ul>\n<li>\n<p><strong>ê²€ìƒ‰ì–´ ë¶„í•´(í† í°í™”):</strong> <code class=\"language-text\">[\"ì•„ì´í°\", \"15\", \"í”„ë¡œ\", \"ì¶©ì „\"]</code> (4ê°œì˜ í‚¤ì›Œë“œ)</p>\n</li>\n<li>\n<p><strong>ì²«ë²ˆì§¸ì™€ ë„¤ë²ˆì§¸ ë¬¸ì„œê°€ ìœ ë ¥í•œ í›„ë³´</strong>ì¸ë°</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\"ì•„ì´í° 15 í”„ë¡œëŠ” í‹°íƒ€ëŠ„ ì†Œì¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ë³ìŠµë‹ˆë‹¤.\",\n...\n\"ì• í”Œì˜ ìƒˆë¡œìš´ ìŠ¤ë§ˆíŠ¸í°ì€ Cíƒ€ì… ì¶©ì „ ë‹¨ìë¥¼ ì§€ì›í•©ë‹ˆë‹¤.\"</code></pre></div>\n</li>\n<li>\n<p><strong>BM25</strong>ëŠ” <strong>1) í† í°ì´ ë¬¸ì„œ ì „ì²´ì—ì„œ ì–¼ë§ˆë‚˜ í¬ê·€í•œì§€, 2) í† í°ì´ ê° ë¬¸ì„œì—ì„œ ì–¼ë§ˆë‚˜ ìì£¼ ë“±ì¥í•˜ëŠ”ì§€(ë¹ˆë„ í¬í™” ê³„ì‚°ì„ í†µí•´ ë„ˆë¬´ ë§ì´ ë“±ì¥í•˜ë©´ ë”ì´ìƒ ì ìˆ˜ê°€ ì˜¤ë¥´ì§€ ì•ŠìŒ), 3) ê° ë¬¸ì„œ ê¸¸ì´ëŠ” ì–¼ë§ˆë‚˜ ì§§ì€ì§€</strong> ë¥¼ ê³„ì‚°í•˜ì—¬ ì ìˆ˜ë¥¼ ë§¤ê¹ë‹ˆë‹¤.</p>\n<ul>\n<li>ì´ë•Œ ì²«ë²ˆì§¸ ë¬¸ì„œ <code class=\"language-text\">\"ì•„ì´í° 15 í”„ë¡œëŠ” í‹°íƒ€ëŠ„ ì†Œì¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ë³ìŠµë‹ˆë‹¤.\"</code>ê°€ <code class=\"language-text\">ì•„ì´í°</code>, <code class=\"language-text\">15</code>, <code class=\"language-text\">í”„ë¡œ</code>ê°€ ì—¬ëŸ¬ ê°œ ê²¹ì¹˜ë©´ì„œ ë‹¤ë¥¸ ë¬¸ì„œë“¤ê³¼ ë¹„êµí–ˆì„ ë•Œ í† í°ë“¤ì˜ í¬ê·€ì„±ë“¤ì´ í° ì°¨ì´ ì—†ê³  ë¬¸ì„œ ê¸¸ì´ë„ í° ì°¨ì´ ì—†ê¸° ë•Œë¬¸ì—</li>\n<li><strong>Sparse Retrieverì¸ BM25RetrieverëŠ” ì²«ë²ˆì§¸ ë¬¸ì„œë¥¼ ê°€ì ¸ì˜¤ê²Œ ë©ë‹ˆë‹¤.</strong></li>\n</ul>\n</li>\n</ul>\n<p>Â </p>\n<ol start=\"2\">\n<li>\n<p><strong>í—ˆê¹…í˜ì´ìŠ¤ì˜ jhgan/ko-sroberta-multitask ëª¨ë¸ - Dense Retriever ì˜ˆì‹œ</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> langchain_community<span class=\"token punctuation\">.</span>vectorstores <span class=\"token keyword\">import</span> FAISS\n<span class=\"token keyword\">from</span> langchain_huggingface <span class=\"token keyword\">import</span> HuggingFaceEmbeddings\n\n<span class=\"token comment\"># 2. Dense Retriever (Vector Store)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"--- [B. Dense Retriever (Vector/FAISS)] ---\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># ì„ë² ë”© ëª¨ë¸ ë¡œë“œ (í•œêµ­ì–´ ì„±ëŠ¥ ì¢‹ì€ ëª¨ë¸)</span>\nembedding_model <span class=\"token operator\">=</span> HuggingFaceEmbeddings<span class=\"token punctuation\">(</span>model_name<span class=\"token operator\">=</span><span class=\"token string\">\"jhgan/ko-sroberta-multitask\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ë²¡í„° ì €ì¥ì†Œ(VectorStore) ìƒì„± í›„ Retrieverë¡œ ë³€í™˜</span>\nvectorstore <span class=\"token operator\">=</span> FAISS<span class=\"token punctuation\">.</span>from_documents<span class=\"token punctuation\">(</span>documents<span class=\"token punctuation\">,</span> embedding_model<span class=\"token punctuation\">)</span>\ndense_retriever <span class=\"token operator\">=</span> vectorstore<span class=\"token punctuation\">.</span>as_retriever<span class=\"token punctuation\">(</span>search_kwargs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"k\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ê²€ìƒ‰ì–´: \"ì•„ì´í° 15 í”„ë¡œ ì¶©ì „\"</span>\ndense_result <span class=\"token operator\">=</span> dense_retriever<span class=\"token punctuation\">.</span>invoke<span class=\"token punctuation\">(</span><span class=\"token string\">\"ì•„ì´í° 15 í”„ë¡œ ì¶©ì „\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"ê²€ìƒ‰ì–´: 'ì•„ì´í° 15 í”„ë¡œ ì¶©ì „'\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"ê²°ê³¼: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>dense_result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>page_content<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token triple-quoted-string string\">\"\"\"ì¶œë ¥:\n--- [B. Dense Retriever (Vector/FAISS)] ---\nê²€ìƒ‰ì–´: 'ì•„ì´í° 15 í”„ë¡œ ì¶©ì „'\nê²°ê³¼: ì• í”Œì˜ ìƒˆë¡œìš´ ìŠ¤ë§ˆíŠ¸í°ì€ Cíƒ€ì… ì¶©ì „ ë‹¨ìë¥¼ ì§€ì›í•©ë‹ˆë‹¤.\n\"\"\"</span></code></pre></div>\n<ul>\n<li><strong>ê²€ìƒ‰ì–´ ë²¡í„°:</strong> **<code class=\"language-text\">ì•„ì´í° 15 í”„ë¡œ ì¶©ì „</code>**ì„ <strong>ì•„ì´í° ìŠ¤ë§ˆíŠ¸í°ì˜ íŠ¹ì • ê¸°ì¢…ì˜ ì¶©ì „ê³¼ ê´€ë ¨í•œ ì˜ë¯¸</strong>ë¥¼ ê°€ì§„ ì¢Œí‘œë¡œ ë³€í™˜í•  ê²ƒì„</li>\n<li><strong>ë„¤ë²ˆì§¸ ë¬¸ì„œê°€ ì²«ë²ˆì§¸ ë¬¸ì„œë³´ë‹¤ íŠ¹ë³„í•˜ê²Œ <code class=\"language-text\">ì¶©ì „</code>ì´ë¼ëŠ” í•µì‹¬ ì˜ë„ê°€ ê°€ê¹Œìš°ë¯€ë¡œ ë„¤ë²ˆì§¸ ë¬¸ì„œë¥¼ ê°€ì ¸ì˜¤ê²Œ ë©ë‹ˆë‹¤.</strong></li>\n</ul>\n</li>\n</ol>\n<p>Â </p>\n<p>Â </p>\n<p>Dense Retrieverê³¼ ê°™ì€ Semantic Retrieverì€<br>ë²¡í„° ê²€ìƒ‰ì€ â€œì˜ë¯¸â€ë¥¼ ë„ˆë¬´ ì¤‘ì‹œí•œ ë‚˜ë¨¸ì§€ â€œì •í™•ì„±â€ì„ ë†“ì¹  ë•Œê°€ ë§ìŠµë‹ˆë‹¤.</p>\n<p>íŠ¹íˆ, ê³ ìœ ëª…ì‚¬ë¥¼ ë¬´ì‹œí•˜ëŠ” ê²½ìš°ê°€ ì¡´ì¬í•˜ì—¬<br>ìµœê·¼ì—ëŠ” í•˜ì´ë¸Œë¦¬ë“œë¡œ Retrieverë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤ê³  í•©ë‹ˆë‹¤.</p>\n<p>ì´ê²ƒì€ ë‹¤ìŒì— ë‹¤ë£¨ë„ë¡ í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<p>ê·¸ëŸ¼ ì´ë²ˆ ê¸€ì€ ì—¬ê¸°ê¹Œì§€ ë„ì•.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#dense-retriever-vs-sparse-retriever\">Dense Retriever vs Sparse Retriever</a></p>\n<ul>\n<li><a href=\"#%EC%9E%84%EB%B2%A0%EB%94%A9embedding\">ì„ë² ë”©(Embedding)</a></li>\n<li><a href=\"#%EC%99%9C-dense-retriever%EB%A5%BC-%EC%93%B8%EA%B9%8C\">ì™œ Dense Retrieverë¥¼ ì“¸ê¹Œ?</a></li>\n<li><a href=\"#%EB%8C%80%ED%91%9C%EC%A0%81%EC%9D%B8-%EB%AA%A8%EB%8D%B8-dpr-dense-passage-retrieval\">ëŒ€í‘œì ì¸ ëª¨ë¸: DPR (Dense Passage Retrieval)</a></li>\n<li><a href=\"#%ED%95%9C%EA%B3%84%EC%99%80-%EB%B3%B4%EC%99%84-hybrid-search\">í•œê³„ì™€ ë³´ì™„ (Hybrid Search)</a></li>\n<li><a href=\"#%EC%98%88%EC%A0%9C%EB%A1%9C-%ED%99%95%EC%9D%B8\">ì˜ˆì œë¡œ í™•ì¸</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"December 23, 2025","title":"Dense Retrieverì™€ Sparse Retriever","categories":"LLM RAG","author":"ë³€ìš°ì¤‘","emoji":"â˜€ï¸"},"fields":{"slug":"/25-12-23_1/"}},"site":{"siteMetadata":{"siteUrl":"https://www.zoomkoding.com","comments":{"utterances":{"repo":"https://github.com/byeonwoojung/byeonwoojung.github.io"}}}}},"pageContext":{"slug":"/25-12-22_1/","nextSlug":"/25-12-21_1/","prevSlug":"/25-12-23_1/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}